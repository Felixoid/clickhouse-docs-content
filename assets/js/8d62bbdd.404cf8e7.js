"use strict";(self.webpackChunkclickhouse=self.webpackChunkclickhouse||[]).push([[56709],{3905:function(e,t,n){n.d(t,{Zo:function(){return c},kt:function(){return m}});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var i=a.createContext({}),s=function(e){var t=a.useContext(i),n=t;return e&&(n="function"==typeof e?e(t):p(p({},t),e)),n},c=function(e){var t=s(e.components);return a.createElement(i.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,l=e.originalType,i=e.parentName,c=o(e,["components","mdxType","originalType","parentName"]),d=s(n),m=r,h=d["".concat(i,".").concat(m)]||d[m]||u[m]||l;return n?a.createElement(h,p(p({ref:t},c),{},{components:n})):a.createElement(h,p({ref:t},c))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=n.length,p=new Array(l);p[0]=d;var o={};for(var i in t)hasOwnProperty.call(t,i)&&(o[i]=t[i]);o.originalType=e,o.mdxType="string"==typeof e?e:r,p[1]=o;for(var s=2;s<l;s++)p[s]=n[s];return a.createElement.apply(null,p)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},70908:function(e,t,n){n.r(t),n.d(t,{assets:function(){return c},contentTitle:function(){return i},default:function(){return m},frontMatter:function(){return o},metadata:function(){return s},toc:function(){return u}});var a=n(87462),r=n(63366),l=(n(67294),n(3905)),p=["components"],o={sidebar_position:19,sidebar_label:"HTTP\u5ba2\u6237\u7aef"},i="HTTP\u5ba2\u6237\u7aef",s={unversionedId:"zh/interfaces/http",id:"zh/interfaces/http",title:"HTTP\u5ba2\u6237\u7aef",description:"http-interface}",source:"@site/docs/zh/interfaces/http.md",sourceDirName:"zh/interfaces",slug:"/zh/interfaces/http",permalink:"/docs/zh/interfaces/http",editUrl:"https://github.com/ClickHouse/ClickHouse/tree/master/docs/zh/interfaces/http.md",tags:[],version:"current",sidebarPosition:19,frontMatter:{sidebar_position:19,sidebar_label:"HTTP\u5ba2\u6237\u7aef"},sidebar:"chinese",previous:{title:"\u539f\u751f\u63a5\u53e3(TCP)",permalink:"/docs/zh/interfaces/tcp"},next:{title:"MySQL\u63a5\u53e3",permalink:"/docs/zh/interfaces/mysql"}},c={},u=[{value:"\u54cd\u5e94\u7f13\u51b2",id:"response-buffering",level:2},{value:"\u67e5\u8be2\u53c2\u6570",id:"cli-queries-with-parameters",level:3},{value:"\u793a\u4f8b",id:"example",level:3},{value:"\u7279\u5b9a\u7684HTTP\u63a5\u53e3",id:"predefined_http_interface",level:2},{value:"\u7279\u5b9a\u67e5\u8be2",id:"predefined_query_handler",level:3},{value:"\u52a8\u6001\u67e5\u8be2",id:"dynamic_query_handler",level:3},{value:"static",id:"static",level:3}],d={toc:u};function m(e){var t=e.components,n=(0,r.Z)(e,p);return(0,l.kt)("wrapper",(0,a.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("h1",{id:"http-interface"},"HTTP\u5ba2\u6237\u7aef"),(0,l.kt)("p",null,"HTTP\u63a5\u53e3\u5141\u8bb8\u60a8\u5728\u4efb\u4f55\u7f16\u7a0b\u8bed\u8a00\u7684\u4efb\u4f55\u5e73\u53f0\u4e0a\u4f7f\u7528ClickHouse\u3002\u6211\u4eec\u4f7f\u7528\u5b83\u5728Java\u548cPerl\u4ee5\u53cashell\u811a\u672c\u4e2d\u5de5\u4f5c\u3002\u5728\u5176\u4ed6\u90e8\u95e8\u4e2d\uff0cHTTP\u63a5\u53e3\u7528\u4e8ePerl\u3001Python\u548cGo\u3002HTTP\u63a5\u53e3\u6bd4\u539f\u751f\u63a5\u53e3\u53d7\u5230\u66f4\u591a\u7684\u9650\u5236\uff0c\u4f46\u5b83\u5177\u6709\u66f4\u597d\u7684\u517c\u5bb9\u6027\u3002"),(0,l.kt)("p",null,"\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c",(0,l.kt)("inlineCode",{parentName:"p"},"clickhouse-server"),"\u4f1a\u5728",(0,l.kt)("inlineCode",{parentName:"p"},"8123"),"\u7aef\u53e3\u4e0a\u76d1\u63a7HTTP\u8bf7\u6c42\uff08\u8fd9\u53ef\u4ee5\u5728\u914d\u7f6e\u4e2d\u4fee\u6539\uff09\u3002"),(0,l.kt)("p",null,"\u5982\u679c\u4f60\u53d1\u9001\u4e86\u4e00\u4e2a\u672a\u643a\u5e26\u4efb\u4f55\u53c2\u6570\u7684",(0,l.kt)("inlineCode",{parentName:"p"},"GET /"),"\u8bf7\u6c42\uff0c\u5b83\u4f1a\u8fd4\u56de\u4e00\u4e2a\u5b57\u7b26\u4e32 \xabOk.\xbb\uff08\u7ed3\u5c3e\u6709\u6362\u884c\uff09\u3002\u53ef\u4ee5\u5c06\u5b83\u7528\u5728\u5065\u5eb7\u68c0\u67e5\u811a\u672c\u4e2d\u3002"),(0,l.kt)("p",null,"\u5982\u679c\u4f60\u53d1\u9001\u4e86\u4e00\u4e2a\u672a\u643a\u5e26\u4efb\u4f55\u53c2\u6570\u7684",(0,l.kt)("inlineCode",{parentName:"p"},"GET /"),"\u8bf7\u6c42\uff0c\u5b83\u8fd4\u56de\u54cd\u5e94\u7801200\u548c",(0,l.kt)("inlineCode",{parentName:"p"},"OK"),"\u5b57\u7b26\u4e32\u5b9a\u4e49\uff0c\u53ef\u5728",(0,l.kt)("a",{parentName:"p",href:"/docs/zh/operations/server-configuration-parameters/settings#server_configuration_parameters-http_server_default_response"},"Http\u670d\u52a1\u54cd\u5e94\u914d\u7f6e"),"\u5b9a\u4e49(\u5728\u672b\u5c3e\u6dfb\u52a0\u6362\u884c)"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"$ curl 'http://localhost:8123/'\nOk.\n")),(0,l.kt)("p",null,"Web UI \u53ef\u4ee5\u901a\u8fc7\u8fd9\u4e2a\u5730\u5740\u8bbf\u95ee: ",(0,l.kt)("inlineCode",{parentName:"p"},"http://localhost:8123/play"),".\n\u5728\u8fd0\u884c\u72b6\u51b5\u68c0\u67e5\u811a\u672c\u4e2d\uff0c\u4f7f\u7528",(0,l.kt)("inlineCode",{parentName:"p"},"GET /ping"),"\u8bf7\u6c42\u3002\u8fd9\u4e2a\u5904\u7406\u65b9\u6cd5\u603b\u662f\u8fd4\u56de \"Ok\"\u3002(\u4ee5\u6362\u884c\u7ed3\u5c3e)\u3002\u53ef\u4ece18.12.13\u7248\u83b7\u5f97\u3002\u8bf7\u53c2\u89c1' /replicas_status '\u68c0\u67e5\u590d\u5236\u96c6\u7684\u5ef6\u8fdf\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"$ curl 'http://localhost:8123/ping'\nOk.\n$ curl 'http://localhost:8123/replicas_status'\nOk.\n")),(0,l.kt)("p",null,"\u901a\u8fc7URL\u4e2d\u7684 ",(0,l.kt)("inlineCode",{parentName:"p"},"query")," \u53c2\u6570\u6765\u53d1\u9001\u8bf7\u6c42\uff0c\u6216\u8005\u53d1\u9001POST\u8bf7\u6c42\uff0c\u6216\u8005\u5c06\u67e5\u8be2\u7684\u5f00\u5934\u90e8\u5206\u653e\u5728URL\u7684",(0,l.kt)("inlineCode",{parentName:"p"},"query"),"\u53c2\u6570\u4e2d\uff0c\u5176\u4ed6\u90e8\u5206\u653e\u5728POST\u4e2d\uff08\u6211\u4eec\u4f1a\u5728\u540e\u9762\u89e3\u91ca\u4e3a\u4ec0\u4e48\u8fd9\u6837\u505a\u662f\u6709\u5fc5\u8981\u7684\uff09\u3002URL\u7684\u5927\u5c0f\u4f1a\u9650\u5236\u572816KB\uff0c\u6240\u4ee5\u53d1\u9001\u5927\u578b\u67e5\u8be2\u65f6\u8981\u65f6\u523b\u8bb0\u4f4f\u8fd9\u70b9\u3002"),(0,l.kt)("p",null,"\u5982\u679c\u8bf7\u6c42\u6210\u529f\uff0c\u5c06\u4f1a\u6536\u5230200\u7684\u54cd\u5e94\u72b6\u6001\u7801\u548c\u54cd\u5e94\u4e3b\u4f53\u4e2d\u7684\u7ed3\u679c\u3002\n\u5982\u679c\u53d1\u751f\u4e86\u67d0\u4e2a\u5f02\u5e38\uff0c\u5c06\u4f1a\u6536\u5230500\u7684\u54cd\u5e94\u72b6\u6001\u7801\u548c\u54cd\u5e94\u4e3b\u4f53\u4e2d\u7684\u5f02\u5e38\u63cf\u8ff0\u4fe1\u606f\u3002"),(0,l.kt)("p",null,"\u5f53\u4f7f\u7528GET\u65b9\u6cd5\u8bf7\u6c42\u65f6\uff0c",(0,l.kt)("inlineCode",{parentName:"p"},"readonly"),"\u4f1a\u88ab\u8bbe\u7f6e\u3002\u6362\u53e5\u8bdd\u8bf4\uff0c\u82e5\u8981\u4f5c\u4fee\u6539\u6570\u636e\u7684\u67e5\u8be2\uff0c\u53ea\u80fd\u53d1\u9001POST\u65b9\u6cd5\u7684\u8bf7\u6c42\u3002\u53ef\u4ee5\u5c06\u67e5\u8be2\u901a\u8fc7POST\u4e3b\u4f53\u53d1\u9001\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7URL\u53c2\u6570\u53d1\u9001\u3002"),(0,l.kt)("p",null,"\u793a\u4f8b:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'$ curl \'http://localhost:8123/?query=SELECT%201\'\n1\n\n$ wget -nv -O- \'http://localhost:8123/?query=SELECT 1\'\n1\n\n$ echo -ne \'GET /?query=SELECT%201 HTTP/1.0\\r\\n\\r\\n\' | nc localhost 8123\nHTTP/1.0 200 OK\nDate: Wed, 27 Nov 2019 10:30:18 GMT\nConnection: Close\nContent-Type: text/tab-separated-values; charset=UTF-8\nX-ClickHouse-Server-Display-Name: clickhouse.ru-central1.internal\nX-ClickHouse-Query-Id: 5abe861c-239c-467f-b955-8a201abb8b7f\nX-ClickHouse-Summary: {"read_rows":"0","read_bytes":"0","written_rows":"0","written_bytes":"0","total_rows_to_read":"0"}\n\n1\n')),(0,l.kt)("p",null,"\u53ef\u4ee5\u770b\u5230\uff0ccurl \u547d\u4ee4\u7531\u4e8e\u7a7a\u683c\u9700\u8981 URL \u8f6c\u4e49\uff0c\u6240\u4ee5\u4e0d\u662f\u5f88\u65b9\u4fbf\u3002\u5c3d\u7ba1 wget \u547d\u4ee4\u5bf9url\u505a\u4e86 URL \u8f6c\u4e49\uff0c\u4f46\u6211\u4eec\u5e76\u4e0d\u63a8\u8350\u4f7f\u7528\u4ed6\uff0c\u56e0\u4e3a\u5728 HTTP 1.1 \u534f\u8bae\u4e0b\u4f7f\u7528 keep-alive \u548c Transfer-Encoding: chunked \u5934\u90e8\u8bbe\u7f6e\u5b83\u5e76\u4e0d\u80fd\u5f88\u597d\u7684\u5de5\u4f5c\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"$ echo 'SELECT 1' | curl 'http://localhost:8123/' --data-binary @-\n1\n\n$ echo 'SELECT 1' | curl 'http://localhost:8123/?query=' --data-binary @-\n1\n\n$ echo '1' | curl 'http://localhost:8123/?query=SELECT' --data-binary @-\n1\n")),(0,l.kt)("p",null,"\u5982\u60a8\u6240\u89c1\uff0ccurl\u6709\u4e9b\u4e0d\u65b9\u4fbf\uff0c\u56e0\u4e3a\u7a7a\u683c\u5fc5\u987b\u8fdb\u884cURL\u8f6c\u4e49\u3002\n\u5c3d\u7ba1wget\u672c\u8eab\u4f1a\u5bf9\u6240\u6709\u5185\u5bb9\u8fdb\u884c\u8f6c\u4e49\uff0c\u4f46\u6211\u4eec\u4e0d\u63a8\u8350\u4f7f\u7528\u5b83\uff0c\u56e0\u4e3a\u5728\u4f7f\u7528keepalive\u548c\u4f20\u8f93\u7f16\u7801chunked\u65f6\uff0c\u5b83\u5728HTTP 1.1\u4e0a\u4e0d\u80fd\u5f88\u597d\u5730\u5de5\u4f5c\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"$ echo 'SELECT 1' | curl 'http://localhost:8123/' --data-binary @-\n1\n\n$ echo 'SELECT 1' | curl 'http://localhost:8123/?query=' --data-binary @-\n1\n\n$ echo '1' | curl 'http://localhost:8123/?query=SELECT' --data-binary @-\n1\n")),(0,l.kt)("p",null,"\u5982\u679c\u90e8\u5206\u67e5\u8be2\u662f\u5728\u53c2\u6570\u4e2d\u53d1\u9001\u7684\uff0c\u90e8\u5206\u662f\u5728POST\u4e2d\u53d1\u9001\u7684\uff0c\u5219\u5728\u8fd9\u4e24\u4e2a\u6570\u636e\u90e8\u5206\u4e4b\u95f4\u63d2\u5165\u6362\u884c\u3002"),(0,l.kt)("p",null,"\u9519\u8bef\u793a\u4f8b\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"$ echo 'ECT 1' | curl 'http://localhost:8123/?query=SEL' --data-binary @-\nCode: 59, e.displayText() = DB::Exception: Syntax error: failed at position 0: SEL\nECT 1\n, expected One of: SHOW TABLES, SHOW DATABASES, SELECT, INSERT, CREATE, ATTACH, RENAME, DROP, DETACH, USE, SET, OPTIMIZE., e.what() = DB::Exception\n")),(0,l.kt)("p",null,"\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u8fd4\u56de\u7684\u6570\u636e\u662f",(0,l.kt)("inlineCode",{parentName:"p"},"TabSeparated"),"\u683c\u5f0f\u7684\uff0c\u66f4\u591a\u4fe1\u606f\uff0c\u89c1",(0,l.kt)("a",{parentName:"p",href:"../interfaces/formats/"},"Formats"),"\u90e8\u5206\u3002"),(0,l.kt)("p",null,"\u60a8\u53ef\u4ee5\u4f7f\u7528\u67e5\u8be2\u7684FORMAT\u5b50\u53e5\u6765\u8bbe\u7f6e\u5176\u4ed6\u683c\u5f0f\u3002"),(0,l.kt)("p",null,"\u53e6\u5916\uff0c\u8fd8\u53ef\u4ee5\u4f7f\u7528",(0,l.kt)("inlineCode",{parentName:"p"},"default_format"),"URL\u53c2\u6570\u6216",(0,l.kt)("inlineCode",{parentName:"p"},"X-ClickHouse-Format"),"\u5934\u6765\u6307\u5b9aTabSeparated\u4e4b\u5916\u7684\u9ed8\u8ba4\u683c\u5f0f\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"$ echo 'SELECT 1 FORMAT Pretty' | curl 'http://localhost:8123/?' --data-binary @-\n\u250f\u2501\u2501\u2501\u2513\n\u2503 1 \u2503\n\u2521\u2501\u2501\u2501\u2529\n\u2502 1 \u2502\n\u2514\u2500\u2500\u2500\u2518\n")),(0,l.kt)("p",null,"INSERT\u5fc5\u987b\u901a\u8fc7POST\u65b9\u6cd5\u6765\u63d2\u5165\u6570\u636e\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u60a8\u53ef\u4ee5\u5728URL\u53c2\u6570\u4e2d\u7f16\u5199\u67e5\u8be2\u7684\u5f00\u59cb\u90e8\u5206\uff0c\u5e76\u4f7f\u7528POST\u4f20\u9012\u8981\u63d2\u5165\u7684\u6570\u636e\u3002\u4f8b\u5982\uff0c\u8981\u63d2\u5165\u7684\u6570\u636e\u53ef\u4ee5\u662f\u6765\u81eaMySQL\u7684\u4e00\u4e2a\u4ee5tab\u5206\u9694\u7684\u5b58\u50a8\u3002\u901a\u8fc7\u8fd9\u79cd\u65b9\u5f0f\uff0cINSERT\u67e5\u8be2\u66ff\u6362\u4e86\u4eceMySQL\u67e5\u8be2\u7684LOAD DATA LOCAL INFILE\u3002"),(0,l.kt)("p",null,"\u793a\u4f8b: \u521b\u5efa\u4e00\u4e2a\u8868:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"$ echo 'CREATE TABLE t (a UInt8) ENGINE = Memory' | curl 'http://localhost:8123/' --data-binary @-\n")),(0,l.kt)("p",null,"\u4f7f\u7528\u7c7b\u4f3cINSERT\u7684\u67e5\u8be2\u6765\u63d2\u5165\u6570\u636e\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"$ echo 'INSERT INTO t VALUES (1),(2),(3)' | curl 'http://localhost:8123/' --data-binary @-\n")),(0,l.kt)("p",null,"\u6570\u636e\u53ef\u4ee5\u4ece\u67e5\u8be2\u4e2d\u5355\u72ec\u53d1\u9001\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"$ echo '(4),(5),(6)' | curl 'http://localhost:8123/?query=INSERT%20INTO%20t%20VALUES' --data-binary @-\n")),(0,l.kt)("p",null,"\u60a8\u53ef\u4ee5\u6307\u5b9a\u4efb\u4f55\u6570\u636e\u683c\u5f0f\u3002",(0,l.kt)("inlineCode",{parentName:"p"},"Values"),"\u683c\u5f0f\u4e0e\u5c06INSERT\u5199\u5165",(0,l.kt)("inlineCode",{parentName:"p"},"t"),"\u503c\u65f6\u4f7f\u7528\u7684\u683c\u5f0f\u76f8\u540c:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"$ echo '(7),(8),(9)' | curl 'http://localhost:8123/?query=INSERT%20INTO%20t%20FORMAT%20Values' --data-binary @-\n")),(0,l.kt)("p",null,"\u82e5\u8981\u63d2\u5165tab\u5206\u5272\u7684\u6570\u636e\uff0c\u9700\u8981\u6307\u5b9a\u5bf9\u5e94\u7684\u683c\u5f0f\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"$ echo -ne '10\\n11\\n12\\n' | curl 'http://localhost:8123/?query=INSERT%20INTO%20t%20FORMAT%20TabSeparated' --data-binary @-\n")),(0,l.kt)("p",null,"\u4ece\u8868\u4e2d\u8bfb\u53d6\u5185\u5bb9\u3002\u7531\u4e8e\u67e5\u8be2\u5904\u7406\u662f\u5e76\u884c\u7684\uff0c\u6570\u636e\u4ee5\u968f\u673a\u987a\u5e8f\u8f93\u51fa\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"$ curl 'http://localhost:8123/?query=SELECT%20a%20FROM%20t'\n7\n8\n9\n10\n11\n12\n1\n2\n3\n4\n5\n6\n")),(0,l.kt)("p",null,"\u5220\u9664\u8868\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"$ echo 'DROP TABLE t' | curl 'http://localhost:8123/' --data-binary @-\n")),(0,l.kt)("p",null,"\u6210\u529f\u8bf7\u6c42\u540e\u5e76\u4e0d\u4f1a\u8fd4\u56de\u6570\u636e\uff0c\u8fd4\u56de\u4e00\u4e2a\u7a7a\u7684\u54cd\u5e94\u4f53\u3002"),(0,l.kt)("p",null,"\u5728\u4f20\u8f93\u6570\u636e\u65f6\uff0c\u53ef\u4ee5\u4f7f\u7528ClickHouse\u5185\u90e8\u538b\u7f29\u683c\u5f0f\u3002\u538b\u7f29\u7684\u6570\u636e\u5177\u6709\u975e\u6807\u51c6\u683c\u5f0f\uff0c\u60a8\u9700\u8981\u4f7f\u7528\u7279\u6b8a\u7684",(0,l.kt)("inlineCode",{parentName:"p"},"clickhouse-compressor"),"\u7a0b\u5e8f\u6765\u5904\u7406\u5b83(\u5b83\u662f\u4e0e",(0,l.kt)("inlineCode",{parentName:"p"},"clickhouse-client"),"\u5305\u4e00\u8d77\u5b89\u88c5\u7684)\u3002\u4e3a\u4e86\u63d0\u9ad8\u6570\u636e\u63d2\u5165\u7684\u6548\u7387\uff0c\u60a8\u53ef\u4ee5\u901a\u8fc7\u4f7f\u7528",(0,l.kt)("a",{parentName:"p",href:"/docs/zh/operations/settings/settings#settings-http_native_compression_disable_checksumming_on_decompress"},"http_native_compression_disable_checksumming_on_decompress"),"\u8bbe\u7f6e\u7981\u7528\u670d\u52a1\u5668\u7aef\u6821\u9a8c\u3002"),(0,l.kt)("p",null,"\u5982\u679c\u5728URL\u4e2d\u6307\u5b9a\u4e86",(0,l.kt)("inlineCode",{parentName:"p"},"compress=1"),"\uff0c\u670d\u52a1\u4f1a\u8fd4\u56de\u538b\u7f29\u7684\u6570\u636e\u3002\n\u5982\u679c\u5728URL\u4e2d\u6307\u5b9a\u4e86",(0,l.kt)("inlineCode",{parentName:"p"},"decompress=1"),"\uff0c\u670d\u52a1\u4f1a\u89e3\u538b\u901a\u8fc7POST\u65b9\u6cd5\u53d1\u9001\u7684\u6570\u636e\u3002"),(0,l.kt)("p",null,"\u60a8\u4e5f\u53ef\u4ee5\u9009\u62e9\u4f7f\u7528",(0,l.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/HTTP_compression"},"HTTP compression"),"\u3002\u53d1\u9001\u4e00\u4e2a\u538b\u7f29\u7684POST\u8bf7\u6c42\uff0c\u9644\u52a0\u8bf7\u6c42\u5934",(0,l.kt)("inlineCode",{parentName:"p"},"Content-Encoding: compression_method"),"\u3002\u4e3a\u4e86\u4f7fClickHouse\u54cd\u5e94\uff0c\u60a8\u5fc5\u987b\u9644\u52a0",(0,l.kt)("inlineCode",{parentName:"p"},"Accept-Encoding: compression_method"),"\u3002ClickHouse\u652f\u6301",(0,l.kt)("inlineCode",{parentName:"p"},"gzip"),"\uff0c",(0,l.kt)("inlineCode",{parentName:"p"},"br"),"\u548c",(0,l.kt)("inlineCode",{parentName:"p"},"deflate")," ",(0,l.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/HTTP_compression#Content-Encoding_tokens"},"compression methods"),"\u3002\u8981\u542f\u7528HTTP\u538b\u7f29\uff0c\u5fc5\u987b\u4f7f\u7528ClickHouse",(0,l.kt)("a",{parentName:"p",href:"/docs/zh/operations/settings/settings#settings-enable_http_compression"},"\u542f\u7528Http\u538b\u7f29"),"\u914d\u7f6e\u3002\u60a8\u53ef\u4ee5\u5728",(0,l.kt)("a",{parentName:"p",href:"#settings-http_zlib_compression_level"},"Http zlib\u538b\u7f29\u7ea7\u522b"),"\u8bbe\u7f6e\u4e2d\u4e3a\u6240\u6709\u538b\u7f29\u65b9\u6cd5\u914d\u7f6e\u6570\u636e\u538b\u7f29\u7ea7\u522b\u3002"),(0,l.kt)("p",null,"\u60a8\u53ef\u4ee5\u4f7f\u7528\u5b83\u5728\u4f20\u8f93\u5927\u91cf\u6570\u636e\u65f6\u51cf\u5c11\u7f51\u7edc\u6d41\u91cf\uff0c\u6216\u8005\u521b\u5efa\u7acb\u5373\u538b\u7f29\u7684\u8f6c\u50a8\u3002"),(0,l.kt)("p",null,"\u901a\u8fc7\u538b\u7f29\u53d1\u9001\u6570\u636e\u7684\u4f8b\u5b50:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"#Sending data to the server:\n$ curl -vsS \"http://localhost:8123/?enable_http_compression=1\" -d 'SELECT number FROM system.numbers LIMIT 10' -H 'Accept-Encoding: gzip'\n\n#Sending data to the client:\n$ echo \"SELECT 1\" | gzip -c | curl -sS --data-binary @- -H 'Content-Encoding: gzip' 'http://localhost:8123/'\n")),(0,l.kt)("p",null,'!!! note "\u8b66\u544a"\n\u4e00\u4e9bHTTP\u5ba2\u6237\u7aef\u53ef\u80fd\u4f1a\u5728\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u4ece\u670d\u52a1\u5668\u89e3\u538b\u6570\u636e(\u4f7f\u7528',(0,l.kt)("inlineCode",{parentName:"p"},"gzip"),"\u548c",(0,l.kt)("inlineCode",{parentName:"p"},"deflate"),")\uff0c\u5373\u4f7f\u60a8\u672a\u6b63\u786e\u5730\u4f7f\u7528\u4e86\u538b\u7f29\u8bbe\u7f6e\uff0c\u60a8\u4e5f\u53ef\u80fd\u4f1a\u5f97\u5230\u89e3\u538b\u6570\u636e\u3002"),(0,l.kt)("p",null,"\u60a8\u53ef\u4ee5\u4f7f\u7528",(0,l.kt)("inlineCode",{parentName:"p"},"database"),"URL\u53c2\u6570\u6216",(0,l.kt)("inlineCode",{parentName:"p"},"X-ClickHouse-Database"),"\u5934\u6765\u6307\u5b9a\u9ed8\u8ba4\u6570\u636e\u5e93\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"$ echo 'SELECT number FROM numbers LIMIT 10' | curl 'http://localhost:8123/?database=system' --data-binary @-\n0\n1\n2\n3\n4\n5\n6\n7\n8\n9\n")),(0,l.kt)("p",null,"\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5728\u670d\u52a1\u5668\u8bbe\u7f6e\u4e2d\u6ce8\u518c\u7684\u6570\u636e\u5e93\u88ab\u7528\u4f5c\u9ed8\u8ba4\u6570\u636e\u5e93\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5b83\u662f\u540d\u4e3a",(0,l.kt)("inlineCode",{parentName:"p"},"default"),"\u7684\u6570\u636e\u5e93\u3002\u6216\u8005\uff0c\u60a8\u53ef\u4ee5\u59cb\u7ec8\u5728\u8868\u540d\u4e4b\u524d\u4f7f\u7528\u70b9\u6765\u6307\u5b9a\u6570\u636e\u5e93\u3002"),(0,l.kt)("p",null,"\u7528\u6237\u540d\u548c\u5bc6\u7801\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u4e09\u79cd\u65b9\u5f0f\u6307\u5b9a\uff1a"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"\u901a\u8fc7HTTP Basic Authentication\u3002\u793a\u4f8b\uff1a")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"$ echo 'SELECT 1' | curl 'http://user:password@localhost:8123/' -d @-\n")),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"\u901a\u8fc7URL\u53c2\u6570\u4e2d\u7684",(0,l.kt)("inlineCode",{parentName:"li"},"user"),"\u548c",(0,l.kt)("inlineCode",{parentName:"li"},"password"),"\u3002\u793a\u4f8b\uff1a")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"$ echo 'SELECT 1' | curl 'http://localhost:8123/?user=user&password=password' -d @-\n")),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"\u4f7f\u7528",(0,l.kt)("inlineCode",{parentName:"li"},"X-ClickHouse-User"),"\u6216",(0,l.kt)("inlineCode",{parentName:"li"},"X-ClickHouse-Key"),"\u5934\u6307\u5b9a\uff0c\u793a\u4f8b:")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"$ echo 'SELECT 1' | curl -H 'X-ClickHouse-User: user' -H 'X-ClickHouse-Key: password' 'http://localhost:8123/' -d @-\n")),(0,l.kt)("p",null,"\u5982\u679c\u672a\u6307\u5b9a\u7528\u6237\u540d\uff0c\u5219\u4f7f\u7528",(0,l.kt)("inlineCode",{parentName:"p"},"default"),"\u3002\u5982\u679c\u672a\u6307\u5b9a\u5bc6\u7801\uff0c\u5219\u4f7f\u7528\u7a7a\u5bc6\u7801\u3002\n\u60a8\u8fd8\u53ef\u4ee5\u4f7f\u7528URL\u53c2\u6570\u6765\u6307\u5b9a\u5904\u7406\u5355\u4e2a\u67e5\u8be2\u6216\u6574\u4e2a\u8bbe\u7f6e\u914d\u7f6e\u6587\u4ef6\u7684\u4efb\u4f55\u8bbe\u7f6e\u3002\u4f8b\u5b50:",(0,l.kt)("inlineCode",{parentName:"p"},"http://localhost:8123/?profile=web&max_rows_to_read=1000000000&query=SELECT+1")),(0,l.kt)("p",null,"\u66f4\u591a\u4fe1\u606f\uff0c\u8be6\u89c1",(0,l.kt)("a",{parentName:"p",href:"/docs/zh/operations/settings/#settings"},"\u8bbe\u7f6e"),"\u90e8\u5206\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"$ echo 'SELECT number FROM system.numbers LIMIT 10' | curl 'http://localhost:8123/?' --data-binary @-\n0\n1\n2\n3\n4\n5\n6\n7\n8\n9\n")),(0,l.kt)("p",null,"\u6709\u5173\u5176\u4ed6\u53c2\u6570\u7684\u4fe1\u606f\uff0c\u8bf7\u53c2\u8003",(0,l.kt)("inlineCode",{parentName:"p"},"SET"),"\u4e00\u8282\u3002"),(0,l.kt)("p",null,"\u7c7b\u4f3c\u5730\uff0c\u60a8\u53ef\u4ee5\u5728HTTP\u534f\u8bae\u4e2d\u4f7f\u7528ClickHouse\u4f1a\u8bdd\u3002\u4e3a\u6b64\uff0c\u9700\u8981\u5411\u8bf7\u6c42\u6dfb\u52a0",(0,l.kt)("inlineCode",{parentName:"p"},"session_id"),"GET\u53c2\u6570\u3002\u60a8\u53ef\u4ee5\u4f7f\u7528\u4efb\u4f55\u5b57\u7b26\u4e32\u4f5c\u4e3a\u4f1a\u8bddID\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u4f1a\u8bdd\u572860\u79d2\u4e0d\u6d3b\u52a8\u540e\u7ec8\u6b62\u3002\u8981\u66f4\u6539\u6b64\u8d85\u65f6\u914d\u7f6e\uff0c\u8bf7\u4fee\u6539\u670d\u52a1\u5668\u914d\u7f6e\u4e2d\u7684",(0,l.kt)("inlineCode",{parentName:"p"},"default_session_timeout"),"\u8bbe\u7f6e\uff0c\u6216\u5411\u8bf7\u6c42\u6dfb\u52a0",(0,l.kt)("inlineCode",{parentName:"p"},"session_timeout"),"GET\u53c2\u6570\u3002\u8981\u68c0\u67e5\u4f1a\u8bdd\u72b6\u6001\uff0c\u4f7f\u7528",(0,l.kt)("inlineCode",{parentName:"p"},"session_check=1"),"\u53c2\u6570\u3002\u4e00\u6b21\u53ea\u80fd\u5728\u5355\u4e2a\u4f1a\u8bdd\u4e2d\u6267\u884c\u4e00\u4e2a\u67e5\u8be2\u3002"),(0,l.kt)("p",null,"\u60a8\u53ef\u4ee5\u5728",(0,l.kt)("inlineCode",{parentName:"p"},"X-ClickHouse-Progress"),"\u54cd\u5e94\u5934\u4e2d\u6536\u5230\u67e5\u8be2\u8fdb\u5ea6\u7684\u4fe1\u606f\u3002\u4e3a\u6b64\uff0c\u542f\u7528",(0,l.kt)("a",{parentName:"p",href:"/docs/zh/operations/settings/settings#settings-send_progress_in_http_headers"},"Http Header\u643a\u5e26\u8fdb\u5ea6"),"\u3002\u793a\u4f8b\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},'X-ClickHouse-Progress: {"read_rows":"2752512","read_bytes":"240570816","total_rows_to_read":"8880128"}\nX-ClickHouse-Progress: {"read_rows":"5439488","read_bytes":"482285394","total_rows_to_read":"8880128"}\nX-ClickHouse-Progress: {"read_rows":"8783786","read_bytes":"819092887","total_rows_to_read":"8880128"}\n')),(0,l.kt)("p",null,"\u663e\u793a\u5b57\u6bb5\u4fe1\u606f:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"read_rows")," \u2014 \u8bfb\u53d6\u7684\u884c\u6570\u3002"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"read_bytes")," \u2014 \u8bfb\u53d6\u7684\u6570\u636e\u5b57\u8282\u6570\u3002"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"total_rows_to_read")," \u2014 \u8bfb\u53d6\u7684\u6570\u636e\u603b\u884c\u6570\u3002"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"written_rows")," \u2014 \u5199\u5165\u6570\u636e\u884c\u6570\u3002"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"written_bytes")," \u2014 \u5199\u5165\u6570\u636e\u5b57\u8282\u6570\u3002")),(0,l.kt)("p",null,"\u5982\u679cHTTP\u8fde\u63a5\u4e22\u5931\uff0c\u8fd0\u884c\u7684\u8bf7\u6c42\u4e0d\u4f1a\u81ea\u52a8\u505c\u6b62\u3002\u89e3\u6790\u548c\u6570\u636e\u683c\u5f0f\u5316\u662f\u5728\u670d\u52a1\u5668\u7aef\u6267\u884c\u7684\uff0c\u4f7f\u7528Http\u8fde\u63a5\u53ef\u80fd\u65e0\u6548\u3002"),(0,l.kt)("p",null,"\u53ef\u9009\u7684",(0,l.kt)("inlineCode",{parentName:"p"},"query_id"),"\u53c2\u6570\u53ef\u80fd\u5f53\u505aquery ID\u4f20\u5165\uff08\u6216\u8005\u4efb\u4f55\u5b57\u7b26\u4e32\uff09\u3002\u66f4\u591a\u4fe1\u606f\uff0c\u8be6\u89c1",(0,l.kt)("a",{parentName:"p",href:"/docs/zh/operations/settings/settings"},"replace_running_query"),"\u90e8\u5206\u3002"),(0,l.kt)("p",null,"\u53ef\u9009\u7684",(0,l.kt)("inlineCode",{parentName:"p"},"quota_key"),"\u53c2\u6570\u53ef\u80fd\u5f53\u505aquota key\u4f20\u5165\uff08\u6216\u8005\u4efb\u4f55\u5b57\u7b26\u4e32\uff09\u3002\u66f4\u591a\u4fe1\u606f\uff0c\u8be6\u89c1",(0,l.kt)("a",{parentName:"p",href:"/docs/zh/operations/quotas#quotas"},"Quotas"),"\u90e8\u5206\u3002"),(0,l.kt)("p",null,"HTTP\u63a5\u53e3\u5141\u8bb8\u4f20\u5165\u989d\u5916\u7684\u6570\u636e\uff08\u5916\u90e8\u4e34\u65f6\u8868\uff09\u6765\u67e5\u8be2\u3002\u66f4\u591a\u4fe1\u606f\uff0c\u8be6\u89c1",(0,l.kt)("a",{parentName:"p",href:"/docs/zh/engines/table-engines/special/external-data"},"\u5916\u90e8\u6570\u636e\u67e5\u8be2\u5904\u7406"),"\u90e8\u5206\u3002"),(0,l.kt)("h2",{id:"response-buffering"},"\u54cd\u5e94\u7f13\u51b2"),(0,l.kt)("p",null,"\u53ef\u4ee5\u5728\u670d\u52a1\u5668\u7aef\u542f\u7528\u54cd\u5e94\u7f13\u51b2\u3002\u63d0\u4f9b\u4e86",(0,l.kt)("inlineCode",{parentName:"p"},"buffer_size"),"\u548c",(0,l.kt)("inlineCode",{parentName:"p"},"wait_end_of_query"),"\u4e24\u4e2aURL\u53c2\u6570\u6765\u8fbe\u6b64\u76ee\u7684\u3002"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"buffer_size"),"\u51b3\u5b9a\u4e86\u67e5\u8be2\u7ed3\u679c\u8981\u5728\u670d\u52a1\u5185\u5b58\u4e2d\u7f13\u51b2\u591a\u5c11\u4e2a\u5b57\u8282\u6570\u636e. \u5982\u679c\u54cd\u5e94\u4f53\u6bd4\u8fd9\u4e2a\u9608\u503c\u5927\uff0c\u7f13\u51b2\u533a\u4f1a\u5199\u5165\u5230HTTP\u7ba1\u9053\uff0c\u5269\u4e0b\u7684\u6570\u636e\u4e5f\u76f4\u63a5\u53d1\u5230HTTP\u7ba1\u9053\u4e2d\u3002"),(0,l.kt)("p",null,"\u4e3a\u4e86\u786e\u4fdd\u6574\u4e2a\u54cd\u5e94\u4f53\u88ab\u7f13\u51b2\uff0c\u53ef\u4ee5\u8bbe\u7f6e",(0,l.kt)("inlineCode",{parentName:"p"},"wait_end_of_query=1"),"\u3002\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u5b58\u5165\u5185\u5b58\u7684\u6570\u636e\u4f1a\u88ab\u7f13\u51b2\u5230\u670d\u52a1\u7aef\u7684\u4e00\u4e2a\u4e34\u65f6\u6587\u4ef6\u4e2d\u3002"),(0,l.kt)("p",null,"\u793a\u4f8b:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"$ curl -sS 'http://localhost:8123/?max_result_bytes=4000000&buffer_size=3000000&wait_end_of_query=1' -d 'SELECT toUInt8(number) FROM system.numbers LIMIT 9000000 FORMAT RowBinary'\n")),(0,l.kt)("p",null,"\u67e5\u8be2\u8bf7\u6c42\u54cd\u5e94\u72b6\u6001\u7801\u548cHTTP\u5934\u88ab\u53d1\u9001\u5230\u5ba2\u6237\u7aef\u540e\uff0c\u82e5\u53d1\u751f\u67e5\u8be2\u5904\u7406\u51fa\u9519\uff0c\u4f7f\u7528\u7f13\u51b2\u533a\u53ef\u4ee5\u907f\u514d\u8fd9\u79cd\u60c5\u51b5\u7684\u53d1\u751f\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u54cd\u5e94\u4e3b\u4f53\u7684\u7ed3\u5c3e\u4f1a\u5199\u5165\u4e00\u6761\u9519\u8bef\u6d88\u606f\uff0c\u800c\u5728\u5ba2\u6237\u7aef\uff0c\u53ea\u80fd\u5728\u89e3\u6790\u9636\u6bb5\u68c0\u6d4b\u5230\u8be5\u9519\u8bef\u3002"),(0,l.kt)("h3",{id:"cli-queries-with-parameters"},"\u67e5\u8be2\u53c2\u6570"),(0,l.kt)("p",null,"\u60a8\u53ef\u4ee5\u4f7f\u7528\u53c2\u6570\u521b\u5efa\u67e5\u8be2\uff0c\u5e76\u901a\u8fc7\u76f8\u5e94\u7684HTTP\u8bf7\u6c42\u53c2\u6570\u4e3a\u5b83\u4eec\u4f20\u9012\u503c\u3002\u6709\u5173\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1",(0,l.kt)("a",{parentName:"p",href:"/docs/zh/interfaces/cli#cli-queries-with-parameters"},"CLI\u67e5\u8be2\u53c2\u6570"),"\u3002"),(0,l.kt)("h3",{id:"example"},"\u793a\u4f8b"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'$ curl -sS "<address>?param_id=2&param_phrase=test" -d "SELECT * FROM table WHERE int_column = {id:UInt8} and string_column = {phrase:String}"\n')),(0,l.kt)("h2",{id:"predefined_http_interface"},"\u7279\u5b9a\u7684HTTP\u63a5\u53e3"),(0,l.kt)("p",null,"ClickHouse\u901a\u8fc7HTTP\u63a5\u53e3\u652f\u6301\u7279\u5b9a\u7684\u67e5\u8be2\u3002\u4f8b\u5982\uff0c\u60a8\u53ef\u4ee5\u5982\u4e0b\u6240\u793a\u5411\u8868\u5199\u5165\u6570\u636e:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"$ echo '(4),(5),(6)' | curl 'http://localhost:8123/?query=INSERT%20INTO%20t%20VALUES' --data-binary @-\n")),(0,l.kt)("p",null,"ClickHouse\u8fd8\u652f\u6301\u9884\u5b9a\u4e49\u7684HTTP\u63a5\u53e3\uff0c\u53ef\u4ee5\u5e2e\u52a9\u60a8\u66f4\u5bb9\u6613\u4e0e\u7b2c\u4e09\u65b9\u5de5\u5177\u96c6\u6210\uff0c\u5982",(0,l.kt)("a",{parentName:"p",href:"https://github.com/percona-lab/clickhouse_exporter"},"Prometheus Exporter"),"."),(0,l.kt)("p",null,"\u793a\u4f8b:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u9996\u5148\uff0c\u5c06\u6b64\u90e8\u5206\u6dfb\u52a0\u5230\u670d\u52a1\u5668\u914d\u7f6e\u6587\u4ef6\u4e2d:")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-xml"},"<http_handlers>\n    <rule>\n        <url>/predefined_query</url>\n        <methods>POST,GET</methods>\n        <handler>\n            <type>predefined_query_handler</type>\n            <query>SELECT * FROM system.metrics LIMIT 5 FORMAT Template SETTINGS format_template_resultset = 'prometheus_template_output_format_resultset', format_template_row = 'prometheus_template_output_format_row', format_template_rows_between_delimiter = '\\n'</query>\n        </handler>\n    </rule>\n    <rule>...</rule>\n    <rule>...</rule>\n</http_handlers>\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u8bf7\u6c42Prometheus\u683c\u5f0f\u7684URL\u4ee5\u83b7\u53d6\u6570\u636e:")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'$ curl -v \'http://localhost:8123/predefined_query\'\n*   Trying ::1...\n* Connected to localhost (::1) port 8123 (#0)\n> GET /predefined_query HTTP/1.1\n> Host: localhost:8123\n> User-Agent: curl/7.47.0\n> Accept: */*\n>\n< HTTP/1.1 200 OK\n< Date: Tue, 28 Apr 2020 08:52:56 GMT\n< Connection: Keep-Alive\n< Content-Type: text/plain; charset=UTF-8\n< X-ClickHouse-Server-Display-Name: i-mloy5trc\n< Transfer-Encoding: chunked\n< X-ClickHouse-Query-Id: 96fe0052-01e6-43ce-b12a-6b7370de6e8a\n< X-ClickHouse-Format: Template\n< X-ClickHouse-Timezone: Asia/Shanghai\n< Keep-Alive: timeout=3\n< X-ClickHouse-Summary: {"read_rows":"0","read_bytes":"0","written_rows":"0","written_bytes":"0","total_rows_to_read":"0"}\n<\n# HELP "Query" "Number of executing queries"\n# TYPE "Query" counter\n"Query" 1\n\n# HELP "Merge" "Number of executing background merges"\n# TYPE "Merge" counter\n"Merge" 0\n\n# HELP "PartMutation" "Number of mutations (ALTER DELETE/UPDATE)"\n# TYPE "PartMutation" counter\n"PartMutation" 0\n\n# HELP "ReplicatedFetch" "Number of data parts being fetched from replica"\n# TYPE "ReplicatedFetch" counter\n"ReplicatedFetch" 0\n\n# HELP "ReplicatedSend" "Number of data parts being sent to replicas"\n# TYPE "ReplicatedSend" counter\n"ReplicatedSend" 0\n\n* Connection #0 to host localhost left intact\n\n* Connection #0 to host localhost left intact\n')),(0,l.kt)("p",null,"\u6b63\u5982\u60a8\u4ece\u793a\u4f8b\u4e2d\u770b\u5230\u7684\uff0c\u5982\u679c\u5728",(0,l.kt)("inlineCode",{parentName:"p"},"config.xml"),"\u6587\u4ef6\u4e2d\u914d\u7f6e\u4e86",(0,l.kt)("inlineCode",{parentName:"p"},"http_handlers"),"\uff0c\u5e76\u4e14",(0,l.kt)("inlineCode",{parentName:"p"},"http_handlers"),"\u53ef\u4ee5\u5305\u542b\u8bb8\u591a",(0,l.kt)("inlineCode",{parentName:"p"},"\u89c4\u5219"),"\u3002ClickHouse\u5c06\u628a\u63a5\u6536\u5230\u7684HTTP\u8bf7\u6c42\u4e0e",(0,l.kt)("inlineCode",{parentName:"p"},"rule"),"\u4e2d\u7684\u9884\u5b9a\u4e49\u7c7b\u578b\u8fdb\u884c\u5339\u914d\uff0c\u7b2c\u4e00\u4e2a\u5339\u914d\u7684\u5c06\u8fd0\u884c\u5904\u7406\u7a0b\u5e8f\u3002\u5982\u679c\u5339\u914d\u6210\u529f\uff0cClickHouse\u5c06\u6267\u884c\u76f8\u5e94\u7684\u9884\u5b9a\u4e49\u67e5\u8be2\u3002"),(0,l.kt)("p",null,"\u73b0\u5728",(0,l.kt)("inlineCode",{parentName:"p"},"rule"),"\u53ef\u4ee5\u914d\u7f6e",(0,l.kt)("inlineCode",{parentName:"p"},"method"),"\uff0c ",(0,l.kt)("inlineCode",{parentName:"p"},"header"),"\uff0c ",(0,l.kt)("inlineCode",{parentName:"p"},"url"),"\uff0c ",(0,l.kt)("inlineCode",{parentName:"p"},"handler"),":"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"p"},"method")," \u8d1f\u8d23\u5339\u914dHTTP\u8bf7\u6c42\u7684\u65b9\u6cd5\u90e8\u5206\u3002 ",(0,l.kt)("inlineCode",{parentName:"p"},"method"),"\u5b8c\u5168\u7b26\u5408HTTP\u534f\u8bae\u4e2d",(0,l.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods"},"method"),"\u7684\u5b9a\u4e49\u3002\u8fd9\u662f\u4e00\u4e2a\u53ef\u9009\u7684\u914d\u7f6e\u3002\u5982\u679c\u5b83\u6ca1\u6709\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u5b9a\u4e49\uff0c\u90a3\u4e48\u5b83\u4e0eHTTP\u8bf7\u6c42\u7684\u65b9\u6cd5\u90e8\u5206\u4e0d\u5339\u914d\u3002")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"p"},"url")," \u8d1f\u8d23\u5339\u914dHTTP\u8bf7\u6c42\u7684URL\u90e8\u5206\u3002\u5b83\u5339\u914d",(0,l.kt)("a",{parentName:"p",href:"https://github.com/google/re2"},"RE2"),"\u6b63\u5219\u8868\u8fbe\u5f0f\u3002\u8fd9\u662f\u4e00\u4e2a\u53ef\u9009\u7684\u914d\u7f6e\u3002\u5982\u679c\u914d\u7f6e\u6587\u4ef6\u4e2d\u6ca1\u6709\u5b9a\u4e49\u5b83\uff0c\u5219\u5b83\u4e0eHTTP\u8bf7\u6c42\u7684URL\u90e8\u5206\u4e0d\u5339\u914d\u3002")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"p"},"headers")," \u8d1f\u8d23\u5339\u914dHTTP\u8bf7\u6c42\u7684\u5934\u90e8\u5206\u3002\u5b83\u4e0eRE2\u7684\u6b63\u5219\u8868\u8fbe\u5f0f\u517c\u5bb9\u3002\u8fd9\u662f\u4e00\u4e2a\u53ef\u9009\u7684\u914d\u7f6e\u3002\u5982\u679c\u5b83\u6ca1\u6709\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u5b9a\u4e49\uff0c\u90a3\u4e48\u5b83\u4e0eHTTP\u8bf7\u6c42\u7684\u5934\u90e8\u5206\u4e0d\u5339\u914d\u3002")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"p"},"handler")," \u5305\u542b\u4e3b\u8981\u7684\u5904\u7406\u90e8\u5206\u3002\u73b0\u5728",(0,l.kt)("inlineCode",{parentName:"p"},"handler"),"\u53ef\u4ee5\u914d\u7f6e",(0,l.kt)("inlineCode",{parentName:"p"},"type"),", ",(0,l.kt)("inlineCode",{parentName:"p"},"status"),", ",(0,l.kt)("inlineCode",{parentName:"p"},"content_type"),", ",(0,l.kt)("inlineCode",{parentName:"p"},"response_content"),", ",(0,l.kt)("inlineCode",{parentName:"p"},"query"),", ",(0,l.kt)("inlineCode",{parentName:"p"},"query_param_name"),"\u3002\n",(0,l.kt)("inlineCode",{parentName:"p"},"type")," \u76ee\u524d\u652f\u6301\u4e09\u79cd\u7c7b\u578b:",(0,l.kt)("a",{parentName:"p",href:"#predefined_query_handler"},"\u7279\u5b9a\u67e5\u8be2"),", ",(0,l.kt)("a",{parentName:"p",href:"#dynamic_query_handler"},"\u52a8\u6001\u67e5\u8be2"),", ",(0,l.kt)("a",{parentName:"p",href:"#static"},"static"),"."),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"p"},"query")," \u2014 \u4f7f\u7528",(0,l.kt)("inlineCode",{parentName:"p"},"predefined_query_handler"),"\u7c7b\u578b\uff0c\u5728\u8c03\u7528\u5904\u7406\u7a0b\u5e8f\u65f6\u6267\u884c\u67e5\u8be2\u3002")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"p"},"query_param_name")," \u2014 \u4e0e",(0,l.kt)("inlineCode",{parentName:"p"},"dynamic_query_handler"),"\u7c7b\u578b\u4e00\u8d77\u4f7f\u7528\uff0c\u63d0\u53d6\u5e76\u6267\u884cHTTP\u8bf7\u6c42\u53c2\u6570\u4e2d\u4e0e",(0,l.kt)("inlineCode",{parentName:"p"},"query_param_name"),"\u503c\u5bf9\u5e94\u7684\u503c\u3002")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"p"},"status")," \u2014 \u4e0e",(0,l.kt)("inlineCode",{parentName:"p"},"static"),"\u7c7b\u578b\u4e00\u8d77\u4f7f\u7528\uff0c\u54cd\u5e94\u72b6\u6001\u4ee3\u7801\u3002")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"p"},"content_type")," \u2014 \u4e0e",(0,l.kt)("inlineCode",{parentName:"p"},"static"),"\u7c7b\u578b\u4e00\u8d77\u4f7f\u7528\uff0c\u54cd\u5e94\u4fe1\u606f",(0,l.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Type"},"content-type"),"\u3002")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"p"},"response_content")," \u2014 \u4e0e",(0,l.kt)("inlineCode",{parentName:"p"},"static"),"\u7c7b\u578b\u4e00\u8d77\u4f7f\u7528\uff0c\u54cd\u5e94\u53d1\u9001\u7ed9\u5ba2\u6237\u7aef\u7684\u5185\u5bb9\uff0c\u5f53\u4f7f\u7528\u524d\u7f00",(0,l.kt)("inlineCode",{parentName:"p"},"file://"),"\u6216",(0,l.kt)("inlineCode",{parentName:"p"},"config://"),"\u65f6\uff0c\u4ece\u53d1\u9001\u7ed9\u5ba2\u6237\u7aef\u7684\u6587\u4ef6\u6216\u914d\u7f6e\u4e2d\u67e5\u627e\u5185\u5bb9\u3002"))))),(0,l.kt)("p",null,"\u63a5\u4e0b\u6765\u662f\u4e0d\u540c",(0,l.kt)("inlineCode",{parentName:"p"},"type"),"\u7684\u914d\u7f6e\u65b9\u6cd5\u3002"),(0,l.kt)("h3",{id:"predefined_query_handler"},"\u7279\u5b9a\u67e5\u8be2"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"predefined_query_handler")," \u652f\u6301\u8bbe\u7f6e",(0,l.kt)("inlineCode",{parentName:"p"},"Settings"),"\u548c",(0,l.kt)("inlineCode",{parentName:"p"},"query_params"),"\u53c2\u6570\u3002\u60a8\u53ef\u4ee5\u5c06",(0,l.kt)("inlineCode",{parentName:"p"},"query"),"\u914d\u7f6e\u4e3a",(0,l.kt)("inlineCode",{parentName:"p"},"predefined_query_handler"),"\u7c7b\u578b\u3002"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"query")," \u662f\u4e00\u4e2a\u9884\u5b9a\u4e49\u7684",(0,l.kt)("inlineCode",{parentName:"p"},"predefined_query_handler"),"\u67e5\u8be2\uff0c\u5b83\u7531ClickHouse\u5728\u5339\u914dHTTP\u8bf7\u6c42\u5e76\u8fd4\u56de\u67e5\u8be2\u7ed3\u679c\u65f6\u6267\u884c\u3002\u8fd9\u662f\u4e00\u4e2a\u5fc5\u987b\u7684\u914d\u7f6e\u3002"),(0,l.kt)("p",null,"\u4ee5\u4e0b\u662f\u5b9a\u4e49\u7684",(0,l.kt)("a",{parentName:"p",href:"/docs/zh/operations/settings/settings#settings-max_threads"},"max_threads"),"\u548c",(0,l.kt)("inlineCode",{parentName:"p"},"max_final_threads"),"\u8bbe\u7f6e\uff0c \u7136\u540e\u67e5\u8be2\u7cfb\u7edf\u8868\u4ee5\u68c0\u67e5\u8fd9\u4e9b\u8bbe\u7f6e\u662f\u5426\u8bbe\u7f6e\u6210\u529f\u3002"),(0,l.kt)("p",null,"\u793a\u4f8b:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-xml"},"<http_handlers>\n    <rule>\n        <url><![CDATA[/query_param_with_url/\\w+/(?P<name_1>[^/]+)(/(?P<name_2>[^/]+))?]]></url>\n        <method>GET</method>\n        <headers>\n            <XXX>TEST_HEADER_VALUE</XXX>\n            <PARAMS_XXX><![CDATA[(?P<name_1>[^/]+)(/(?P<name_2>[^/]+))?]]></PARAMS_XXX>\n        </headers>\n        <handler>\n            <type>predefined_query_handler</type>\n            <query>SELECT value FROM system.settings WHERE name = {name_1:String}</query>\n            <query>SELECT name, value FROM system.settings WHERE name = {name_2:String}</query>\n        </handler>\n    </rule>\n</http_handlers>\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"$ curl -H 'XXX:TEST_HEADER_VALUE' -H 'PARAMS_XXX:max_threads' 'http://localhost:8123/query_param_with_url/1/max_threads/max_final_threads?max_threads=1&max_final_threads=2'\n1\nmax_final_threads   2\n")),(0,l.kt)("p",null,'!!! note "\u8b66\u544a"\n\u5728\u4e00\u4e2a',(0,l.kt)("inlineCode",{parentName:"p"},"predefined_query_handler"),"\u4e2d\uff0c\u53ea\u652f\u6301insert\u7c7b\u578b\u7684\u4e00\u4e2a",(0,l.kt)("inlineCode",{parentName:"p"},"\u67e5\u8be2"),"\u3002"),(0,l.kt)("h3",{id:"dynamic_query_handler"},"\u52a8\u6001\u67e5\u8be2"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"dynamic_query_handler"),"\u65f6\uff0c\u67e5\u8be2\u4ee5HTTP\u8bf7\u6c42\u53c2\u6570\u7684\u5f62\u5f0f\u7f16\u5199\u3002\u533a\u522b\u5728\u4e8e\uff0c\u5728",(0,l.kt)("inlineCode",{parentName:"p"},"predefined_query_handler"),"\u4e2d\uff0c\u67e5\u8be2\u662f\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u7f16\u5199\u7684\u3002\u60a8\u53ef\u4ee5\u5728",(0,l.kt)("inlineCode",{parentName:"p"},"dynamic_query_handler"),"\u4e2d\u914d\u7f6e",(0,l.kt)("inlineCode",{parentName:"p"},"query_param_name"),"\u3002"),(0,l.kt)("p",null,"ClickHouse\u63d0\u53d6\u5e76\u6267\u884c\u4e0eHTTP\u8bf7\u6c42URL\u4e2d\u7684",(0,l.kt)("inlineCode",{parentName:"p"},"query_param_name"),"\u503c\u5bf9\u5e94\u7684\u503c\u3002",(0,l.kt)("inlineCode",{parentName:"p"},"query_param_name"),"\u7684\u9ed8\u8ba4\u503c\u662f",(0,l.kt)("inlineCode",{parentName:"p"},"/query"),"\u3002\u8fd9\u662f\u4e00\u4e2a\u53ef\u9009\u7684\u914d\u7f6e\u3002\u5982\u679c\u914d\u7f6e\u6587\u4ef6\u4e2d\u6ca1\u6709\u5b9a\u4e49\uff0c\u5219\u4e0d\u4f1a\u4f20\u5165\u53c2\u6570\u3002"),(0,l.kt)("p",null,"\u4e3a\u4e86\u8bd5\u9a8c\u8fd9\u4e2a\u529f\u80fd\uff0c\u793a\u4f8b\u5b9a\u4e49\u4e86",(0,l.kt)("a",{parentName:"p",href:"/docs/zh/operations/settings/settings#settings-max_threads"},"max_threads"),"\u548c",(0,l.kt)("inlineCode",{parentName:"p"},"max_final_threads"),"\uff0c",(0,l.kt)("inlineCode",{parentName:"p"},"queries"),"\u8bbe\u7f6e\u662f\u5426\u6210\u529f\u7684\u503c\u3002"),(0,l.kt)("p",null,"\u793a\u4f8b:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-xml"},"<http_handlers>\n    <rule>\n    <headers>\n        <XXX>TEST_HEADER_VALUE_DYNAMIC</XXX>    </headers>\n    <handler>\n        <type>dynamic_query_handler</type>\n        <query_param_name>query_param</query_param_name>\n    </handler>\n    </rule>\n</http_handlers>\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"$ curl  -H 'XXX:TEST_HEADER_VALUE_DYNAMIC'  'http://localhost:8123/own?max_threads=1&max_final_threads=2&param_name_1=max_threads&param_name_2=max_final_threads&query_param=SELECT%20name,value%20FROM%20system.settings%20where%20name%20=%20%7Bname_1:String%7D%20OR%20name%20=%20%7Bname_2:String%7D'\nmax_threads 1\nmax_final_threads   2\n")),(0,l.kt)("h3",{id:"static"},"static"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"static"),"\u53ef\u4ee5\u8fd4\u56de",(0,l.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Type"},"content_type"),", ",(0,l.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Status"},"status"),"\u548c",(0,l.kt)("inlineCode",{parentName:"p"},"response_content"),"\u3002",(0,l.kt)("inlineCode",{parentName:"p"},"response_content"),"\u53ef\u4ee5\u8fd4\u56de\u6307\u5b9a\u7684\u5185\u5bb9\u3002"),(0,l.kt)("p",null,"\u793a\u4f8b:"),(0,l.kt)("p",null,"\u8fd4\u56de\u4fe1\u606f."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-xml"},"<http_handlers>\n        <rule>\n            <methods>GET</methods>\n            <headers><XXX>xxx</XXX></headers>\n            <url>/hi</url>\n            <handler>\n                <type>static</type>\n                <status>402</status>\n                <content_type>text/html; charset=UTF-8</content_type>\n                <response_content>Say Hi!</response_content>\n            </handler>\n        </rule>\n</http_handlers>\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'$ curl -vv  -H \'XXX:xxx\' \'http://localhost:8123/hi\'\n*   Trying ::1...\n* Connected to localhost (::1) port 8123 (#0)\n> GET /hi HTTP/1.1\n> Host: localhost:8123\n> User-Agent: curl/7.47.0\n> Accept: */*\n> XXX:xxx\n>\n< HTTP/1.1 402 Payment Required\n< Date: Wed, 29 Apr 2020 03:51:26 GMT\n< Connection: Keep-Alive\n< Content-Type: text/html; charset=UTF-8\n< Transfer-Encoding: chunked\n< Keep-Alive: timeout=3\n< X-ClickHouse-Summary: {"read_rows":"0","read_bytes":"0","written_rows":"0","written_bytes":"0","total_rows_to_read":"0"}\n<\n* Connection #0 to host localhost left intact\nSay Hi!%\n')),(0,l.kt)("p",null,"\u4ece\u914d\u7f6e\u4e2d\u67e5\u627e\u53d1\u9001\u5230\u5ba2\u6237\u7aef\u7684\u5185\u5bb9\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-xml"},'<get_config_static_handler><![CDATA[<html ng-app="SMI2"><head><base href="http://ui.tabix.io/"></head><body><div ui-view="" class="content-ui"></div><script src="http://loader.tabix.io/master.js"><\/script></body></html>]]></get_config_static_handler>\n\n<http_handlers>\n        <rule>\n            <methods>GET</methods>\n            <headers><XXX>xxx</XXX></headers>\n            <url>/get_config_static_handler</url>\n            <handler>\n                <type>static</type>\n                <response_content>config://get_config_static_handler</response_content>\n            </handler>\n        </rule>\n</http_handlers>\n')),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'$ curl -v  -H \'XXX:xxx\' \'http://localhost:8123/get_config_static_handler\'\n*   Trying ::1...\n* Connected to localhost (::1) port 8123 (#0)\n> GET /get_config_static_handler HTTP/1.1\n> Host: localhost:8123\n> User-Agent: curl/7.47.0\n> Accept: */*\n> XXX:xxx\n>\n< HTTP/1.1 200 OK\n< Date: Wed, 29 Apr 2020 04:01:24 GMT\n< Connection: Keep-Alive\n< Content-Type: text/plain; charset=UTF-8\n< Transfer-Encoding: chunked\n< Keep-Alive: timeout=3\n< X-ClickHouse-Summary: {"read_rows":"0","read_bytes":"0","written_rows":"0","written_bytes":"0","total_rows_to_read":"0"}\n<\n* Connection #0 to host localhost left intact\n<html ng-app="SMI2"><head><base href="http://ui.tabix.io/"></head><body><div ui-view="" class="content-ui"></div><script src="http://loader.tabix.io/master.js"><\/script></body></html>%\n')),(0,l.kt)("p",null,"\u4ece\u53d1\u9001\u5230\u5ba2\u6237\u7aef\u7684\u6587\u4ef6\u4e2d\u67e5\u627e\u5185\u5bb9\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-xml"},"<http_handlers>\n        <rule>\n            <methods>GET</methods>\n            <headers><XXX>xxx</XXX></headers>\n            <url>/get_absolute_path_static_handler</url>\n            <handler>\n                <type>static</type>\n                <content_type>text/html; charset=UTF-8</content_type>\n                <response_content>file:///absolute_path_file.html</response_content>\n            </handler>\n        </rule>\n        <rule>\n            <methods>GET</methods>\n            <headers><XXX>xxx</XXX></headers>\n            <url>/get_relative_path_static_handler</url>\n            <handler>\n                <type>static</type>\n                <content_type>text/html; charset=UTF-8</content_type>\n                <response_content>file://./relative_path_file.html</response_content>\n            </handler>\n        </rule>\n</http_handlers>\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'$ user_files_path=\'/var/lib/clickhouse/user_files\'\n$ sudo echo "<html><body>Relative Path File</body></html>" > $user_files_path/relative_path_file.html\n$ sudo echo "<html><body>Absolute Path File</body></html>" > $user_files_path/absolute_path_file.html\n$ curl -vv -H \'XXX:xxx\' \'http://localhost:8123/get_absolute_path_static_handler\'\n*   Trying ::1...\n* Connected to localhost (::1) port 8123 (#0)\n> GET /get_absolute_path_static_handler HTTP/1.1\n> Host: localhost:8123\n> User-Agent: curl/7.47.0\n> Accept: */*\n> XXX:xxx\n>\n< HTTP/1.1 200 OK\n< Date: Wed, 29 Apr 2020 04:18:16 GMT\n< Connection: Keep-Alive\n< Content-Type: text/html; charset=UTF-8\n< Transfer-Encoding: chunked\n< Keep-Alive: timeout=3\n< X-ClickHouse-Summary: {"read_rows":"0","read_bytes":"0","written_rows":"0","written_bytes":"0","total_rows_to_read":"0"}\n<\n<html><body>Absolute Path File</body></html>\n* Connection #0 to host localhost left intact\n$ curl -vv -H \'XXX:xxx\' \'http://localhost:8123/get_relative_path_static_handler\'\n*   Trying ::1...\n* Connected to localhost (::1) port 8123 (#0)\n> GET /get_relative_path_static_handler HTTP/1.1\n> Host: localhost:8123\n> User-Agent: curl/7.47.0\n> Accept: */*\n> XXX:xxx\n>\n< HTTP/1.1 200 OK\n< Date: Wed, 29 Apr 2020 04:18:31 GMT\n< Connection: Keep-Alive\n< Content-Type: text/html; charset=UTF-8\n< Transfer-Encoding: chunked\n< Keep-Alive: timeout=3\n< X-ClickHouse-Summary: {"read_rows":"0","read_bytes":"0","written_rows":"0","written_bytes":"0","total_rows_to_read":"0"}\n<\n<html><body>Relative Path File</body></html>\n* Connection #0 to host localhost left intact\n')),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://clickhouse.com/docs/zh/interfaces/http_interface/"},"\u6765\u6e90\u6587\u7ae0")," "))}m.isMDXComponent=!0}}]);