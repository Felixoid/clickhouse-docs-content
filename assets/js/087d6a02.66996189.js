"use strict";(self.webpackChunkclickhouse=self.webpackChunkclickhouse||[]).push([[71967],{3905:function(e,t,n){n.d(t,{Zo:function(){return m},kt:function(){return d}});var l=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,l)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,l,a=function(e,t){if(null==e)return{};var n,l,a={},i=Object.keys(e);for(l=0;l<i.length;l++)n=i[l],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(l=0;l<i.length;l++)n=i[l],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var o=l.createContext({}),u=function(e){var t=l.useContext(o),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},m=function(e){var t=u(e.components);return l.createElement(o.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return l.createElement(l.Fragment,{},t)}},s=l.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,o=e.parentName,m=c(e,["components","mdxType","originalType","parentName"]),s=u(n),d=a,f=s["".concat(o,".").concat(d)]||s[d]||p[d]||i;return n?l.createElement(f,r(r({ref:t},m),{},{components:n})):l.createElement(f,r({ref:t},m))}));function d(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,r=new Array(i);r[0]=s;var c={};for(var o in t)hasOwnProperty.call(t,o)&&(c[o]=t[o]);c.originalType=e,c.mdxType="string"==typeof e?e:a,r[1]=c;for(var u=2;u<i;u++)r[u]=n[u];return l.createElement.apply(null,r)}return l.createElement.apply(null,n)}s.displayName="MDXCreateElement"},31462:function(e,t,n){n.r(t),n.d(t,{assets:function(){return m},contentTitle:function(){return o},default:function(){return d},frontMatter:function(){return c},metadata:function(){return u},toc:function(){return p}});var l=n(87462),a=n(63366),i=(n(67294),n(3905)),r=["components"],c={},o="Decimal(P,S),Decimal32(S),Decimal64(S),Decimal128(S)",u={unversionedId:"zh/sql-reference/data-types/decimal",id:"zh/sql-reference/data-types/decimal",title:"Decimal(P,S),Decimal32(S),Decimal64(S),Decimal128(S)",description:"decimalp-s-decimal32s-decimal64s-decimal128s}",source:"@site/docs/zh/sql-reference/data-types/decimal.md",sourceDirName:"zh/sql-reference/data-types",slug:"/zh/sql-reference/data-types/decimal",permalink:"/docs/zh/sql-reference/data-types/decimal",editUrl:"https://github.com/ClickHouse/ClickHouse/tree/master/docs/zh/sql-reference/data-types/decimal.md",tags:[],version:"current",frontMatter:{},sidebar:"chinese",previous:{title:"\u65e5\u671f\u65f6\u95f4",permalink:"/docs/zh/sql-reference/data-types/datetime"},next:{title:"Enum8,Enum16",permalink:"/docs/zh/sql-reference/data-types/enum"}},m={},p=[{value:"\u53c2\u6570",id:"can-shu",level:2},{value:"\u5341\u8fdb\u5236\u503c\u8303\u56f4",id:"shi-jin-zhi-zhi-fan-wei",level:2},{value:"\u5185\u90e8\u8868\u793a\u65b9\u5f0f",id:"nei-bu-biao-shi-fang-shi",level:2},{value:"\u8fd0\u7b97\u548c\u7ed3\u679c\u7c7b\u578b",id:"yun-suan-he-jie-guo-lei-xing",level:2},{value:"\u6ea2\u51fa\u68c0\u67e5",id:"yi-chu-jian-cha",level:2}],s={toc:p};function d(e){var t=e.components,n=(0,a.Z)(e,r);return(0,i.kt)("wrapper",(0,l.Z)({},s,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"decimalp-s-decimal32s-decimal64s-decimal128s"},"Decimal(P,S),Decimal32(S),Decimal64(S),Decimal128(S)"),(0,i.kt)("p",null,"\u6709\u7b26\u53f7\u7684\u5b9a\u70b9\u6570\uff0c\u53ef\u5728\u52a0\u3001\u51cf\u548c\u4e58\u6cd5\u8fd0\u7b97\u8fc7\u7a0b\u4e2d\u4fdd\u6301\u7cbe\u5ea6\u3002\u5bf9\u4e8e\u9664\u6cd5\uff0c\u6700\u4f4e\u6709\u6548\u6570\u5b57\u4f1a\u88ab\u4e22\u5f03\uff08\u4e0d\u820d\u5165\uff09\u3002"),(0,i.kt)("h2",{id:"can-shu"},"\u53c2\u6570"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"P - \u7cbe\u5ea6\u3002\u6709\u6548\u8303\u56f4\uff1a","[","1:38","]","\uff0c\u51b3\u5b9a\u53ef\u4ee5\u6709\u591a\u5c11\u4e2a\u5341\u8fdb\u5236\u6570\u5b57\uff08\u5305\u62ec\u5206\u6570\uff09\u3002"),(0,i.kt)("li",{parentName:"ul"},"S - \u89c4\u6a21\u3002\u6709\u6548\u8303\u56f4\uff1a","[","0\uff1aP","]","\uff0c\u51b3\u5b9a\u6570\u5b57\u7684\u5c0f\u6570\u90e8\u5206\u4e2d\u5305\u542b\u7684\u5c0f\u6570\u4f4d\u6570\u3002")),(0,i.kt)("p",null,"\u5bf9\u4e8e\u4e0d\u540c\u7684 P \u53c2\u6570\u503c Decimal \u8868\u793a\uff0c\u4ee5\u4e0b\u4f8b\u5b50\u90fd\u662f\u540c\u4e49\u7684\uff1a\n-P\u4ece","[","1:9","]","-\u5bf9\u4e8eDecimal32(S)\n-P\u4ece","[","10:18","]","-\u5bf9\u4e8eDecimal64(\u5c0f\u53f7)\n-P\u4ece","[","19:38","]","-\u5bf9\u4e8eDecimal128\uff08S)"),(0,i.kt)("h2",{id:"shi-jin-zhi-zhi-fan-wei"},"\u5341\u8fdb\u5236\u503c\u8303\u56f4"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Decimal32(S) - ( -1 ","*"," 10^(9 - S),1","*","10^(9-S) )"),(0,i.kt)("li",{parentName:"ul"},"Decimal64(S) - ( -1 ","*"," 10^(18 - S),1","*","10^(18-S) )"),(0,i.kt)("li",{parentName:"ul"},"Decimal128(S) - ( -1 ","*"," 10^(38 - S),1","*","10^(38-S) )")),(0,i.kt)("p",null,"\u4f8b\u5982\uff0cDecimal32(4) \u53ef\u4ee5\u8868\u793a -99999.9999 \u81f3 99999.9999 \u7684\u6570\u503c\uff0c\u6b65\u957f\u4e3a0.0001\u3002"),(0,i.kt)("h2",{id:"nei-bu-biao-shi-fang-shi"},"\u5185\u90e8\u8868\u793a\u65b9\u5f0f"),(0,i.kt)("p",null,"\u6570\u636e\u91c7\u7528\u4e0e\u81ea\u8eab\u4f4d\u5bbd\u76f8\u540c\u7684\u6709\u7b26\u53f7\u6574\u6570\u5b58\u50a8\u3002\u8fd9\u4e2a\u6570\u5728\u5185\u5b58\u4e2d\u5b9e\u9645\u8303\u56f4\u4f1a\u9ad8\u4e8e\u4e0a\u8ff0\u8303\u56f4\uff0c\u4ece String \u8f6c\u6362\u5230\u5341\u8fdb\u5236\u6570\u7684\u65f6\u5019\u4f1a\u505a\u5bf9\u5e94\u7684\u68c0\u67e5\u3002"),(0,i.kt)("p",null,"\u7531\u4e8e\u73b0\u4ee3CPU\u4e0d\u652f\u6301128\u4f4d\u6570\u5b57\uff0c\u56e0\u6b64 Decimal128 \u4e0a\u7684\u64cd\u4f5c\u7531\u8f6f\u4ef6\u6a21\u62df\u3002\u6240\u4ee5 Decimal128 \u7684\u8fd0\u7b97\u901f\u5ea6\u660e\u663e\u6162\u4e8e Decimal32/Decimal64\u3002"),(0,i.kt)("h2",{id:"yun-suan-he-jie-guo-lei-xing"},"\u8fd0\u7b97\u548c\u7ed3\u679c\u7c7b\u578b"),(0,i.kt)("p",null,"\u5bf9Decimal\u7684\u4e8c\u8fdb\u5236\u8fd0\u7b97\u5bfc\u81f4\u66f4\u5bbd\u7684\u7ed3\u679c\u7c7b\u578b\uff08\u65e0\u8bba\u53c2\u6570\u7684\u987a\u5e8f\u5982\u4f55\uff09\u3002"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Decimal64(S1) <op> Decimal32(S2) -> Decimal64(S)")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Decimal128(S1) <op> Decimal32(S2) -> Decimal128(S)")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Decimal128(S1) <op> Decimal64(S2) -> Decimal128(S)"))),(0,i.kt)("p",null,"\u7cbe\u5ea6\u53d8\u5316\u7684\u89c4\u5219\uff1a"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"\u52a0\u6cd5\uff0c\u51cf\u6cd5\uff1aS = max(S1, S2)\u3002"),(0,i.kt)("li",{parentName:"ul"},"\u4e58\u6cd5\uff1aS = S1 + S2\u3002"),(0,i.kt)("li",{parentName:"ul"},"\u9664\u6cd5\uff1aS = S1\u3002")),(0,i.kt)("p",null,"\u5bf9\u4e8e Decimal \u548c\u6574\u6570\u4e4b\u95f4\u7684\u7c7b\u4f3c\u64cd\u4f5c\uff0c\u7ed3\u679c\u662f\u4e0e\u53c2\u6570\u5927\u5c0f\u76f8\u540c\u7684\u5341\u8fdb\u5236\u3002"),(0,i.kt)("p",null,"\u672a\u5b9a\u4e49Decimal\u548cFloat32/Float64\u4e4b\u95f4\u7684\u51fd\u6570\u3002\u8981\u6267\u884c\u6b64\u7c7b\u64cd\u4f5c\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528\uff1atoDecimal32\u3001toDecimal64\u3001toDecimal128 \u6216 toFloat32\uff0ctoFloat64\uff0c\u9700\u8981\u663e\u5f0f\u5730\u8f6c\u6362\u5176\u4e2d\u4e00\u4e2a\u53c2\u6570\u3002\u6ce8\u610f\uff0c\u7ed3\u679c\u5c06\u5931\u53bb\u7cbe\u5ea6\uff0c\u7c7b\u578b\u8f6c\u6362\u662f\u6602\u8d35\u7684\u64cd\u4f5c\u3002"),(0,i.kt)("p",null,"Decimal\u4e0a\u7684\u4e00\u4e9b\u51fd\u6570\u8fd4\u56de\u7ed3\u679c\u4e3aFloat64\uff08\u4f8b\u5982\uff0cvar\u6216stddev\uff09\u3002\u5bf9\u4e8e\u5176\u4e2d\u4e00\u4e9b\uff0c\u4e2d\u95f4\u8ba1\u7b97\u53d1\u751f\u5728Decimal\u4e2d\u3002\u5bf9\u4e8e\u6b64\u7c7b\u51fd\u6570\uff0c\u5c3d\u7ba1\u7ed3\u679c\u7c7b\u578b\u76f8\u540c\uff0c\u4f46Float64\u548cDecimal\u4e2d\u76f8\u540c\u6570\u636e\u7684\u7ed3\u679c\u53ef\u80fd\u4e0d\u540c\u3002"),(0,i.kt)("h2",{id:"yi-chu-jian-cha"},"\u6ea2\u51fa\u68c0\u67e5"),(0,i.kt)("p",null,"\u5728\u5bf9 Decimal \u7c7b\u578b\u6267\u884c\u64cd\u4f5c\u65f6\uff0c\u6570\u503c\u53ef\u80fd\u4f1a\u53d1\u751f\u6ea2\u51fa\u3002\u5206\u6570\u4e2d\u7684\u8fc7\u591a\u6570\u5b57\u88ab\u4e22\u5f03\uff08\u4e0d\u662f\u820d\u5165\u7684\uff09\u3002\u6574\u6570\u4e2d\u7684\u8fc7\u591a\u6570\u5b57\u5c06\u5bfc\u81f4\u5f02\u5e38\u3002"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"SELECT toDecimal32(2, 4) AS x, x / 3\n\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500x\u2500\u252c\u2500divide(toDecimal32(2, 4), 3)\u2500\u2510\n\u2502 2.0000 \u2502                       0.6666 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\nSELECT toDecimal32(4.2, 8) AS x, x * x\n\nDB::Exception: Scale is out of bounds.\n\nSELECT toDecimal32(4.2, 8) AS x, 6 * x\n\nDB::Exception: Decimal math overflow.\n")),(0,i.kt)("p",null,"\u68c0\u67e5\u6ea2\u51fa\u4f1a\u5bfc\u81f4\u8ba1\u7b97\u53d8\u6162\u3002\u5982\u679c\u5df2\u77e5\u6ea2\u51fa\u4e0d\u53ef\u80fd\uff0c\u5219\u53ef\u4ee5\u901a\u8fc7\u8bbe\u7f6e",(0,i.kt)("inlineCode",{parentName:"p"},"decimal_check_overflow"),"\u6765\u7981\u7528\u6ea2\u51fa\u68c0\u67e5\uff0c\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u6ea2\u51fa\u5c06\u5bfc\u81f4\u7ed3\u679c\u4e0d\u6b63\u786e\uff1a"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"SET decimal_check_overflow = 0;\nSELECT toDecimal32(4.2, 8) AS x, 6 * x\n\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500x\u2500\u252c\u2500multiply(6, toDecimal32(4.2, 8))\u2500\u2510\n\u2502 4.20000000 \u2502                     -17.74967296 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n")),(0,i.kt)("p",null,"\u6ea2\u51fa\u68c0\u67e5\u4e0d\u4ec5\u53d1\u751f\u5728\u7b97\u672f\u8fd0\u7b97\u4e0a\uff0c\u8fd8\u53d1\u751f\u5728\u6bd4\u8f83\u8fd0\u7b97\u4e0a\uff1a"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"SELECT toDecimal32(1, 8) < 100\n\nDB::Exception: Can't compare.\n")))}d.isMDXComponent=!0}}]);