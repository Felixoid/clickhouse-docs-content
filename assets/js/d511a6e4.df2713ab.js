"use strict";(self.webpackChunkclickhouse=self.webpackChunkclickhouse||[]).push([[94663],{3905:function(e,t,n){n.d(t,{Zo:function(){return c},kt:function(){return m}});var r=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var p=r.createContext({}),s=function(e){var t=r.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},c=function(e){var t=s(e.components);return r.createElement(p.Provider,{value:t},e.children)},k={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},u=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,p=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),u=s(n),m=a,d=u["".concat(p,".").concat(m)]||u[m]||k[m]||o;return n?r.createElement(d,l(l({ref:t},c),{},{components:n})):r.createElement(d,l({ref:t},c))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,l=new Array(o);l[0]=u;var i={};for(var p in t)hasOwnProperty.call(t,p)&&(i[p]=t[p]);i.originalType=e,i.mdxType="string"==typeof e?e:a,l[1]=i;for(var s=2;s<o;s++)l[s]=n[s];return r.createElement.apply(null,l)}return r.createElement.apply(null,n)}u.displayName="MDXCreateElement"},69516:function(e,t,n){n.r(t),n.d(t,{assets:function(){return c},contentTitle:function(){return p},default:function(){return m},frontMatter:function(){return i},metadata:function(){return s},toc:function(){return k}});var r=n(87462),a=n(63366),o=(n(67294),n(3905)),l=["components"],i={sidebar_position:66,sidebar_label:"ClickHouse Keeper"},p="[\u9884\u53d1\u751f\u4ea7] ClickHouse Keeper",s={unversionedId:"zh/operations/clickhouse-keeper",id:"zh/operations/clickhouse-keeper",title:"[\u9884\u53d1\u751f\u4ea7] ClickHouse Keeper",description:"clickHouse-keeper}",source:"@site/docs/zh/operations/clickhouse-keeper.md",sourceDirName:"zh/operations",slug:"/zh/operations/clickhouse-keeper",permalink:"/docs/zh/operations/clickhouse-keeper",editUrl:"https://github.com/ClickHouse/ClickHouse/tree/master/docs/zh/operations/clickhouse-keeper.md",tags:[],version:"current",sidebarPosition:66,frontMatter:{sidebar_position:66,sidebar_label:"ClickHouse Keeper"},sidebar:"chinese",previous:{title:"Caches",permalink:"/docs/zh/operations/caches"},next:{title:"External Disks for Storing Data",permalink:"/docs/zh/operations/storing-data"}},c={},k=[{value:"\u5b9e\u73b0\u7ec6\u8282",id:"implementation-details",level:2},{value:"\u914d\u7f6e",id:"configuration",level:2},{value:"\u5982\u4f55\u8fd0\u884c",id:"how-to-run",level:2},{value:"\u56db\u5b57\u6bcd\u547d\u4ee4",id:"four-letter-word-commands",level:2},{value:"\u5b9e\u73b0 \u4eceZooKeeper\u8fc1\u79fb",id:"migration-from-zookeeper",level:2}],u={toc:k};function m(e){var t=e.components,n=(0,a.Z)(e,l);return(0,o.kt)("wrapper",(0,r.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"clickHouse-keeper"},"[\u9884\u53d1\u751f\u4ea7]"," ClickHouse Keeper"),(0,o.kt)("p",null,"ClickHouse \u670d\u52a1\u4e3a\u4e86 ",(0,o.kt)("a",{parentName:"p",href:"/docs/zh/engines/table-engines/mergetree-family/replication"},"\u526f\u672c")," \u548c ",(0,o.kt)("a",{parentName:"p",href:"/docs/zh/sql-reference/distributed-ddl"},"\u5206\u5e03\u5f0fDDL")," \u67e5\u8be2\u6267\u884c\u4f7f\u7528 ",(0,o.kt)("a",{parentName:"p",href:"https://zookeeper.apache.org/"},"ZooKeeper")," \u534f\u8c03\u7cfb\u7edf. ClickHouse Keeper \u548c ZooKeeper\u662f\u76f8\u4e92\u517c\u5bb9\u7684\uff0c\u53ef\u4e92\u76f8\u66ff\u4ee3."),(0,o.kt)("div",{className:"admonition admonition-danger alert alert--danger"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))),'"\u8b66\u544a"')),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"\u8fd9\u4e2a\u529f\u80fd\u5f53\u524d\u8fd8\u5728\u9884\u53d1\u751f\u4ea7\u9636\u6bb5. \u6211\u4eec\u53ea\u662f\u5728\u5185\u90e8\u90e8\u5206\u4f7f\u7528\u4e8e\u751f\u4ea7\u73af\u5883\u548c\u6d4b\u8bd5CI\u4e2d."))),(0,o.kt)("h2",{id:"implementation-details"},"\u5b9e\u73b0\u7ec6\u8282"),(0,o.kt)("p",null,"ZooKeeper\u6700\u65e9\u7684\u975e\u5e38\u8457\u540d\u7684\u5f00\u6e90\u534f\u8c03\u7cfb\u7edf\u4e4b\u4e00. \u5b83\u662f\u901a\u8fc7Java\u8bed\u8a00\u5b9e\u73b0\u7684, \u6709\u4e00\u4e2a\u76f8\u5f53\u8282\u70b9\u548c\u5f3a\u5927\u7684\u6570\u636e\u6a21\u578b. ZooKeeper\u7684\u534f\u8c03\u7b97\u6cd5\u53eb\u505a ZAB (ZooKeeper Atomic Broadcast) zk\u4e0d\u80fd\u4fdd\u8bc1\u8bfb\u53d6\u7684\u7ebf\u6027\u5316, \u4ee5\u4e3a\u6bcf\u4e2azk\u8282\u70b9\u670d\u52a1\u90fd\u662f\u901a\u8fc7\u672c\u5730\u7ebf\u6027\u8bfb\u7684. ClickHouse Keeper\u662f\u901a\u8fc7C++\u5199\u7684\uff0c\u548czookeeper\u4e0d\u4e00\u6837\uff0c ClickHouse Keeper\u4f7f\u7528\u7684",(0,o.kt)("a",{parentName:"p",href:"https://raft.github.io/"},"RAFT algorithm")," ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/eBay/NuRaft"},"implementation"),"\u7b97\u6cd5. \u8fd9\u4e2a\u7b97\u6cd5\u5141\u8bb8\u7ebf\u6027\u8bfb\u548c\u5199, \u5df2\u7ecf\u6709\u51e0\u79cd\u4e0d\u540c\u7684\u8bed\u8a00\u7684\u5f00\u6e90\u5b9e\u73b0."),(0,o.kt)("p",null,"ClickHouse Keeper \u9ed8\u8ba4\u63d0\u4f9b\u4e86\u4e00\u4e9b\u4fdd\u8bc1\u548cZooKeeper\u662f\u4e00\u6837\u7684 (\u7ebf\u6027\u5199, \u975e\u7ebf\u6027\u8bfb)\u548c. clickhouse keeper\u6709\u4e00\u4e2a\u517c\u5bb9\u7684\u5ba2\u6237\u7aef\u670d\u52a1\u7aef\u534f\u8bae, \u6240\u4ee5\u4efb\u4f55\u6807\u51c6\u7684zookeeper\u5ba2\u6237\u7aef\u90fd\u53ef\u4ee5\u7528\u6765\u4e0eclickhouse keeper\u8fdb\u884c\u4ea4\u4e92. \u5feb\u7167\u548c\u65e5\u5fd7\u7684\u683c\u5f0f\u4e0eZooKeeper\u4e0d\u517c\u5bb9, \u4f46\u662f\u901a\u8fc7",(0,o.kt)("inlineCode",{parentName:"p"},"clickhouse-keeper-converter")," \u5141\u8bb8\u8f6c\u6362 ZooKeeper \u6570\u636e\u5230 ClickHouse Keeper \u5feb\u7167. ClickHouse Keeper\u7684interserver\u534f\u8bae\u548czookeeper\u4e5f\u4e0d\u517c\u5bb9\uff0c\u6240\u4ee5ZooKeeper / ClickHouse Keeper \u6df7\u5408\u90e8\u7f72\u96c6\u7fa4\u662f\u4e0d\u53ef\u80fd\u7684."),(0,o.kt)("p",null,"ClickHouse Keeper\u652f\u6301\u8bbf\u95ee\u63a7\u5236\u5217\u8868(ACL)\u7684\u65b9\u5f0f\u548c",(0,o.kt)("a",{parentName:"p",href:"https://zookeeper.apache.org/doc/r3.1.2/zookeeperProgrammers.html#sc_ZooKeeperAccessControl"},"ZooKeeper")," \u4e00\u6837. ClickHouse Keeper\u652f\u6301\u76f8\u540c\u7684\u6743\u9650\u96c6\u5408\u5e76\u4e14\u6709\u5b8c\u5168\u76f8\u540c\u7684\u5185\u7f6e\u65b9\u6848\u5982\uff1a",(0,o.kt)("inlineCode",{parentName:"p"},"world"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"auth"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"digest"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"host")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"ip"),". \u6743\u9650\u6821\u9a8c\u4f7f\u7528 ",(0,o.kt)("inlineCode",{parentName:"p"},"\u7528\u6237\u540d:\u5bc6\u7801"),"\u65b9\u5f0f\u914d\u5bf9. \u5bc6\u7801\u901a\u8fc7Base64\u7b97\u6cd5\u52a0\u5bc6."),(0,o.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),'"\u6ce8\u610f"')),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"\u4e0d\u652f\u6301\u5916\u90e8\u96c6\u6210"))),(0,o.kt)("h2",{id:"configuration"},"\u914d\u7f6e"),(0,o.kt)("p",null,"ClickHouse Keeper \u5b8c\u5168\u53ef\u4ee5\u4f5c\u4e3aZooKeeper\u7684\u72ec\u7acb\u66ff\u4ee3\u54c1\u6216\u8005\u4f5c\u4e3aClickHouse server\u670d\u52a1\u7684\u5185\u90e8\u7ec4\u4ef6, \u4f46\u662f\u8fd9\u4e24\u79cd\u65b9\u5f0f\u4e0b\u7684\u914d\u7f6e\u4f7f\u7528 ",(0,o.kt)("inlineCode",{parentName:"p"},".xml")," \u683c\u5f0f\u4e5f\u51e0\u4e4e\u90fd\u662f\u76f8\u540c\u7684. ClickHouse Keeper \u914d\u7f6e\u7684\u6807\u7b7e\u662f ",(0,o.kt)("inlineCode",{parentName:"p"},"<keeper_server>"),". Keeper \u914d\u7f6e\u6709\u4ee5\u4e0b\u8fd9\u4e9b\u53c2\u6570:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"tcp_port")," \u2014 \u5ba2\u6237\u7aef\u8fde\u63a5\u7684\u7aef\u53e3(ZooKeeper\u9ed8\u8ba4\u662f",(0,o.kt)("inlineCode",{parentName:"li"},"2181"),")."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"tcp_port_secure")," \u2014 client \u548c keeper-server\u4e4b\u95f4\u7684SSL\u8fde\u63a5\u7684\u5b89\u5168\u7aef\u53e3."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"server_id")," \u2014 \u552f\u4e00\u7684\u670d\u52a1\u5668ID, ClickHouse Keeper \u96c6\u7fa4\u7684\u6bcf\u4e2a\u53c2\u4e0e\u7ec4\u4ef6\u90fd\u5fc5\u987b\u6709\u4e00\u4e2a\u552f\u4e00\u7684\u7f16\u53f7(1, 2, 3, \u7b49\u7b49)."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"log_storage_path")," \u2014 \u534f\u8c03\u65e5\u5fd7\u7684\u8def\u5f84, \u6700\u597d\u5b58\u653e\u5728\u4e0d\u7e41\u5fd9\u7684\u673a\u5668\u4e0a (\u548cZooKeeper\u4e00\u6837)."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"snapshot_storage_path")," \u2014 \u534f\u8c03\u5feb\u7167\u7684\u8def\u5f84.")),(0,o.kt)("p",null,"\u5176\u4ed6\u5e38\u89c1\u53c2\u6570\u7ee7\u627f\u81eaClickHouse server\u7684\u914d\u7f6e (",(0,o.kt)("inlineCode",{parentName:"p"},"listen_host"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"logger"),", \u7b49\u7b49)."),(0,o.kt)("p",null,"\u5185\u90e8\u534f\u8c03\u914d\u7f6e\u4f4d\u4e8e",(0,o.kt)("inlineCode",{parentName:"p"},"<keeper_server>.<coordination_settings>"),"\u90e8\u5206:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"operation_timeout_ms")," \u2014 \u5355\u4e2a\u5ba2\u6237\u7aef\u64cd\u4f5c\u7684\u8d85\u65f6\u65f6\u95f4(ms)(\u9ed8\u8ba4\u503c:10000)\u3002"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"min_session_timeout_ms")," \u2014 \u5ba2\u6237\u7aef\u4f1a\u8bdd\u7684\u6700\u5c0f\u8d85\u65f6\u65f6\u95f4(ms)(\u9ed8\u8ba4\u503c:10000)\u3002"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"session_timeout_ms")," \u2014 \u5ba2\u6237\u7aef\u4f1a\u8bdd\u6700\u5927\u8d85\u65f6\u65f6\u95f4(ms)(\u9ed8\u8ba4100000)\u3002"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"dead_session_check_period_ms")," \u2014 ClickHouse Keeper\u68c0\u67e5\u6b7b\u4f1a\u8bdd\u5e76\u5220\u9664\u5b83\u4eec\u7684\u9891\u7387(\u6beb\u79d2)(\u9ed8\u8ba4\u503c:500)\u3002"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"heart_beat_interval_ms")," \u2014 ClickHouse Keeper\u7684leader\u53d1\u9001\u5fc3\u8df3\u9891\u7387(\u6beb\u79d2)(\u9ed8\u8ba4\u4e3a500)\u3002"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"election_timeout_lower_bound_ms")," \u2014 \u5982\u679cfollower\u5728\u6b64\u95f4\u9694\u5185\u6ca1\u6709\u6536\u5230leader\u7684\u5fc3\u8df3\uff0c\u90a3\u4e48\u5b83\u53ef\u4ee5\u542f\u52a8leader\u9009\u4e3e(\u9ed8\u8ba4\u4e3a1000)."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"election_timeout_upper_bound_ms")," \u2014 \u5982\u679cfollower\u5728\u6b64\u95f4\u9694\u5185\u6ca1\u6709\u6536\u5230leader\u7684\u5fc3\u8df3\uff0c\u90a3\u4e48\u5b83\u5fc5\u987b\u542f\u52a8leader\u9009\u4e3e(\u9ed8\u8ba4\u4e3a2000)\u3002"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"rotate_log_storage_interval")," \u2014 \u5355\u4e2a\u6587\u4ef6\u4e2d\u5b58\u50a8\u7684\u65e5\u5fd7\u8bb0\u5f55\u6570\u91cf(\u9ed8\u8ba4100000\u6761)\u3002"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"reserved_log_items")," \u2014 \u5728\u538b\u7f29\u4e4b\u524d\u9700\u8981\u5b58\u50a8\u591a\u5c11\u534f\u8c03\u65e5\u5fd7\u8bb0\u5f55(\u9ed8\u8ba4100000)\u3002"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"snapshot_distance")," \u2014 ClickHouse Keeper\u521b\u5efa\u65b0\u5feb\u7167\u7684\u9891\u7387(\u4ee5\u65e5\u5fd7\u8bb0\u5f55\u7684\u6570\u91cf\u4e3a\u5355\u4f4d)(\u9ed8\u8ba4100000)\u3002"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"snapshots_to_keep")," \u2014 \u4fdd\u7559\u591a\u5c11\u4e2a\u5feb\u7167(\u9ed8\u8ba4\u503c:3)\u3002"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"stale_log_gap")," \u2014 \u5f53leader\u8ba4\u4e3afollower\u8fc7\u65f6\u5e76\u53d1\u9001\u5feb\u7167\u7ed9follower\u800c\u4e0d\u662f\u65e5\u5fd7\u65f6\u7684\u9608\u503c(\u9ed8\u8ba4\u503c:10000)\u3002"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"fresh_log_gap")," \u2014 \u5f53\u8282\u70b9\u53d8\u6210\u65b0\u9c9c\u65f6\u7684\u95f4\u9694(\u9ed8\u8ba4\u503c:200)\u3002"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"max_requests_batch_size")," - \u53d1\u9001\u5230RAFT\u4e4b\u524d\u7684\u6700\u5927\u6279\u91cf\u8bf7\u6c42\u6570(\u9ed8\u8ba4\u503c:100)\u3002"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"force_sync")," \u2014 \u5728\u6bcf\u6b21\u5199\u5165\u534f\u8c03\u65e5\u5fd7\u65f6\u662f\u5426\u8c03\u7528' fsync '(\u9ed8\u8ba4\u503c:true)\u3002"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"quorum_reads")," \u2014 \u901a\u8fc7\u6574\u4e2aRAFT\u5171\u8bc6\u4ee5\u7c7b\u4f3c\u7684\u901f\u5ea6\u6267\u884c\u8bfb\u8bf7\u6c42\u548c\u5199\u8bf7\u6c42(\u9ed8\u8ba4\u503c:false)\u3002"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"raft_logs_level")," \u2014 \u5173\u4e8e\u534f\u8c03\u7684\u6587\u672c\u65e5\u5fd7\u7ea7\u522b (trace, debug, \u7b49\u7b49) (\u9ed8\u8ba4: system default)."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"auto_forwarding")," \u2014 \u5141\u8bb8\u5c06follower\u7684\u8bf7\u6c42\u8f6c\u53d1\u5230leader (\u9ed8\u8ba4: true)."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"shutdown_timeout")," \u2014 \u7b49\u5f85\u5185\u90e8\u8fde\u63a5\u5b8c\u6210\u5e76\u5173\u95ed(ms)(\u9ed8\u8ba4\u503c:5000)\u3002"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"startup_timeout")," \u2014 \u5982\u679c\u670d\u52a1\u5668\u5728\u6307\u5b9a\u7684\u8d85\u65f6\u65f6\u95f4\u5185\u6ca1\u6709\u8fde\u63a5\u5230\u5176\u4ed6\u4ef2\u88c1\u53c2\u4e0e\u8005\uff0c\u5b83\u5c06\u7ec8\u6b62(ms)(\u9ed8\u8ba4\u503c:30000)\u3002"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"four_letter_word_white_list"),' \u2014 4\u4e2a\u5b57\u6bcd\u7684\u767d\u540d\u5355\u5217\u8868 (\u9ed8\u8ba4: "conf,cons,crst,envi,ruok,srst,srvr,stat,wchc,wchs,dirs,mntr,isro").')),(0,o.kt)("p",null,"\u4ef2\u88c1\u914d\u7f6e\u4f4d\u4e8e ",(0,o.kt)("inlineCode",{parentName:"p"},"<keeper_server>.<raft_configuration>")," \u90e8\u5206\uff0c\u5e76\u4e14\u4fdd\u62a4\u4e00\u4e9b\u63cf\u8ff0"),(0,o.kt)("p",null,"\u6574\u4e2a\u4ef2\u88c1\u7684\u552f\u4e00\u53c2\u6570\u662f\u201csecure\u201d\uff0c\u5b83\u4e3a\u4ef2\u88c1\u53c2\u4e0e\u8005\u4e4b\u95f4\u7684\u901a\u4fe1\u542f\u7528\u52a0\u5bc6\u8fde\u63a5\u3002\u5982\u679c\u8282\u70b9\u4e4b\u95f4\u7684\u5185\u90e8\u901a\u4fe1\u9700\u8981SSL\u8fde\u63a5\uff0c\u5219\u8be5\u53c2\u6570\u53ef\u4ee5\u8bbe\u7f6e\u4e3a\u201ctrue\u201d\uff0c\u5426\u5219\u4e0d\u6307\u5b9a\u3002"),(0,o.kt)("p",null,"\u6bcf\u4e2a",(0,o.kt)("inlineCode",{parentName:"p"},"<server>"),"\u7684\u4e3b\u8981\u53c2\u6570\u662f:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"id")," \u2014 \u4ef2\u88c1\u4e2d\u7684\u670d\u52a1\u5668\u6807\u8bc6\u7b26\u3002"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"hostname")," \u2014 \u653e\u7f6e\u8be5\u670d\u52a1\u5668\u7684\u4e3b\u673a\u540d\u3002"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"port")," \u2014 \u670d\u52a1\u5668\u76d1\u542c\u8fde\u63a5\u7684\u7aef\u53e3\u3002")),(0,o.kt)("p",null,"\u5728",(0,o.kt)("a",{parentName:"p",href:"https://github.com/ClickHouse/ClickHouse/tree/master/tests/integration"},"integration tests"),"\u53ef\u4ee5\u627e\u5230\u5e26\u6709 ",(0,o.kt)("inlineCode",{parentName:"p"},"test_keeper_")," \u524d\u7f00\u76843\u4e2a\u8282\u70b9\u7684\u4ef2\u88c1\u914d\u7f6e\u793a\u4f8b. \u670d\u52a1\u914d\u7f6e\u4e3e\u4f8b\u5982\u4e0b #1:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-xml"},"<keeper_server>\n    <tcp_port>2181</tcp_port>\n    <server_id>1</server_id>\n    <log_storage_path>/var/lib/clickhouse/coordination/log</log_storage_path>\n    <snapshot_storage_path>/var/lib/clickhouse/coordination/snapshots</snapshot_storage_path>\n\n    <coordination_settings>\n        <operation_timeout_ms>10000</operation_timeout_ms>\n        <session_timeout_ms>30000</session_timeout_ms>\n        <raft_logs_level>trace</raft_logs_level>\n    </coordination_settings>\n\n    <raft_configuration>\n        <server>\n            <id>1</id>\n            <hostname>zoo1</hostname>\n            <port>9444</port>\n        </server>\n        <server>\n            <id>2</id>\n            <hostname>zoo2</hostname>\n            <port>9444</port>\n        </server>\n        <server>\n            <id>3</id>\n            <hostname>zoo3</hostname>\n            <port>9444</port>\n        </server>\n    </raft_configuration>\n</keeper_server>\n")),(0,o.kt)("h2",{id:"how-to-run"},"\u5982\u4f55\u8fd0\u884c"),(0,o.kt)("p",null,"ClickHouse Keeper\u88ab\u7ed1\u5b9a\u5230ClickHouse\u670d\u52a1\u5668\u5305\u4e2d\uff0c\u53ea\u9700\u6dfb\u52a0\u914d\u7f6e' <keeper_server> '\uff0c\u5e76\u50cf\u5f80\u5e38\u4e00\u6837\u542f\u52a8ClickHouse\u670d\u52a1\u5668\u3002\u5982\u679c\u4f60\u60f3\u8fd0\u884c\u72ec\u7acb\u7684ClickHouse Keeper\uff0c\u4f60\u53ef\u4ee5\u7528\u7c7b\u4f3c\u7684\u65b9\u5f0f\u542f\u52a8\u5b83:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"clickhouse-keeper --config /etc/your_path_to_config/config.xml\n")),(0,o.kt)("p",null,"\u5982\u679c\u4f60\u6ca1\u6709\u7b26\u53f7\u94fe\u63a5(' clickhouse-keeper ')\uff0c\u4f60\u53ef\u4ee5\u521b\u5efa\u5b83\u6216\u6307\u5b9a' keeper '\u4f5c\u4e3a\u53c2\u6570:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"clickhouse keeper --config /etc/your_path_to_config/config.xml\n")),(0,o.kt)("h2",{id:"four-letter-word-commands"},"\u56db\u5b57\u6bcd\u547d\u4ee4"),(0,o.kt)("p",null,"ClickHouse Keeper\u8fd8\u63d0\u4f9b\u4e86\u4e0eZookeeper\u51e0\u4e4e\u76f8\u540c\u76844lw\u547d\u4ee4\u3002\u6bcf\u4e2a\u547d\u4ee4\u75314\u4e2a\u5b57\u6bcd\u7ec4\u6210\uff0c\u5982\u201cmntr\u201d\u3001\u201cstat\u201d\u7b49\u3002\u8fd8\u6709\u4e00\u4e9b\u66f4\u6709\u8da3\u7684\u547d\u4ee4:' stat '\u7ed9\u51fa\u4e86\u670d\u52a1\u5668\u548c\u8fde\u63a5\u5ba2\u6237\u7aef\u7684\u4e00\u822c\u4fe1\u606f\uff0c\u800c' srvr '\u548c' cons '\u5206\u522b\u7ed9\u51fa\u4e86\u670d\u52a1\u5668\u548c\u8fde\u63a5\u7684\u8be6\u7ec6\u4fe1\u606f\u3002"),(0,o.kt)("p",null,"4lw\u547d\u4ee4\u6709\u4e00\u4e2a\u767d\u540d\u5355\u914d\u7f6e\u201cfour_letter_word_white_list\u201d\uff0c\u5b83\u7684\u9ed8\u8ba4\u503c\u4e3a\u201cconf,cons,crst,envi,ruok,srst,srvr,stat,wchc,wchs,dirs,mntr,isro\u201d\u3002"),(0,o.kt)("p",null,"\u60a8\u53ef\u4ee5\u901a\u8fc7telnet\u6216nc\u5728\u5ba2\u6237\u7aef\u7aef\u53e3\u5411ClickHouse Keeper\u53d1\u51fa\u547d\u4ee4\u3002"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"echo mntr | nc localhost 9181\n")),(0,o.kt)("p",null,"\u4e0b\u9762\u662f4lw\u7684\u8be6\u7ec6\u547d\u4ee4:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"ruok"),": \u6d4b\u8bd5\u670d\u52a1\u5668\u8fd0\u884c\u65f6\u662f\u5426\u5904\u4e8e\u65e0\u9519\u8bef\u72b6\u6001\u3002\u5982\u679c\u670d\u52a1\u5668\u6b63\u5728\u8fd0\u884c\uff0c\u5b83\u5c06\u7528imok\u54cd\u5e94\u3002\u5426\u5219\u5b83\u5c06\u5b8c\u5168\u4e0d\u54cd\u5e94\u3002\u201cimok\u201d\u7684\u54cd\u5e94\u5e76\u4e0d\u4e00\u5b9a\u8868\u660e\u670d\u52a1\u5668\u5df2\u52a0\u5165\u4ef2\u88c1\uff0c\u53ea\u662f\u8868\u660e\u670d\u52a1\u5668\u8fdb\u7a0b\u5904\u4e8e\u6d3b\u52a8\u72b6\u6001\u5e76\u7ed1\u5b9a\u5230\u6307\u5b9a\u7684\u5ba2\u6237\u7aef\u7aef\u53e3\u3002\u4f7f\u7528\u201cstat\u201d\u83b7\u53d6\u72b6\u6001wrt\u4ef2\u88c1\u548c\u5ba2\u6237\u7aef\u8fde\u63a5\u4fe1\u606f\u7684\u8be6\u7ec6\u4fe1\u606f\u3002")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"imok\n")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"mntr"),": \u8f93\u51fa\u53ef\u7528\u4e8e\u76d1\u89c6\u96c6\u7fa4\u8fd0\u884c\u72b6\u51b5\u7684\u53d8\u91cf\u5217\u8868\u3002")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"zk_version      v21.11.1.1-prestable-7a4a0b0edef0ad6e0aa662cd3b90c3f4acf796e7\nzk_avg_latency  0\nzk_max_latency  0\nzk_min_latency  0\nzk_packets_received     68\nzk_packets_sent 68\nzk_num_alive_connections        1\nzk_outstanding_requests 0\nzk_server_state leader\nzk_znode_count  4\nzk_watch_count  1\nzk_ephemerals_count     0\nzk_approximate_data_size        723\nzk_open_file_descriptor_count   310\nzk_max_file_descriptor_count    10240\nzk_followers    0\nzk_synced_followers     0\n")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"srvr"),": \u5217\u51fa\u670d\u52a1\u5668\u7684\u5b8c\u6574\u8be6\u7ec6\u4fe1\u606f\u3002")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"ClickHouse Keeper version: v21.11.1.1-prestable-7a4a0b0edef0ad6e0aa662cd3b90c3f4acf796e7\nLatency min/avg/max: 0/0/0\nReceived: 2\nSent : 2\nConnections: 1\nOutstanding: 0\nZxid: 34\nMode: leader\nNode count: 4\n")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"stat"),": \u5217\u51fa\u670d\u52a1\u5668\u548c\u8fde\u63a5\u5ba2\u6237\u673a\u7684\u7b80\u8981\u8be6\u7ec6\u4fe1\u606f\u3002")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"ClickHouse Keeper version: v21.11.1.1-prestable-7a4a0b0edef0ad6e0aa662cd3b90c3f4acf796e7\nClients:\n 192.168.1.1:52852(recved=0,sent=0)\n 192.168.1.1:52042(recved=24,sent=48)\nLatency min/avg/max: 0/0/0\nReceived: 4\nSent : 4\nConnections: 1\nOutstanding: 0\nZxid: 36\nMode: leader\nNode count: 4\n")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"srst"),": \u91cd\u7f6e\u670d\u52a1\u5668\u7edf\u8ba1\u6570\u636e\u3002\u8be5\u547d\u4ee4\u5c06\u5f71\u54cd' srvr '\uff0c ' mntr '\u548c' stat '\u7684\u7ed3\u679c\u3002")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"Server stats reset.\n")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"conf"),": \u6253\u5370\u670d\u52a1\u914d\u7f6e\u8be6\u7ec6\u4fe1\u606f\u3002")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"server_id=1\ntcp_port=2181\nfour_letter_word_white_list=*\nlog_storage_path=./coordination/logs\nsnapshot_storage_path=./coordination/snapshots\nmax_requests_batch_size=100\nsession_timeout_ms=30000\noperation_timeout_ms=10000\ndead_session_check_period_ms=500\nheart_beat_interval_ms=500\nelection_timeout_lower_bound_ms=1000\nelection_timeout_upper_bound_ms=2000\nreserved_log_items=1000000000000000\nsnapshot_distance=10000\nauto_forwarding=true\nshutdown_timeout=5000\nstartup_timeout=240000\nraft_logs_level=information\nsnapshots_to_keep=3\nrotate_log_storage_interval=100000\nstale_log_gap=10000\nfresh_log_gap=200\nmax_requests_batch_size=100\nquorum_reads=false\nforce_sync=false\ncompress_logs=true\ncompress_snapshots_with_zstd_format=true\nconfiguration_change_tries_count=20\n")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"cons"),": \u5217\u51fa\u6240\u6709\u8fde\u63a5\u5230\u6b64\u670d\u52a1\u5668\u7684\u5ba2\u6237\u7aef\u7684\u5b8c\u6574\u8fde\u63a5/\u4f1a\u8bdd\u8be6\u7ec6\u4fe1\u606f\u3002\u5305\u62ec\u63a5\u6536/\u53d1\u9001\u7684\u5305\u6570\u3001\u4f1a\u8bddid\u3001\u64cd\u4f5c\u5ef6\u8fdf\u3001\u6700\u540e\u6267\u884c\u7684\u64cd\u4f5c\u7b49\u4fe1\u606f\u3002")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"}," 192.168.1.1:52163(recved=0,sent=0,sid=0xffffffffffffffff,lop=NA,est=1636454787393,to=30000,lzxid=0xffffffffffffffff,lresp=0,llat=0,minlat=0,avglat=0,maxlat=0)\n 192.168.1.1:52042(recved=9,sent=18,sid=0x0000000000000001,lop=List,est=1636454739887,to=30000,lcxid=0x0000000000000005,lzxid=0x0000000000000005,lresp=1636454739892,llat=0,minlat=0,avglat=0,maxlat=0)\n")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"crst"),": \u91cd\u7f6e\u6240\u6709\u8fde\u63a5\u7684\u8fde\u63a5/\u4f1a\u8bdd\u7edf\u8ba1\u4fe1\u606f\u3002")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"Connection stats reset.\n")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"envi"),": \u6253\u5370\u670d\u52a1\u73af\u5883\u8be6\u7ec6\u4fe1\u606f")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"Environment:\nclickhouse.keeper.version=v21.11.1.1-prestable-7a4a0b0edef0ad6e0aa662cd3b90c3f4acf796e7\nhost.name=ZBMAC-C02D4054M.local\nos.name=Darwin\nos.arch=x86_64\nos.version=19.6.0\ncpu.count=12\nuser.name=root\nuser.home=/Users/JackyWoo/\nuser.dir=/Users/JackyWoo/project/jd/clickhouse/cmake-build-debug/programs/\nuser.tmp=/var/folders/b4/smbq5mfj7578f2jzwn602tt40000gn/T/\n")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"dirs"),": \u4ee5\u5b57\u8282\u4e3a\u5355\u4f4d\u663e\u793a\u5feb\u7167\u548c\u65e5\u5fd7\u6587\u4ef6\u7684\u603b\u5927\u5c0f")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"snapshot_dir_size: 0\nlog_dir_size: 3875\n")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"isro"),": \u6d4b\u8bd5\u670d\u52a1\u5668\u662f\u5426\u4ee5\u53ea\u8bfb\u6a21\u5f0f\u8fd0\u884c\u3002\u5982\u679c\u5904\u4e8e\u53ea\u8bfb\u6a21\u5f0f\uff0c\u670d\u52a1\u5668\u5c06\u54cd\u5e94\u201cro\u201d\uff0c\u5982\u679c\u4e0d\u662f\u53ea\u8bfb\u6a21\u5f0f\uff0c\u5219\u54cd\u5e94\u201crw\u201d\u3002")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"rw\n")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"wchs"),": \u5217\u51fa\u670d\u52a1\u5668\u7684\u76d1\u89c6\u7684\u7b80\u8981\u4fe1\u606f\u3002")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"1 connections watching 1 paths\nTotal watches:1\n")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"wchc"),": \u6309\u4f1a\u8bdd\u5217\u51fa\u670d\u52a1\u5668\u7684\u76d1\u89c6\u7684\u8be6\u7ec6\u4fe1\u606f\u3002\u8fd9\u5c06\u8f93\u51fa\u4e00\u4e2a\u4f1a\u8bdd(\u8fde\u63a5)\u5217\u8868\u548c\u76f8\u5173\u7684\u76d1\u89c6(\u8def\u5f84)\u3002\u6ce8\u610f\uff0c\u6839\u636e\u76d1\u89c6\u7684\u6570\u91cf\uff0c\u6b64\u64cd\u4f5c\u53ef\u80fd\u4f1a\u5f88\u6602\u8d35(\u5373\u5f71\u54cd\u670d\u52a1\u5668\u6027\u80fd)\uff0c\u8bf7\u8c28\u614e\u4f7f\u7528\u3002")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"0x0000000000000001\n    /clickhouse/task_queue/ddl\n")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"wchp"),": \u6309\u8def\u5f84\u5217\u51fa\u6709\u5173\u670d\u52a1\u5668\u7684\u76d1\u89c6\u7684\u8be6\u7ec6\u4fe1\u606f\u3002\u8fd9\u5c06\u8f93\u51fa\u4e00\u4e2a\u5e26\u6709\u5173\u8054\u4f1a\u8bdd\u7684\u8def\u5f84(znode)\u5217\u8868\u3002\u6ce8\u610f\uff0c\u6839\u636e\u76d1\u89c6\u7684\u6570\u91cf\uff0c\u6b64\u64cd\u4f5c\u53ef\u80fd\u6602\u8d35(\u5373\u5f71\u54cd\u670d\u52a1\u5668\u6027\u80fd)\uff0c\u8bf7\u8c28\u614e\u4f7f\u7528\u3002")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"/clickhouse/task_queue/ddl\n    0x0000000000000001\n")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"dump"),": \u5217\u51fa\u672a\u5b8c\u6210\u7684\u4f1a\u8bdd\u548c\u4e34\u65f6\u8282\u70b9\u3002\u8fd9\u53ea\u5bf9\u9886\u5bfc\u8005\u6709\u6548\u3002")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"Sessions dump (2):\n0x0000000000000001\n0x0000000000000002\nSessions with Ephemerals (1):\n0x0000000000000001\n /clickhouse/task_queue/ddl\n")),(0,o.kt)("h2",{id:"migration-from-zookeeper"},"[\u5b9e\u73b0]"," \u4eceZooKeeper\u8fc1\u79fb"),(0,o.kt)("p",null,"\u4eceZooKeeper\u65e0\u7f1d\u8fc1\u79fb\u5230ClickHouse Keeper\u662f\u4e0d\u53ef\u80fd\u7684\uff0c\u4f60\u5fc5\u987b\u505c\u6b62\u4f60\u7684ZooKeeper\u96c6\u7fa4\uff0c\u8f6c\u6362\u6570\u636e\u5e76\u542f\u52a8ClickHouse Keeper\u3002' ClickHouse - Keeper -converter '\u5de5\u5177\u5141\u8bb8\u5c06ZooKeeper\u65e5\u5fd7\u548c\u5feb\u7167\u8f6c\u6362\u4e3aClickHouse Keeper\u5feb\u7167\u3002\u5b83\u53ea\u9002\u7528\u4e8eZooKeeper \u5927\u4e8e 3.4\u3002\u8fc1\u79fb\u7684\u6b65\u9aa4:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"\u505c\u6389ZooKeeper\u8282\u70b9.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"\u53ef\u9009\uff0c\u4f46\u5efa\u8bae:\u627e\u5230ZooKeeper leader\u8282\u70b9\uff0c\u91cd\u65b0\u542f\u505c\u3002\u5b83\u4f1a\u5f3a\u5236ZooKeeper\u521b\u5efa\u4e00\u81f4\u7684\u5feb\u7167\u3002")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"\u5728leader\u8282\u70b9\u8fd0\u884c",(0,o.kt)("inlineCode",{parentName:"p"},"clickhouse-keeper-converter"),", \u5982\u4e0b:"))),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"clickhouse-keeper-converter --zookeeper-logs-dir /var/lib/zookeeper/version-2 --zookeeper-snapshots-dir /var/lib/zookeeper/version-2 --output-dir /path/to/clickhouse/keeper/snapshots\n")),(0,o.kt)("ol",{start:4},(0,o.kt)("li",{parentName:"ol"},"\u5c06\u5feb\u7167\u590d\u5236\u5230\u914d\u7f6e\u4e86\u201ckeeper\u201d\u7684ClickHouse\u670d\u52a1\u5668\u8282\u70b9\uff0c\u6216\u8005\u542f\u52a8ClickHouse keeper\u800c\u4e0d\u662fZooKeeper\u3002\u5feb\u7167\u5fc5\u987b\u5728\u6240\u6709\u8282\u70b9\u4e0a\u6301\u4e45\u4fdd\u5b58\uff0c\u5426\u5219\uff0c\u7a7a\u8282\u70b9\u53ef\u80fd\u66f4\u5feb\uff0c\u5176\u4e2d\u4e00\u4e2a\u8282\u70b9\u53ef\u80fd\u6210\u4e3aleader.")),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://clickhouse.com/docs/en/operations/clickhouse-keeper/"},"Original article")," "))}m.isMDXComponent=!0}}]);