"use strict";(self.webpackChunkclickhouse=self.webpackChunkclickhouse||[]).push([[3468],{3905:function(t,e,a){a.d(e,{Zo:function(){return u},kt:function(){return s}});var n=a(67294);function l(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function r(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function i(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?r(Object(a),!0).forEach((function(e){l(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function o(t,e){if(null==t)return{};var a,n,l=function(t,e){if(null==t)return{};var a,n,l={},r=Object.keys(t);for(n=0;n<r.length;n++)a=r[n],e.indexOf(a)>=0||(l[a]=t[a]);return l}(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(n=0;n<r.length;n++)a=r[n],e.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(t,a)&&(l[a]=t[a])}return l}var m=n.createContext({}),p=function(t){var e=n.useContext(m),a=e;return t&&(a="function"==typeof t?t(e):i(i({},e),t)),a},u=function(t){var e=p(t.components);return n.createElement(m.Provider,{value:e},t.children)},d={inlineCode:"code",wrapper:function(t){var e=t.children;return n.createElement(n.Fragment,{},e)}},k=n.forwardRef((function(t,e){var a=t.components,l=t.mdxType,r=t.originalType,m=t.parentName,u=o(t,["components","mdxType","originalType","parentName"]),k=p(a),s=l,N=k["".concat(m,".").concat(s)]||k[s]||d[s]||r;return a?n.createElement(N,i(i({ref:e},u),{},{components:a})):n.createElement(N,i({ref:e},u))}));function s(t,e){var a=arguments,l=e&&e.mdxType;if("string"==typeof t||l){var r=a.length,i=new Array(r);i[0]=k;var o={};for(var m in e)hasOwnProperty.call(e,m)&&(o[m]=e[m]);o.originalType=t,o.mdxType="string"==typeof t?t:l,i[1]=o;for(var p=2;p<r;p++)i[p]=a[p];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}k.displayName="MDXCreateElement"},4794:function(t,e,a){a.r(e),a.d(e,{assets:function(){return u},contentTitle:function(){return m},default:function(){return s},frontMatter:function(){return o},metadata:function(){return p},toc:function(){return d}});var n=a(87462),l=a(63366),r=(a(67294),a(3905)),i=["components"],o={},m="\u65f6\u95f4\u65e5\u671f\u51fd\u6570",p={unversionedId:"zh/sql-reference/functions/date-time-functions",id:"zh/sql-reference/functions/date-time-functions",title:"\u65f6\u95f4\u65e5\u671f\u51fd\u6570",description:"shi-jian-ri-qi-han-shu}",source:"@site/docs/zh/sql-reference/functions/date-time-functions.md",sourceDirName:"zh/sql-reference/functions",slug:"/zh/sql-reference/functions/date-time-functions",permalink:"/docs/zh/sql-reference/functions/date-time-functions",editUrl:"https://github.com/ClickHouse/ClickHouse/tree/master/docs/zh/sql-reference/functions/date-time-functions.md",tags:[],version:"current",frontMatter:{},sidebar:"chinese",previous:{title:"\u6761\u4ef6\u51fd\u6570",permalink:"/docs/zh/sql-reference/functions/conditional-functions"},next:{title:"\u7f16\u7801\u51fd\u6570",permalink:"/docs/zh/sql-reference/functions/encoding-functions"}},u={},d=[{value:"toTimeZone",id:"totimezone",level:2},{value:"toYear",id:"toyear",level:2},{value:"toQuarter",id:"toquarter",level:2},{value:"toMonth",id:"tomonth",level:2},{value:"toDayOfYear",id:"todayofyear",level:2},{value:"toDayOfMonth",id:"todayofmonth",level:2},{value:"toDayOfWeek",id:"todayofweek",level:2},{value:"toHour",id:"tohour",level:2},{value:"toMinute",id:"tominute",level:2},{value:"toSecond",id:"tosecond",level:2},{value:"toUnixTimestamp",id:"to-unix-timestamp",level:2},{value:"toStartOfYear",id:"tostartofyear",level:2},{value:"toStartOfISOYear",id:"tostartofisoyear",level:2},{value:"toStartOfQuarter",id:"tostartofquarter",level:2},{value:"toStartOfMonth",id:"tostartofmonth",level:2},{value:"toMonday",id:"tomonday",level:2},{value:"toStartOfWeek(t[,mode])",id:"tostartofweek",level:2},{value:"toStartOfDay",id:"tostartofday",level:2},{value:"toStartOfHour",id:"tostartofhour",level:2},{value:"toStartOfMinute",id:"tostartofminute",level:2},{value:"toStartOfSecond",id:"tostartofsecond",level:2},{value:"toStartOfFiveMinutes",id:"tostartoffiveminutes",level:2},{value:"toStartOfTenMinutes",id:"tostartoftenminutes",level:2},{value:"toStartOfFifteenMinutes",id:"tostartoffifteenminutes",level:2},{value:"toStartOfInterval(time_or_data,\u95f4\u9694x\u5355\u4f4d[,time_zone])",id:"tostartofintervaltime-or-data-interval-x-unit-time-zone",level:2},{value:"toTime",id:"totime",level:2},{value:"toRelativeYearNum",id:"torelativeyearnum",level:2},{value:"toRelativeQuarterNum",id:"torelativequarternum",level:2},{value:"toRelativeMonthNum",id:"torelativemonthnum",level:2},{value:"toRelativeWeekNum",id:"torelativeweeknum",level:2},{value:"toRelativeDayNum",id:"torelativedaynum",level:2},{value:"toRelativeHourNum",id:"torelativehournum",level:2},{value:"toRelativeMinuteNum",id:"torelativeminutenum",level:2},{value:"toRelativeSecondNum",id:"torelativesecondnum",level:2},{value:"toISOYear",id:"toisoyear",level:2},{value:"toISOWeek",id:"toisoweek",level:2},{value:"toWeek(date[,mode])",id:"toweekdatemode",level:2},{value:"toYearWeek(date[,mode])",id:"toyearweekdatemode",level:2},{value:"date_trunc",id:"date_trunc",level:2},{value:"today",id:"today",level:2},{value:"yesterday",id:"yesterday",level:2},{value:"timeSlot",id:"timeslot",level:2},{value:"toYYYYMM",id:"toyyyymm",level:2},{value:"toYYYYMMDD",id:"toyyyymmdd",level:2},{value:"toYYYYMMDDhhmmss",id:"toyyyymmddhhmmss",level:2},{value:"addYears, addMonths, addWeeks, addDays, addHours, addMinutes, addSeconds, addQuarters",id:"addyears-addmonths-addweeks-adddays-addhours-addminutes-addseconds-addquarters",level:2},{value:"subtractYears,subtractMonths,subtractWeeks,subtractDays,subtractours,subtractMinutes,subtractSeconds,subtractQuarters",id:"subtractyears-subtractmonths-subtractweeks-subtractdays-subtracthours-subtractminutes-subtractseconds-subtractquarters",level:2},{value:"dateDiff",id:"datediff",level:2},{value:"timeSlots(StartTime, Duration,[, Size])",id:"timeslotsstarttime-duration-size",level:2},{value:"formatDateTime",id:"formatdatetime",level:2},{value:"FROM_UNIXTIME",id:"from_unixtime",level:2}],k={toc:d};function s(t){var e=t.components,a=(0,l.Z)(t,i);return(0,r.kt)("wrapper",(0,n.Z)({},k,a,{components:e,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"shi-jian-ri-qi-han-shu"},"\u65f6\u95f4\u65e5\u671f\u51fd\u6570"),(0,r.kt)("p",null,"\u652f\u6301\u65f6\u533a\u3002"),(0,r.kt)("p",null,"\u6240\u6709\u7684\u65f6\u95f4\u65e5\u671f\u51fd\u6570\u90fd\u53ef\u4ee5\u5728\u7b2c\u4e8c\u4e2a\u53ef\u9009\u53c2\u6570\u4e2d\u63a5\u53d7\u65f6\u533a\u53c2\u6570\u3002\u793a\u4f8b\uff1aAsia / Yekaterinburg\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u5b83\u4eec\u4f7f\u7528\u6307\u5b9a\u7684\u65f6\u533a\u800c\u4e0d\u662f\u672c\u5730\uff08\u9ed8\u8ba4\uff09\u65f6\u533a\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT\n    toDateTime('2016-06-15 23:00:00') AS time,\n    toDate(time) AS date_local,\n    toDate(time, 'Asia/Yekaterinburg') AS date_yekat,\n    toString(time, 'US/Samoa') AS time_samoa\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500time\u2500\u252c\u2500date_local\u2500\u252c\u2500date_yekat\u2500\u252c\u2500time_samoa\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 2016-06-15 23:00:00 \u2502 2016-06-15 \u2502 2016-06-16 \u2502 2016-06-15 09:00:00 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n")),(0,r.kt)("p",null,"\u4ec5\u652f\u6301\u4e0eUTC\u76f8\u5dee\u4e00\u6574\u5c0f\u65f6\u7684\u65f6\u533a\u3002"),(0,r.kt)("h2",{id:"totimezone"},"toTimeZone"),(0,r.kt)("p",null,"\u5c06Date\u6216DateTime\u8f6c\u6362\u4e3a\u6307\u5b9a\u7684\u65f6\u533a\u3002 \u65f6\u533a\u662fDate/DateTime\u7c7b\u578b\u7684\u5c5e\u6027\u3002 \u8868\u5b57\u6bb5\u6216\u7ed3\u679c\u96c6\u7684\u5217\u7684\u5185\u90e8\u503c\uff08\u79d2\u6570\uff09\u4e0d\u4f1a\u66f4\u6539\uff0c\u5217\u7684\u7c7b\u578b\u4f1a\u66f4\u6539\uff0c\u5e76\u4e14\u5176\u5b57\u7b26\u4e32\u8868\u793a\u5f62\u5f0f\u4e5f\u4f1a\u76f8\u5e94\u66f4\u6539\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT\n    toDateTime('2019-01-01 00:00:00', 'UTC') AS time_utc,\n    toTypeName(time_utc) AS type_utc,\n    toInt32(time_utc) AS int32utc,\n    toTimeZone(time_utc, 'Asia/Yekaterinburg') AS time_yekat,\n    toTypeName(time_yekat) AS type_yekat,\n    toInt32(time_yekat) AS int32yekat,\n    toTimeZone(time_utc, 'US/Samoa') AS time_samoa,\n    toTypeName(time_samoa) AS type_samoa,\n    toInt32(time_samoa) AS int32samoa\nFORMAT Vertical;\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-text"},"Row 1:\n\u2500\u2500\u2500\u2500\u2500\u2500\ntime_utc:   2019-01-01 00:00:00\ntype_utc:   DateTime('UTC')\nint32utc:   1546300800\ntime_yekat: 2019-01-01 05:00:00\ntype_yekat: DateTime('Asia/Yekaterinburg')\nint32yekat: 1546300800\ntime_samoa: 2018-12-31 13:00:00\ntype_samoa: DateTime('US/Samoa')\nint32samoa: 1546300800\n")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"toTimeZone(time_utc, 'Asia/Yekaterinburg')")," \u628a ",(0,r.kt)("inlineCode",{parentName:"p"},"DateTime('UTC')")," \u7c7b\u578b\u8f6c\u6362\u4e3a ",(0,r.kt)("inlineCode",{parentName:"p"},"DateTime('Asia/Yekaterinburg')"),". \u5185\u90e8\u503c (Unixtimestamp) 1546300800 \u4fdd\u6301\u4e0d\u53d8, \u4f46\u662f\u5b57\u7b26\u4e32\u8868\u793a(toString() \u51fd\u6570\u7684\u7ed3\u679c\u503c) \u7531 ",(0,r.kt)("inlineCode",{parentName:"p"},"time_utc:   2019-01-01 00:00:00")," \u8f6c\u6362\u4e3ao ",(0,r.kt)("inlineCode",{parentName:"p"},"time_yekat: 2019-01-01 05:00:00"),"."),(0,r.kt)("h2",{id:"toyear"},"toYear"),(0,r.kt)("p",null,"\u5c06Date\u6216DateTime\u8f6c\u6362\u4e3a\u5305\u542b\u5e74\u4efd\u7f16\u53f7\uff08AD\uff09\u7684UInt16\u7c7b\u578b\u7684\u6570\u5b57\u3002"),(0,r.kt)("h2",{id:"toquarter"},"toQuarter"),(0,r.kt)("p",null,"\u5c06Date\u6216DateTime\u8f6c\u6362\u4e3a\u5305\u542b\u5b63\u5ea6\u7f16\u53f7\u7684UInt8\u7c7b\u578b\u7684\u6570\u5b57\u3002"),(0,r.kt)("h2",{id:"tomonth"},"toMonth"),(0,r.kt)("p",null,"\u5c06Date\u6216DateTime\u8f6c\u6362\u4e3a\u5305\u542b\u6708\u4efd\u7f16\u53f7\uff081-12\uff09\u7684UInt8\u7c7b\u578b\u7684\u6570\u5b57\u3002"),(0,r.kt)("h2",{id:"todayofyear"},"toDayOfYear"),(0,r.kt)("p",null,"\u5c06Date\u6216DateTime\u8f6c\u6362\u4e3a\u5305\u542b\u4e00\u5e74\u4e2d\u7684\u67d0\u4e00\u5929\u7684\u7f16\u53f7\u7684UInt16\uff081-366\uff09\u7c7b\u578b\u7684\u6570\u5b57\u3002"),(0,r.kt)("h2",{id:"todayofmonth"},"toDayOfMonth"),(0,r.kt)("p",null,"\u5c06Date\u6216DateTime\u8f6c\u6362\u4e3a\u5305\u542b\u4e00\u6708\u4e2d\u7684\u67d0\u4e00\u5929\u7684\u7f16\u53f7\u7684UInt8\uff081-31\uff09\u7c7b\u578b\u7684\u6570\u5b57\u3002"),(0,r.kt)("h2",{id:"todayofweek"},"toDayOfWeek"),(0,r.kt)("p",null,"\u5c06Date\u6216DateTime\u8f6c\u6362\u4e3a\u5305\u542b\u4e00\u5468\u4e2d\u7684\u67d0\u4e00\u5929\u7684\u7f16\u53f7\u7684UInt8\uff08\u5468\u4e00\u662f1, \u5468\u65e5\u662f7\uff09\u7c7b\u578b\u7684\u6570\u5b57\u3002"),(0,r.kt)("h2",{id:"tohour"},"toHour"),(0,r.kt)("p",null,"\u5c06DateTime\u8f6c\u6362\u4e3a\u5305\u542b24\u5c0f\u65f6\u5236\uff080-23\uff09\u5c0f\u65f6\u6570\u7684UInt8\u6570\u5b57\u3002\n\u8fd9\u4e2a\u51fd\u6570\u5047\u8bbe\u5982\u679c\u65f6\u949f\u5411\u524d\u79fb\u52a8\uff0c\u5b83\u662f\u4e00\u4e2a\u5c0f\u65f6\uff0c\u53d1\u751f\u5728\u51cc\u66682\u70b9\uff0c\u5982\u679c\u65f6\u949f\u88ab\u79fb\u56de\uff0c\u5b83\u662f\u4e00\u4e2a\u5c0f\u65f6\uff0c\u53d1\u751f\u5728\u51cc\u66683\u70b9\uff08\u8fd9\u5e76\u975e\u603b\u662f\u5982\u6b64 - \u5373\u4f7f\u5728\u83ab\u65af\u79d1\u65f6\u949f\u5728\u4e0d\u540c\u7684\u65f6\u95f4\u4e24\u6b21\u6539\u53d8\uff09\u3002"),(0,r.kt)("h2",{id:"tominute"},"toMinute"),(0,r.kt)("p",null,"\u5c06DateTime\u8f6c\u6362\u4e3a\u5305\u542b\u4e00\u5c0f\u65f6\u4e2d\u5206\u949f\u6570\uff080-59\uff09\u7684UInt8\u6570\u5b57\u3002"),(0,r.kt)("h2",{id:"tosecond"},"toSecond"),(0,r.kt)("p",null,"\u5c06DateTime\u8f6c\u6362\u4e3a\u5305\u542b\u4e00\u5206\u949f\u4e2d\u79d2\u6570\uff080-59\uff09\u7684UInt8\u6570\u5b57\u3002\n\u95f0\u79d2\u4e0d\u8ba1\u7b97\u5728\u5185\u3002"),(0,r.kt)("h2",{id:"to-unix-timestamp"},"toUnixTimestamp"),(0,r.kt)("p",null,"\u5bf9\u4e8eDateTime\u53c2\u6570\uff1a\u5c06\u503c\u8f6c\u6362\u4e3aUInt32\u7c7b\u578b\u7684\u6570\u5b57-Unix\u65f6\u95f4\u6233\uff08",(0,r.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/Unix_time%EF%BC%89%E3%80%82"},"https://en.wikipedia.org/wiki/Unix_time\uff09\u3002"),"\n\u5bf9\u4e8eString\u53c2\u6570\uff1a\u6839\u636e\u65f6\u533a\u5c06\u8f93\u5165\u5b57\u7b26\u4e32\u8f6c\u6362\u4e3a\u65e5\u671f\u65f6\u95f4\uff08\u53ef\u9009\u7684\u7b2c\u4e8c\u4e2a\u53c2\u6570\uff0c\u9ed8\u8ba4\u4f7f\u7528\u670d\u52a1\u5668\u65f6\u533a\uff09\uff0c\u5e76\u8fd4\u56de\u76f8\u5e94\u7684unix\u65f6\u95f4\u6233\u3002"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u8bed\u6cd5")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"toUnixTimestamp(datetime)\ntoUnixTimestamp(str, [timezone])\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u8fd4\u56de\u503c")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u8fd4\u56de unix timestamp.")),(0,r.kt)("p",null,"\u7c7b\u578b: ",(0,r.kt)("inlineCode",{parentName:"p"},"UInt32"),"."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u793a\u4f8b")),(0,r.kt)("p",null,"\u67e5\u8be2:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT toUnixTimestamp('2017-11-05 08:07:47', 'Asia/Tokyo') AS unix_timestamp\n")),(0,r.kt)("p",null,"\u7ed3\u679c:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-text"},"\u250c\u2500unix_timestamp\u2500\u2510\n\u2502     1509836867 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n")),(0,r.kt)("h2",{id:"tostartofyear"},"toStartOfYear"),(0,r.kt)("p",null,"\u5c06Date\u6216DateTime\u5411\u524d\u53d6\u6574\u5230\u672c\u5e74\u7684\u7b2c\u4e00\u5929\u3002\n\u8fd4\u56deDate\u7c7b\u578b\u3002"),(0,r.kt)("h2",{id:"tostartofisoyear"},"toStartOfISOYear"),(0,r.kt)("p",null,"\u5c06Date\u6216DateTime\u5411\u524d\u53d6\u6574\u5230ISO\u672c\u5e74\u7684\u7b2c\u4e00\u5929\u3002\n\u8fd4\u56deDate\u7c7b\u578b\u3002"),(0,r.kt)("h2",{id:"tostartofquarter"},"toStartOfQuarter"),(0,r.kt)("p",null,"\u5c06Date\u6216DateTime\u5411\u524d\u53d6\u6574\u5230\u672c\u5b63\u5ea6\u7684\u7b2c\u4e00\u5929\u3002\n\u8fd4\u56deDate\u7c7b\u578b\u3002"),(0,r.kt)("h2",{id:"tostartofmonth"},"toStartOfMonth"),(0,r.kt)("p",null,"\u5c06Date\u6216DateTime\u5411\u524d\u53d6\u6574\u5230\u672c\u6708\u7684\u7b2c\u4e00\u5929\u3002\n\u8fd4\u56deDate\u7c7b\u578b\u3002"),(0,r.kt)("p",null,'!!! \u6ce8\u610f "\u6ce8\u610f"\n\xa0\xa0\xa0\xa0\u89e3\u6790\u4e0d\u6b63\u786e\u65e5\u671f\u7684\u884c\u4e3a\u662f\u7279\u5b9a\u4e8e\u5b9e\u73b0\u7684\u3002 ClickHouse\u53ef\u80fd\u4f1a\u8fd4\u56de\u96f6\u65e5\u671f\uff0c\u629b\u51fa\u5f02\u5e38\u6216\u6267\u884c\xabnatural\xbb\u6ea2\u51fa\u3002'),(0,r.kt)("h2",{id:"tomonday"},"toMonday"),(0,r.kt)("p",null,"\u5c06Date\u6216DateTime\u5411\u524d\u53d6\u6574\u5230\u672c\u5468\u7684\u661f\u671f\u4e00\u3002\n\u8fd4\u56deDate\u7c7b\u578b\u3002"),(0,r.kt)("h2",{id:"tostartofweek"},"toStartOfWeek(t","[",",mode","]",")"),(0,r.kt)("p",null,"\u6309mode\u5c06Date\u6216DateTime\u5411\u524d\u53d6\u6574\u5230\u6700\u8fd1\u7684\u661f\u671f\u65e5\u6216\u661f\u671f\u4e00\u3002\n\u8fd4\u56deDate\u7c7b\u578b\u3002\nmode\u53c2\u6570\u7684\u5de5\u4f5c\u65b9\u5f0f\u4e0etoWeek()\u7684mode\u53c2\u6570\u5b8c\u5168\u76f8\u540c\u3002 \u5bf9\u4e8e\u5355\u53c2\u6570\u8bed\u6cd5\uff0cmode\u4f7f\u7528\u9ed8\u8ba4\u503c0\u3002"),(0,r.kt)("h2",{id:"tostartofday"},"toStartOfDay"),(0,r.kt)("p",null,"\u5c06DateTime\u5411\u524d\u53d6\u6574\u5230\u4eca\u5929\u7684\u5f00\u59cb\u3002"),(0,r.kt)("h2",{id:"tostartofhour"},"toStartOfHour"),(0,r.kt)("p",null,"\u5c06DateTime\u5411\u524d\u53d6\u6574\u5230\u5f53\u524d\u5c0f\u65f6\u7684\u5f00\u59cb\u3002"),(0,r.kt)("h2",{id:"tostartofminute"},"toStartOfMinute"),(0,r.kt)("p",null,"\u5c06DateTime\u5411\u524d\u53d6\u6574\u5230\u5f53\u524d\u5206\u949f\u7684\u5f00\u59cb\u3002"),(0,r.kt)("h2",{id:"tostartofsecond"},"toStartOfSecond"),(0,r.kt)("p",null,"\u5c06DateTime\u5411\u524d\u53d6\u6574\u5230\u5f53\u524d\u79d2\u6570\u7684\u5f00\u59cb\u3002"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u8bed\u6cd5")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"toStartOfSecond(value[, timezone])\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u53c2\u6570")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"value")," \u2014 \u65f6\u95f4\u548c\u65e5\u671f",(0,r.kt)("a",{parentName:"li",href:"/docs/zh/sql-reference/data-types/datetime64"},"DateTime64"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"timezone")," \u2014 \u8fd4\u56de\u503c\u7684",(0,r.kt)("a",{parentName:"li",href:"/docs/zh/operations/server-configuration-parameters/settings#server_configuration_parameters-timezone"},"Timezone")," (\u53ef\u9009\u53c2\u6570)\u3002 \u5982\u679c\u672a\u6307\u5b9a\u5c06\u4f7f\u7528 ",(0,r.kt)("inlineCode",{parentName:"li"},"value")," \u53c2\u6570\u7684\u65f6\u533a\u3002 ",(0,r.kt)("a",{parentName:"li",href:"/docs/zh/sql-reference/data-types/string"},"String"),"\u3002")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u8fd4\u56de\u503c")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u8f93\u5165\u503c\u6beb\u79d2\u90e8\u5206\u4e3a\u96f6\u3002")),(0,r.kt)("p",null,"\u7c7b\u578b: ",(0,r.kt)("a",{parentName:"p",href:"/docs/zh/sql-reference/data-types/datetime64"},"DateTime64"),"."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u793a\u4f8b")),(0,r.kt)("p",null,"\u4e0d\u6307\u5b9a\u65f6\u533a\u67e5\u8be2:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"WITH toDateTime64('2020-01-01 10:20:30.999', 3) AS dt64\nSELECT toStartOfSecond(dt64);\n")),(0,r.kt)("p",null,"\u7ed3\u679c:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-text"},"\u250c\u2500\u2500\u2500toStartOfSecond(dt64)\u2500\u2510\n\u2502 2020-01-01 10:20:30.000 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n")),(0,r.kt)("p",null,"\u6307\u5b9a\u65f6\u533a\u67e5\u8be2:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"WITH toDateTime64('2020-01-01 10:20:30.999', 3) AS dt64\nSELECT toStartOfSecond(dt64, 'Asia/Istanbul');\n")),(0,r.kt)("p",null,"\u7ed3\u679c:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-text"},"\u250c\u2500toStartOfSecond(dt64, 'Asia/Istanbul')\u2500\u2510\n\u2502                2020-01-01 13:20:30.000 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u53c2\u8003")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/docs/zh/operations/server-configuration-parameters/settings#server_configuration_parameters-timezone"},"Timezone")," \u670d\u52a1\u5668\u914d\u7f6e\u9009\u9879\u3002")),(0,r.kt)("h2",{id:"tostartoffiveminutes"},"toStartOfFiveMinutes"),(0,r.kt)("p",null,"\u5c06DateTime\u4ee5\u4e94\u5206\u949f\u4e3a\u5355\u4f4d\u5411\u524d\u53d6\u6574\u5230\u6700\u63a5\u8fd1\u7684\u65f6\u95f4\u70b9\u3002"),(0,r.kt)("h2",{id:"tostartoftenminutes"},"toStartOfTenMinutes"),(0,r.kt)("p",null,"\u5c06DateTime\u4ee5\u5341\u5206\u949f\u4e3a\u5355\u4f4d\u5411\u524d\u53d6\u6574\u5230\u6700\u63a5\u8fd1\u7684\u65f6\u95f4\u70b9\u3002"),(0,r.kt)("h2",{id:"tostartoffifteenminutes"},"toStartOfFifteenMinutes"),(0,r.kt)("p",null,"\u5c06DateTime\u4ee5\u5341\u4e94\u5206\u949f\u4e3a\u5355\u4f4d\u5411\u524d\u53d6\u6574\u5230\u6700\u63a5\u8fd1\u7684\u65f6\u95f4\u70b9\u3002"),(0,r.kt)("h2",{id:"tostartofintervaltime-or-data-interval-x-unit-time-zone"},"toStartOfInterval(time_or_data,\u95f4\u9694x\u5355\u4f4d","[",",time_zone","]",")"),(0,r.kt)("p",null,"\u8fd9\u662f\u540d\u4e3a",(0,r.kt)("inlineCode",{parentName:"p"},"toStartOf*"),"\u7684\u6240\u6709\u51fd\u6570\u7684\u901a\u7528\u51fd\u6570\u3002\u4f8b\u5982\uff0c\n",(0,r.kt)("inlineCode",{parentName:"p"},"toStartOfInterval\uff08t\uff0cINTERVAL 1 year\uff09"),"\u8fd4\u56de\u4e0e",(0,r.kt)("inlineCode",{parentName:"p"},"toStartOfYear\uff08t\uff09"),"\u76f8\u540c\u7684\u7ed3\u679c\uff0c\n",(0,r.kt)("inlineCode",{parentName:"p"},"toStartOfInterval\uff08t\uff0cINTERVAL 1 month\uff09"),"\u8fd4\u56de\u4e0e",(0,r.kt)("inlineCode",{parentName:"p"},"toStartOfMonth\uff08t\uff09"),"\u76f8\u540c\u7684\u7ed3\u679c\uff0c\n",(0,r.kt)("inlineCode",{parentName:"p"},"toStartOfInterval\uff08t\uff0cINTERVAL 1 day\uff09"),"\u8fd4\u56de\u4e0e",(0,r.kt)("inlineCode",{parentName:"p"},"toStartOfDay\uff08t\uff09"),"\u76f8\u540c\u7684\u7ed3\u679c\uff0c\n",(0,r.kt)("inlineCode",{parentName:"p"},"toStartOfInterval\uff08t\uff0cINTERVAL 15 minute\uff09"),"\u8fd4\u56de\u4e0e",(0,r.kt)("inlineCode",{parentName:"p"},"toStartOfFifteenMinutes\uff08t\uff09"),"\u76f8\u540c\u7684\u7ed3\u679c\u3002"),(0,r.kt)("h2",{id:"totime"},"toTime"),(0,r.kt)("p",null,"\u5c06DateTime\u4e2d\u7684\u65e5\u671f\u8f6c\u6362\u4e3a\u4e00\u4e2a\u56fa\u5b9a\u7684\u65e5\u671f\uff0c\u540c\u65f6\u4fdd\u7559\u65f6\u95f4\u90e8\u5206\u3002"),(0,r.kt)("h2",{id:"torelativeyearnum"},"toRelativeYearNum"),(0,r.kt)("p",null,"\u5c06Date\u6216DateTime\u8f6c\u6362\u4e3a\u5e74\u4efd\u7684\u7f16\u53f7\uff0c\u4ece\u8fc7\u53bb\u7684\u67d0\u4e2a\u56fa\u5b9a\u65f6\u95f4\u70b9\u5f00\u59cb\u3002"),(0,r.kt)("h2",{id:"torelativequarternum"},"toRelativeQuarterNum"),(0,r.kt)("p",null,"\u5c06Date\u6216DateTime\u8f6c\u6362\u4e3a\u5b63\u5ea6\u7684\u6570\u5b57\uff0c\u4ece\u8fc7\u53bb\u7684\u67d0\u4e2a\u56fa\u5b9a\u65f6\u95f4\u70b9\u5f00\u59cb\u3002"),(0,r.kt)("h2",{id:"torelativemonthnum"},"toRelativeMonthNum"),(0,r.kt)("p",null,"\u5c06Date\u6216DateTime\u8f6c\u6362\u4e3a\u6708\u4efd\u7684\u7f16\u53f7\uff0c\u4ece\u8fc7\u53bb\u7684\u67d0\u4e2a\u56fa\u5b9a\u65f6\u95f4\u70b9\u5f00\u59cb\u3002"),(0,r.kt)("h2",{id:"torelativeweeknum"},"toRelativeWeekNum"),(0,r.kt)("p",null,"\u5c06Date\u6216DateTime\u8f6c\u6362\u4e3a\u661f\u671f\u6570\uff0c\u4ece\u8fc7\u53bb\u7684\u67d0\u4e2a\u56fa\u5b9a\u65f6\u95f4\u70b9\u5f00\u59cb\u3002"),(0,r.kt)("h2",{id:"torelativedaynum"},"toRelativeDayNum"),(0,r.kt)("p",null,"\u5c06Date\u6216DateTime\u8f6c\u6362\u4e3a\u5f53\u5929\u7684\u7f16\u53f7\uff0c\u4ece\u8fc7\u53bb\u7684\u67d0\u4e2a\u56fa\u5b9a\u65f6\u95f4\u70b9\u5f00\u59cb\u3002"),(0,r.kt)("h2",{id:"torelativehournum"},"toRelativeHourNum"),(0,r.kt)("p",null,"\u5c06DateTime\u8f6c\u6362\u4e3a\u5c0f\u65f6\u6570\uff0c\u4ece\u8fc7\u53bb\u7684\u67d0\u4e2a\u56fa\u5b9a\u65f6\u95f4\u70b9\u5f00\u59cb\u3002"),(0,r.kt)("h2",{id:"torelativeminutenum"},"toRelativeMinuteNum"),(0,r.kt)("p",null,"\u5c06DateTime\u8f6c\u6362\u4e3a\u5206\u949f\u6570\uff0c\u4ece\u8fc7\u53bb\u7684\u67d0\u4e2a\u56fa\u5b9a\u65f6\u95f4\u70b9\u5f00\u59cb\u3002"),(0,r.kt)("h2",{id:"torelativesecondnum"},"toRelativeSecondNum"),(0,r.kt)("p",null,"\u5c06DateTime\u8f6c\u6362\u4e3a\u79d2\u6570\uff0c\u4ece\u8fc7\u53bb\u7684\u67d0\u4e2a\u56fa\u5b9a\u65f6\u95f4\u70b9\u5f00\u59cb\u3002"),(0,r.kt)("h2",{id:"toisoyear"},"toISOYear"),(0,r.kt)("p",null,"\u5c06Date\u6216DateTime\u8f6c\u6362\u4e3a\u5305\u542bISO\u5e74\u4efd\u7684UInt16\u7c7b\u578b\u7684\u7f16\u53f7\u3002"),(0,r.kt)("h2",{id:"toisoweek"},"toISOWeek"),(0,r.kt)("p",null,"\u5c06Date\u6216DateTime\u8f6c\u6362\u4e3a\u5305\u542bISO\u5468\u6570\u7684UInt8\u7c7b\u578b\u7684\u7f16\u53f7\u3002"),(0,r.kt)("h2",{id:"toweekdatemode"},"toWeek(date","[",",mode","]",")"),(0,r.kt)("p",null,"\u8fd4\u56deDate\u6216DateTime\u7684\u5468\u6570\u3002\u4e24\u4e2a\u53c2\u6570\u5f62\u5f0f\u53ef\u4ee5\u6307\u5b9a\u661f\u671f\u662f\u4ece\u661f\u671f\u65e5\u8fd8\u662f\u661f\u671f\u4e00\u5f00\u59cb\uff0c\u4ee5\u53ca\u8fd4\u56de\u503c\u5e94\u57280\u523053\u8fd8\u662f\u4ece1\u523053\u7684\u8303\u56f4\u5185\u3002\u5982\u679c\u7701\u7565\u4e86mode\u53c2\u6570\uff0c\u5219\u9ed8\u8ba4 \u6a21\u5f0f\u4e3a0\u3002\n",(0,r.kt)("inlineCode",{parentName:"p"},"toISOWeek()"),"\u662f\u4e00\u4e2a\u517c\u5bb9\u51fd\u6570\uff0c\u7b49\u6548\u4e8e",(0,r.kt)("inlineCode",{parentName:"p"},"toWeek(date,3)"),"\u3002\n\u4e0b\u8868\u63cf\u8ff0\u4e86mode\u53c2\u6570\u7684\u5de5\u4f5c\u65b9\u5f0f\u3002"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Mode"),(0,r.kt)("th",{parentName:"tr",align:null},"First day of week"),(0,r.kt)("th",{parentName:"tr",align:null},"Range"),(0,r.kt)("th",{parentName:"tr",align:null},"Week 1 is the first week \u2026"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"0"),(0,r.kt)("td",{parentName:"tr",align:null},"Sunday"),(0,r.kt)("td",{parentName:"tr",align:null},"0-53"),(0,r.kt)("td",{parentName:"tr",align:null},"with a Sunday in this year")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"1"),(0,r.kt)("td",{parentName:"tr",align:null},"Monday"),(0,r.kt)("td",{parentName:"tr",align:null},"0-53"),(0,r.kt)("td",{parentName:"tr",align:null},"with 4 or more days this year")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"2"),(0,r.kt)("td",{parentName:"tr",align:null},"Sunday"),(0,r.kt)("td",{parentName:"tr",align:null},"1-53"),(0,r.kt)("td",{parentName:"tr",align:null},"with a Sunday in this year")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"3"),(0,r.kt)("td",{parentName:"tr",align:null},"Monday"),(0,r.kt)("td",{parentName:"tr",align:null},"1-53"),(0,r.kt)("td",{parentName:"tr",align:null},"with 4 or more days this year")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"4"),(0,r.kt)("td",{parentName:"tr",align:null},"Sunday"),(0,r.kt)("td",{parentName:"tr",align:null},"0-53"),(0,r.kt)("td",{parentName:"tr",align:null},"with 4 or more days this year")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"5"),(0,r.kt)("td",{parentName:"tr",align:null},"Monday"),(0,r.kt)("td",{parentName:"tr",align:null},"0-53"),(0,r.kt)("td",{parentName:"tr",align:null},"with a Monday in this year")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"6"),(0,r.kt)("td",{parentName:"tr",align:null},"Sunday"),(0,r.kt)("td",{parentName:"tr",align:null},"1-53"),(0,r.kt)("td",{parentName:"tr",align:null},"with 4 or more days this year")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"7"),(0,r.kt)("td",{parentName:"tr",align:null},"Monday"),(0,r.kt)("td",{parentName:"tr",align:null},"1-53"),(0,r.kt)("td",{parentName:"tr",align:null},"with a Monday in this year")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"8"),(0,r.kt)("td",{parentName:"tr",align:null},"Sunday"),(0,r.kt)("td",{parentName:"tr",align:null},"1-53"),(0,r.kt)("td",{parentName:"tr",align:null},"contains January 1")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"9"),(0,r.kt)("td",{parentName:"tr",align:null},"Monday"),(0,r.kt)("td",{parentName:"tr",align:null},"1-53"),(0,r.kt)("td",{parentName:"tr",align:null},"contains January 1")))),(0,r.kt)("p",null,"\u5bf9\u4e8e\u8c61\u201cwith 4 or more days this year,\u201d\u7684mode\u503c\uff0c\u6839\u636eISO 8601\uff1a1988\u5bf9\u5468\u8fdb\u884c\u7f16\u53f7\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u5982\u679c\u5305\u542b1\u67081\u65e5\u7684\u4e00\u5468\u5728\u540e\u4e00\u5e74\u5ea6\u4e2d\u67094\u5929\u6216\u66f4\u591a\u5929\uff0c\u5219\u4e3a\u7b2c1\u5468\u3002")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u5426\u5219\uff0c\u5b83\u662f\u4e0a\u4e00\u5e74\u7684\u6700\u540e\u4e00\u5468\uff0c\u4e0b\u5468\u662f\u7b2c1\u5468\u3002"))),(0,r.kt)("p",null,"\u5bf9\u4e8e\u50cf\u201ccontains January 1\u201d\u7684mode\u503c, \u5305\u542b1\u67081\u65e5\u7684\u90a3\u5468\u4e3a\u672c\u5e74\u5ea6\u7684\u7b2c1\u5468\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"toWeek(date, [, mode][, Timezone])\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u53c2\u6570")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"date")," \u2013 Date \u6216 DateTime."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"mode")," \u2013 \u53ef\u9009\u53c2\u6570, \u53d6\u503c\u8303\u56f4 ","[","0,9","]","\uff0c \u9ed8\u8ba40\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Timezone")," \u2013 \u53ef\u9009\u53c2\u6570\uff0c \u53ef\u5176\u4ed6\u65f6\u95f4\u65e5\u671f\u8f6c\u6362\u53c2\u6570\u7684\u884c\u4e3a\u4e00\u81f4\u3002")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u793a\u4f8b")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT toDate('2016-12-27') AS date, toWeek(date) AS week0, toWeek(date,1) AS week1, toWeek(date,9) AS week9;\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-text"},"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500date\u2500\u252c\u2500week0\u2500\u252c\u2500week1\u2500\u252c\u2500week9\u2500\u2510\n\u2502 2016-12-27 \u2502    52 \u2502    52 \u2502     1 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n")),(0,r.kt)("h2",{id:"toyearweekdatemode"},"toYearWeek(date","[",",mode","]",")"),(0,r.kt)("p",null,"\u8fd4\u56deDate\u7684\u5e74\u548c\u5468\u3002 \u7ed3\u679c\u4e2d\u7684\u5e74\u4efd\u53ef\u80fd\u56e0\u4e3aDate\u4e3a\u8be5\u5e74\u4efd\u7684\u7b2c\u4e00\u5468\u548c\u6700\u540e\u4e00\u5468\u800c\u4e8eDate\u7684\u5e74\u4efd\u4e0d\u540c\u3002"),(0,r.kt)("p",null,"mode\u53c2\u6570\u7684\u5de5\u4f5c\u65b9\u5f0f\u4e0etoWeek()\u7684mode\u53c2\u6570\u5b8c\u5168\u76f8\u540c\u3002 \u5bf9\u4e8e\u5355\u53c2\u6570\u8bed\u6cd5\uff0cmode\u4f7f\u7528\u9ed8\u8ba4\u503c0\u3002"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"toISOYear()"),"\u662f\u4e00\u4e2a\u517c\u5bb9\u51fd\u6570\uff0c\u7b49\u6548\u4e8e",(0,r.kt)("inlineCode",{parentName:"p"},"intDiv(toYearWeek(date,3),100)"),"."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u793a\u4f8b")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT toDate('2016-12-27') AS date, toYearWeek(date) AS yearWeek0, toYearWeek(date,1) AS yearWeek1, toYearWeek(date,9) AS yearWeek9;\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-text"},"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500date\u2500\u252c\u2500yearWeek0\u2500\u252c\u2500yearWeek1\u2500\u252c\u2500yearWeek9\u2500\u2510\n\u2502 2016-12-27 \u2502    201652 \u2502    201652 \u2502    201701 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n")),(0,r.kt)("h2",{id:"date_trunc"},"date_trunc"),(0,r.kt)("p",null,"\u5c06Date\u6216DateTime\u6309\u6307\u5b9a\u7684\u5355\u4f4d\u5411\u524d\u53d6\u6574\u5230\u6700\u63a5\u8fd1\u7684\u65f6\u95f4\u70b9\u3002"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u8bed\u6cd5")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"date_trunc(unit, value[, timezone])\n")),(0,r.kt)("p",null,"\u522b\u540d: ",(0,r.kt)("inlineCode",{parentName:"p"},"dateTrunc"),"."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u53c2\u6570")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"unit")," \u2014 \u5355\u4f4d. ",(0,r.kt)("a",{parentName:"p",href:"/docs/zh/sql-reference/syntax#syntax-string-literal"},"String"),".\n\u53ef\u9009\u503c:"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"second")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"minute")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"hour")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"day")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"week")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"month")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"quarter")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"year")))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"value")," \u2014 ",(0,r.kt)("a",{parentName:"p",href:"/docs/zh/sql-reference/data-types/datetime"},"DateTime")," \u6216\u8005 ",(0,r.kt)("a",{parentName:"p",href:"/docs/zh/sql-reference/data-types/datetime64"},"DateTime64"),".")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"timezone")," \u2014 ",(0,r.kt)("a",{parentName:"p",href:"/docs/zh/operations/server-configuration-parameters/settings#server_configuration_parameters-timezone"},"Timezone name")," \u8fd4\u56de\u503c\u7684\u65f6\u533a(\u53ef\u9009\u503c)\u3002\u5982\u679c\u672a\u6307\u5b9a\u5c06\u4f7f\u7528",(0,r.kt)("inlineCode",{parentName:"p"},"value"),"\u7684\u65f6\u533a\u3002 ",(0,r.kt)("a",{parentName:"p",href:"/docs/zh/sql-reference/data-types/string"},"String"),"."))),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u8fd4\u56de\u503c")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u6309\u6307\u5b9a\u7684\u5355\u4f4d\u5411\u524d\u53d6\u6574\u540e\u7684DateTime\u3002")),(0,r.kt)("p",null,"\u7c7b\u578b: ",(0,r.kt)("a",{parentName:"p",href:"/docs/zh/sql-reference/data-types/datetime"},"Datetime"),"."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u793a\u4f8b")),(0,r.kt)("p",null,"\u4e0d\u6307\u5b9a\u65f6\u533a\u67e5\u8be2:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT now(), date_trunc('hour', now());\n")),(0,r.kt)("p",null,"\u7ed3\u679c:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-text"},"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500now()\u2500\u252c\u2500date_trunc('hour', now())\u2500\u2510\n\u2502 2020-09-28 10:40:45 \u2502       2020-09-28 10:00:00 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n")),(0,r.kt)("p",null,"\u6307\u5b9a\u65f6\u533a\u67e5\u8be2:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT now(), date_trunc('hour', now(), 'Asia/Istanbul');\n")),(0,r.kt)("p",null,"\u7ed3\u679c:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-text"},"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500now()\u2500\u252c\u2500date_trunc('hour', now(), 'Asia/Istanbul')\u2500\u2510\n\u2502 2020-09-28 10:46:26 \u2502                        2020-09-28 13:00:00 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u53c2\u8003")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#tostartofintervaltime-or-data-interval-x-unit-time-zone"},"toStartOfInterval"))),(0,r.kt)("h1",{id:"now"},"now"),(0,r.kt)("p",null,"\u8fd4\u56de\u5f53\u524d\u65e5\u671f\u548c\u65f6\u95f4\u3002"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u8bed\u6cd5")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"now([timezone])\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u53c2\u6570")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"timezone")," \u2014 ",(0,r.kt)("a",{parentName:"li",href:"/docs/zh/operations/server-configuration-parameters/settings#server_configuration_parameters-timezone"},"Timezone name")," \u8fd4\u56de\u7ed3\u679c\u7684\u65f6\u533a(\u53ef\u5148\u53c2\u6570). ",(0,r.kt)("a",{parentName:"li",href:"/docs/zh/sql-reference/data-types/string"},"String"),".")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u8fd4\u56de\u503c")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u5f53\u524d\u65e5\u671f\u548c\u65f6\u95f4\u3002")),(0,r.kt)("p",null,"\u7c7b\u578b: ",(0,r.kt)("a",{parentName:"p",href:"/docs/zh/sql-reference/data-types/datetime"},"Datetime"),"."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u793a\u4f8b")),(0,r.kt)("p",null,"\u4e0d\u6307\u5b9a\u65f6\u533a\u67e5\u8be2:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT now();\n")),(0,r.kt)("p",null,"\u7ed3\u679c:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-text"},"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500now()\u2500\u2510\n\u2502 2020-10-17 07:42:09 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n")),(0,r.kt)("p",null,"\u6307\u5b9a\u65f6\u533a\u67e5\u8be2:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT now('Asia/Istanbul');\n")),(0,r.kt)("p",null,"\u7ed3\u679c:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-text"},"\u250c\u2500now('Asia/Istanbul')\u2500\u2510\n\u2502  2020-10-17 10:42:23 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n")),(0,r.kt)("h2",{id:"today"},"today"),(0,r.kt)("p",null,"\u4e0d\u63a5\u53d7\u4efb\u4f55\u53c2\u6570\u5e76\u5728\u8bf7\u6c42\u6267\u884c\u65f6\u7684\u67d0\u4e00\u523b\u8fd4\u56de\u5f53\u524d\u65e5\u671f(Date)\u3002\n\u5176\u529f\u80fd\u4e0e\u2019toDate\uff08now()\uff09\u2019\u76f8\u540c\u3002"),(0,r.kt)("h2",{id:"yesterday"},"yesterday"),(0,r.kt)("p",null,"\u4e0d\u63a5\u53d7\u4efb\u4f55\u53c2\u6570\u5e76\u5728\u8bf7\u6c42\u6267\u884c\u65f6\u7684\u67d0\u4e00\u523b\u8fd4\u56de\u6628\u5929\u7684\u65e5\u671f(Date)\u3002\n\u5176\u529f\u80fd\u4e0e\u2019today() - 1\u2019\u76f8\u540c\u3002"),(0,r.kt)("h2",{id:"timeslot"},"timeSlot"),(0,r.kt)("p",null,"\u5c06\u65f6\u95f4\u5411\u524d\u53d6\u6574\u534a\u5c0f\u65f6\u3002\n\u6b64\u529f\u80fd\u7528\u4e8eYandex.Metrica\uff0c\u56e0\u4e3a\u5982\u679c\u8ddf\u8e2a\u6807\u8bb0\u663e\u793a\u5355\u4e2a\u7528\u6237\u7684\u8fde\u7eed\u7efc\u5408\u6d4f\u89c8\u91cf\u5728\u65f6\u95f4\u4e0a\u4e25\u683c\u8d85\u8fc7\u6b64\u6570\u91cf\uff0c\u5219\u534a\u5c0f\u65f6\u662f\u5c06\u4f1a\u8bdd\u5206\u6210\u4e24\u4e2a\u4f1a\u8bdd\u7684\u6700\u77ed\u65f6\u95f4\u3002\u8fd9\u610f\u5473\u7740\uff08tag id\uff0cuser id\uff0ctime slot\uff09\u53ef\u7528\u4e8e\u641c\u7d22\u76f8\u5e94\u4f1a\u8bdd\u4e2d\u5305\u542b\u7684\u7efc\u5408\u6d4f\u89c8\u91cf\u3002"),(0,r.kt)("h2",{id:"toyyyymm"},"toYYYYMM"),(0,r.kt)("p",null,"\u5c06Date\u6216DateTime\u8f6c\u6362\u4e3a\u5305\u542b\u5e74\u4efd\u548c\u6708\u4efd\u7f16\u53f7\u7684UInt32\u7c7b\u578b\u7684\u6570\u5b57\uff08YYYY ","*"," 100 + MM\uff09\u3002"),(0,r.kt)("h2",{id:"toyyyymmdd"},"toYYYYMMDD"),(0,r.kt)("p",null,"\u5c06Date\u6216DateTime\u8f6c\u6362\u4e3a\u5305\u542b\u5e74\u4efd\u548c\u6708\u4efd\u7f16\u53f7\u7684UInt32\u7c7b\u578b\u7684\u6570\u5b57\uff08YYYY ","*"," 10000 + MM ","*"," 100 + DD\uff09\u3002"),(0,r.kt)("h2",{id:"toyyyymmddhhmmss"},"toYYYYMMDDhhmmss"),(0,r.kt)("p",null,"\u5c06Date\u6216DateTime\u8f6c\u6362\u4e3a\u5305\u542b\u5e74\u4efd\u548c\u6708\u4efd\u7f16\u53f7\u7684UInt64\u7c7b\u578b\u7684\u6570\u5b57\uff08YYYY ","*"," 10000000000 + MM ","*"," 100000000 + DD ","*"," 1000000 + hh ","*"," 10000 + mm ","*"," 100 + ss\uff09\u3002"),(0,r.kt)("h2",{id:"addyears-addmonths-addweeks-adddays-addhours-addminutes-addseconds-addquarters"},"addYears, addMonths, addWeeks, addDays, addHours, addMinutes, addSeconds, addQuarters"),(0,r.kt)("p",null,"\u51fd\u6570\u5c06\u4e00\u6bb5\u65f6\u95f4\u95f4\u9694\u6dfb\u52a0\u5230Date/DateTime\uff0c\u7136\u540e\u8fd4\u56deDate/DateTime\u3002\u4f8b\u5982\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"WITH\n    toDate('2018-01-01') AS date,\n    toDateTime('2018-01-01 00:00:00') AS date_time\nSELECT\n    addYears(date, 1) AS add_years_with_date,\n    addYears(date_time, 1) AS add_years_with_date_time\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"\u250c\u2500add_years_with_date\u2500\u252c\u2500add_years_with_date_time\u2500\u2510\n\u2502          2019-01-01 \u2502      2019-01-01 00:00:00 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n")),(0,r.kt)("h2",{id:"subtractyears-subtractmonths-subtractweeks-subtractdays-subtracthours-subtractminutes-subtractseconds-subtractquarters"},"subtractYears,subtractMonths,subtractWeeks,subtractDays,subtractours,subtractMinutes,subtractSeconds,subtractQuarters"),(0,r.kt)("p",null,"\u51fd\u6570\u5c06Date/DateTime\u51cf\u53bb\u4e00\u6bb5\u65f6\u95f4\u95f4\u9694\uff0c\u7136\u540e\u8fd4\u56deDate/DateTime\u3002\u4f8b\u5982\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"WITH\n    toDate('2019-01-01') AS date,\n    toDateTime('2019-01-01 00:00:00') AS date_time\nSELECT\n    subtractYears(date, 1) AS subtract_years_with_date,\n    subtractYears(date_time, 1) AS subtract_years_with_date_time\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"\u250c\u2500subtract_years_with_date\u2500\u252c\u2500subtract_years_with_date_time\u2500\u2510\n\u2502               2018-01-01 \u2502           2018-01-01 00:00:00 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n")),(0,r.kt)("h2",{id:"datediff"},"dateDiff"),(0,r.kt)("p",null,"\u8fd4\u56de\u4e24\u4e2aDate\u6216DateTime\u7c7b\u578b\u4e4b\u95f4\u7684\u65f6\u5dee\u3002"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u8bed\u6cd5")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"dateDiff('unit', startdate, enddate, [timezone])\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u53c2\u6570")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"unit")," \u2014 \u8fd4\u56de\u7ed3\u679c\u7684\u65f6\u95f4\u5355\u4f4d\u3002 ",(0,r.kt)("a",{parentName:"p",href:"/docs/zh/sql-reference/syntax#syntax-string-literal"},"String"),"."),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre"},"\u652f\u6301\u7684\u65f6\u95f4\u5355\u4f4d: second, minute, hour, day, week, month, quarter, year.\n"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"startdate")," \u2014 \u7b2c\u4e00\u4e2a\u5f85\u6bd4\u8f83\u503c\u3002 ",(0,r.kt)("a",{parentName:"p",href:"/docs/zh/sql-reference/data-types/date"},"Date")," \u6216 ",(0,r.kt)("a",{parentName:"p",href:"/docs/zh/sql-reference/data-types/datetime"},"DateTime"),".")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"enddate")," \u2014 \u7b2c\u4e8c\u4e2a\u5f85\u6bd4\u8f83\u503c\u3002 ",(0,r.kt)("a",{parentName:"p",href:"/docs/zh/sql-reference/data-types/date"},"Date")," \u6216 ",(0,r.kt)("a",{parentName:"p",href:"/docs/zh/sql-reference/data-types/datetime"},"DateTime"),".")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"timezone")," \u2014 \u53ef\u9009\u53c2\u6570\u3002 \u5982\u679c\u6307\u5b9a\u4e86\uff0c\u5219\u540c\u65f6\u9002\u7528\u4e8e",(0,r.kt)("inlineCode",{parentName:"p"},"startdate"),"\u548c",(0,r.kt)("inlineCode",{parentName:"p"},"enddate"),"\u3002\u5982\u679c\u4e0d\u6307\u5b9a\uff0c\u5219\u4f7f\u7528",(0,r.kt)("inlineCode",{parentName:"p"},"startdate"),"\u548c",(0,r.kt)("inlineCode",{parentName:"p"},"enddate"),"\u7684\u65f6\u533a\u3002\u5982\u679c\u4e24\u4e2a\u65f6\u533a\u4e0d\u4e00\u81f4\uff0c\u5219\u7ed3\u679c\u4e0d\u53ef\u9884\u6599\u3002"))),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u8fd4\u56de\u503c")),(0,r.kt)("p",null,"\u4ee5",(0,r.kt)("inlineCode",{parentName:"p"},"unit"),"\u4e3a\u5355\u4f4d\u7684",(0,r.kt)("inlineCode",{parentName:"p"},"startdate"),"\u548c",(0,r.kt)("inlineCode",{parentName:"p"},"enddate"),"\u4e4b\u95f4\u7684\u65f6\u5dee\u3002"),(0,r.kt)("p",null,"\u7c7b\u578b: ",(0,r.kt)("inlineCode",{parentName:"p"},"int"),"."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u793a\u4f8b")),(0,r.kt)("p",null,"\u67e5\u8be2:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT dateDiff('hour', toDateTime('2018-01-01 22:00:00'), toDateTime('2018-01-02 23:00:00'));\n")),(0,r.kt)("p",null,"\u7ed3\u679c:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-text"},"\u250c\u2500dateDiff('hour', toDateTime('2018-01-01 22:00:00'), toDateTime('2018-01-02 23:00:00'))\u2500\u2510\n\u2502                                                                                     25 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n")),(0,r.kt)("h2",{id:"timeslotsstarttime-duration-size"},"timeSlots(StartTime, Duration,","[",", Size","]",")"),(0,r.kt)("p",null,"\u5b83\u8fd4\u56de\u4e00\u4e2a\u65f6\u95f4\u6570\u7ec4\uff0c\u5176\u4e2d\u5305\u62ec\u4ece\u4ece\xabStartTime\xbb\u5f00\u59cb\u5230\xabStartTime + Duration \u79d2\xbb\u5185\u7684\u6240\u6709\u7b26\u5408\xabsize\xbb\uff08\u4ee5\u79d2\u4e3a\u5355\u4f4d\uff09\u6b65\u957f\u7684\u65f6\u95f4\u70b9\u3002\u5176\u4e2d\xabsize\xbb\u662f\u4e00\u4e2a\u53ef\u9009\u53c2\u6570\uff0c\u9ed8\u8ba4\u4e3a1800\u3002\n\u4f8b\u5982\uff0c",(0,r.kt)("inlineCode",{parentName:"p"},"timeSlots(toDateTime('2012-01-01 12:20:00')\uff0c600) = [toDateTime\uff08'2012-01-01 12:00:00'\uff09\uff0ctoDateTime\uff08'2012-01-01 12:30:00' \uff09]"),"\u3002\n\u8fd9\u5bf9\u4e8e\u641c\u7d22\u5728\u76f8\u5e94\u4f1a\u8bdd\u4e2d\u7efc\u5408\u6d4f\u89c8\u91cf\u662f\u975e\u5e38\u6709\u7528\u7684\u3002"),(0,r.kt)("h2",{id:"formatdatetime"},"formatDateTime"),(0,r.kt)("p",null,"\u51fd\u6570\u6839\u636e\u7ed9\u5b9a\u7684\u683c\u5f0f\u5b57\u7b26\u4e32\u6765\u683c\u5f0f\u5316\u65f6\u95f4\u3002\u8bf7\u6ce8\u610f\uff1a\u683c\u5f0f\u5b57\u7b26\u4e32\u5fc5\u987b\u662f\u5e38\u91cf\u8868\u8fbe\u5f0f\uff0c\u4f8b\u5982\uff1a\u5355\u4e2a\u7ed3\u679c\u5217\u4e0d\u80fd\u6709\u591a\u79cd\u683c\u5f0f\u5b57\u7b26\u4e32\u3002"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u8bed\u6cd5")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"formatDateTime(Time, Format\\[, Timezone\\])\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u8fd4\u56de\u503c")),(0,r.kt)("p",null,"\u6839\u636e\u6307\u5b9a\u683c\u5f0f\u8fd4\u56de\u7684\u65e5\u671f\u548c\u65f6\u95f4\u3002"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u652f\u6301\u7684\u683c\u5f0f\u4fee\u9970\u7b26")),(0,r.kt)("p",null,"\u4f7f\u7528\u683c\u5f0f\u4fee\u9970\u7b26\u6765\u6307\u5b9a\u7ed3\u679c\u5b57\u7b26\u4e32\u7684\u6837\u5f0f\u3002\xabExample\xbb \u5217\u662f\u5bf9",(0,r.kt)("inlineCode",{parentName:"p"},"2018-01-02 22:33:44"),"\u7684\u683c\u5f0f\u5316\u7ed3\u679c\u3002"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"\u4fee\u9970\u7b26"),(0,r.kt)("th",{parentName:"tr",align:null},"\u63cf\u8ff0"),(0,r.kt)("th",{parentName:"tr",align:null},"\u793a\u4f8b"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"%C"),(0,r.kt)("td",{parentName:"tr",align:null},"\u5e74\u9664\u4ee5100\u5e76\u622a\u65ad\u4e3a\u6574\u6570(00-99)"),(0,r.kt)("td",{parentName:"tr",align:null},"20")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"%d"),(0,r.kt)("td",{parentName:"tr",align:null},"\u6708\u4e2d\u7684\u4e00\u5929\uff0c\u96f6\u586b\u5145\uff0801-31)"),(0,r.kt)("td",{parentName:"tr",align:null},"02")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"%D"),(0,r.kt)("td",{parentName:"tr",align:null},"\u77edMM/DD/YY\u65e5\u671f\uff0c\u76f8\u5f53\u4e8e%m/%d/%y"),(0,r.kt)("td",{parentName:"tr",align:null},"01/02/2018")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"%e"),(0,r.kt)("td",{parentName:"tr",align:null},"\u6708\u4e2d\u7684\u4e00\u5929\uff0c\u7a7a\u683c\u586b\u5145\uff08 1-31)"),(0,r.kt)("td",{parentName:"tr",align:null},"2")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"%F"),(0,r.kt)("td",{parentName:"tr",align:null},"\u77edYYYY-MM-DD\u65e5\u671f\uff0c\u76f8\u5f53\u4e8e%Y-%m-%d"),(0,r.kt)("td",{parentName:"tr",align:null},"2018-01-02")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"%G"),(0,r.kt)("td",{parentName:"tr",align:null},"ISO\u5468\u53f7\u7684\u56db\u4f4d\u6570\u5e74\u4efd\u683c\u5f0f\uff0c \u4ece\u57fa\u4e8e\u5468\u7684\u5e74\u4efd",(0,r.kt)("a",{parentName:"td",href:"https://en.wikipedia.org/wiki/ISO_8601#Week_dates"},"\u7531ISO 8601\u5b9a\u4e49")," \u6807\u51c6\u8ba1\u7b97\u5f97\u51fa\uff0c\u901a\u5e38\u4ec5\u5bf9\uff05V\u6709\u7528"),(0,r.kt)("td",{parentName:"tr",align:null},"2018")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"%g"),(0,r.kt)("td",{parentName:"tr",align:null},"\u4e24\u4f4d\u6570\u7684\u5e74\u4efd\u683c\u5f0f\uff0c\u4e0eISO 8601\u4e00\u81f4\uff0c\u56db\u4f4d\u6570\u8868\u793a\u6cd5\u7684\u7f29\u5199"),(0,r.kt)("td",{parentName:"tr",align:null},"18")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"%H"),(0,r.kt)("td",{parentName:"tr",align:null},"24\u5c0f\u65f6\u683c\u5f0f\uff0800-23)"),(0,r.kt)("td",{parentName:"tr",align:null},"22")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"%I"),(0,r.kt)("td",{parentName:"tr",align:null},"12\u5c0f\u65f6\u683c\u5f0f\uff0801-12)"),(0,r.kt)("td",{parentName:"tr",align:null},"10")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"%j"),(0,r.kt)("td",{parentName:"tr",align:null},"\u4e00\u5e74\u4e2d\u7684\u4e00\u5929 (001-366)"),(0,r.kt)("td",{parentName:"tr",align:null},"002")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"%m"),(0,r.kt)("td",{parentName:"tr",align:null},"\u6708\u4efd\u4e3a\u5341\u8fdb\u5236\u6570\uff0801-12)"),(0,r.kt)("td",{parentName:"tr",align:null},"01")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"%M"),(0,r.kt)("td",{parentName:"tr",align:null},"\u5206\u949f(00-59)"),(0,r.kt)("td",{parentName:"tr",align:null},"33")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"%n"),(0,r.kt)("td",{parentName:"tr",align:null},'\u6362\u884c\u7b26(")'),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"%p"),(0,r.kt)("td",{parentName:"tr",align:null},"AM\u6216PM\u6307\u5b9a"),(0,r.kt)("td",{parentName:"tr",align:null},"PM")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"%Q"),(0,r.kt)("td",{parentName:"tr",align:null},"\u5b63\u5ea6\uff081-4)"),(0,r.kt)("td",{parentName:"tr",align:null},"1")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"%R"),(0,r.kt)("td",{parentName:"tr",align:null},"24\u5c0f\u65f6HH:MM\u65f6\u95f4\uff0c\u76f8\u5f53\u4e8e%H:%M"),(0,r.kt)("td",{parentName:"tr",align:null},"22:33")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"%S"),(0,r.kt)("td",{parentName:"tr",align:null},"\u79d2 (00-59)"),(0,r.kt)("td",{parentName:"tr",align:null},"44")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"%t"),(0,r.kt)("td",{parentName:"tr",align:null},"\u6c34\u5e73\u5236\u8868\u7b26(\u2019)"),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"%T"),(0,r.kt)("td",{parentName:"tr",align:null},"ISO8601\u65f6\u95f4\u683c\u5f0f(HH:MM:SS)\uff0c\u76f8\u5f53\u4e8e%H:%M:%S"),(0,r.kt)("td",{parentName:"tr",align:null},"22:33:44")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"%u"),(0,r.kt)("td",{parentName:"tr",align:null},"ISO8601\u5de5\u4f5c\u65e5\u4e3a\u6570\u5b57\uff0c\u661f\u671f\u4e00\u4e3a1(1-7)"),(0,r.kt)("td",{parentName:"tr",align:null},"2")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"%V"),(0,r.kt)("td",{parentName:"tr",align:null},"ISO8601\u5468\u7f16\u53f7(01-53)"),(0,r.kt)("td",{parentName:"tr",align:null},"01")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"%w"),(0,r.kt)("td",{parentName:"tr",align:null},"\u5de5\u4f5c\u65e5\u4e3a\u5341\u8fdb\u5236\u6570\uff0c\u5468\u65e5\u4e3a0(0-6)"),(0,r.kt)("td",{parentName:"tr",align:null},"2")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"%y"),(0,r.kt)("td",{parentName:"tr",align:null},"\u5e74\u4efd\uff0c\u6700\u540e\u4e24\u4f4d\u6570\u5b57\uff0800-99)"),(0,r.kt)("td",{parentName:"tr",align:null},"18")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"%Y"),(0,r.kt)("td",{parentName:"tr",align:null},"\u5e74"),(0,r.kt)("td",{parentName:"tr",align:null},"2018")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"%%"),(0,r.kt)("td",{parentName:"tr",align:null},"%\u7b26\u53f7"),(0,r.kt)("td",{parentName:"tr",align:null},"%")))),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u793a\u4f8b")),(0,r.kt)("p",null,"\u67e5\u8be2:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT formatDateTime(toDate('2010-01-04'), '%g')\n")),(0,r.kt)("p",null,"\u7ed3\u679c:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"\u250c\u2500formatDateTime(toDate('2010-01-04'), '%g')\u2500\u2510\n\u2502 10                                         \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n")),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://clickhouse.com/docs/en/query_language/functions/date_time_functions/"},"Original article")," "),(0,r.kt)("h2",{id:"from_unixtime"},"FROM_UNIXTIME"),(0,r.kt)("p",null,"\u5f53\u53ea\u6709\u5355\u4e2a\u6574\u6570\u7c7b\u578b\u7684\u53c2\u6570\u65f6\uff0c\u5b83\u7684\u4f5c\u7528\u4e0e",(0,r.kt)("inlineCode",{parentName:"p"},"toDateTime"),"\u76f8\u540c\uff0c\u5e76\u8fd4\u56de",(0,r.kt)("a",{parentName:"p",href:"/docs/zh/sql-reference/data-types/datetime"},"DateTime"),"\u7c7b\u578b\u3002"),(0,r.kt)("p",null,"\u4f8b\u5982:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT FROM_UNIXTIME(423543535)\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-text"},"\u250c\u2500FROM_UNIXTIME(423543535)\u2500\u2510\n\u2502      1983-06-04 10:58:55 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n")),(0,r.kt)("p",null,"\u5f53\u6709\u4e24\u4e2a\u53c2\u6570\u65f6\uff0c\u7b2c\u4e00\u4e2a\u662f\u6574\u578b\u6216DateTime\uff0c\u7b2c\u4e8c\u4e2a\u662f\u5e38\u91cf\u683c\u5f0f\u5b57\u7b26\u4e32\uff0c\u5b83\u7684\u4f5c\u7528\u4e0e",(0,r.kt)("inlineCode",{parentName:"p"},"formatDateTime"),"\u76f8\u540c\uff0c\u5e76\u8fd4\u56de",(0,r.kt)("inlineCode",{parentName:"p"},"String"),"\u7c7b\u578b\u3002"),(0,r.kt)("p",null,"\u4f8b\u5982:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT FROM_UNIXTIME(1234334543, '%Y-%m-%d %R:%S') AS DateTime\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-text"},"\u250c\u2500DateTime\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 2009-02-11 14:42:23 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n")))}s.isMDXComponent=!0}}]);