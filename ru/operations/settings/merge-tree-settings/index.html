<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-ru/operations/settings/merge-tree-settings">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.18">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-KF1LLRTQ5Q"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-KF1LLRTQ5Q",{})</script>
<link rel="search" type="application/opensearchdescription+xml" title="ClickHouse Docs" href="/docs/opensearch.xml">
<script src="https://docs-content.clickhouse.tech/docs/js/analytics.js"></script><title data-rh="true">Настройки MergeTree таблиц | ClickHouse Docs</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://clickhouse.com/docs/img/logo.png"><meta data-rh="true" name="twitter:image" content="https://clickhouse.com/docs/img/logo.png"><meta data-rh="true" property="og:url" content="https://clickhouse.com/docs/ru/operations/settings/merge-tree-settings"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Настройки MergeTree таблиц | ClickHouse Docs"><meta data-rh="true" name="description" content="merge-tree-settings}"><meta data-rh="true" property="og:description" content="merge-tree-settings}"><link data-rh="true" rel="icon" href="/docs/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://clickhouse.com/docs/ru/operations/settings/merge-tree-settings"><link data-rh="true" rel="alternate" href="https://clickhouse.com/docs/ru/operations/settings/merge-tree-settings" hreflang="en"><link data-rh="true" rel="alternate" href="https://clickhouse.com/docs/ru/operations/settings/merge-tree-settings" hreflang="x-default"><link rel="stylesheet" href="/docs/assets/css/styles.762d4b44.css">
<link rel="preload" href="/docs/assets/js/runtime~main.832195c1.js" as="script">
<link rel="preload" href="/docs/assets/js/main.0e6c66ce.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top navbarHideable_ObN2"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://clickhouse.com/" target="_blank" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="/docs/img/clickhouse.svg" alt="ClickHouse" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/docs/img/clickhouse.svg" alt="ClickHouse" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title">ClickHouse</b></a><a class="navbar__item navbar__link" href="/docs/en/intro">Docs</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Language</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/en/intro">English</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/ru">Russian</a></li><li><a class="dropdown__link" href="/docs/zh">Chinese</a></li></ul></div><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Loading..." aria-label="Search" class="navbar__search-input search-bar" disabled=""></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_RiAD sidebarWithHideableNavbar_d0QC"><a href="https://clickhouse.com/" target="_blank" rel="noopener noreferrer" tabindex="-1" class="sidebarLogo_YUvz"><img src="/docs/img/clickhouse.svg" alt="ClickHouse" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/docs/img/clickhouse.svg" alt="ClickHouse" class="themedImage_W2Cr themedImage--dark_oUvU"><b>ClickHouse</b></a><nav class="menu thin-scrollbar menu_izAj"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/ru/">Что такое ClickHouse</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/введение">Введение</a><button aria-label="Toggle the collapsible sidebar category &#x27;Введение&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/ru/getting-started/">Начало работы</a><button aria-label="Toggle the collapsible sidebar category &#x27;Начало работы&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/ru/interfaces/">Интерфейсы</a><button aria-label="Toggle the collapsible sidebar category &#x27;Интерфейсы&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/engines">Engines</a><button aria-label="Toggle the collapsible sidebar category &#x27;Engines&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/ru/sql-reference/">Справка по SQL</a><button aria-label="Toggle the collapsible sidebar category &#x27;Справка по SQL&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/ru/guides/">Руководства</a><button aria-label="Toggle the collapsible sidebar category &#x27;Руководства&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/ru/operations/">Эксплуатация</a><button aria-label="Toggle the collapsible sidebar category &#x27;Эксплуатация&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/requirements">Требования</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/monitoring">Мониторинг</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/troubleshooting">Устранение неисправностей</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/update">Обновление ClickHouse</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/access-rights">Управление доступом</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/ru/operations/external-authenticators/">Внешние аутентификаторы пользователей и каталоги</a><button aria-label="Toggle the collapsible sidebar category &#x27;Внешние аутентификаторы пользователей и каталоги&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/backup">Резервное копирование данных</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/configuration-files">Конфигурационные файлы</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/quotas">Квоты</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/ru/operations/optimizing-performance/">Optimizing Performance</a><button aria-label="Toggle the collapsible sidebar category &#x27;Optimizing Performance&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/ru/operations/system-tables/">Системные таблицы</a><button aria-label="Toggle the collapsible sidebar category &#x27;Системные таблицы&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/performance-test">Testing Hardware</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/ru/operations/server-configuration-parameters/">Конфигурационные параметры сервера</a><button aria-label="Toggle the collapsible sidebar category &#x27;Конфигурационные параметры сервера&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/docs/ru/operations/settings/">Settings</a><button aria-label="Toggle the collapsible sidebar category &#x27;Settings&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/settings/permissions-for-queries">Разрешения для запросов</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/settings/query-complexity">Ограничения на сложность запроса</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/settings/settings">Настройки</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/settings/settings-profiles">Профили настроек</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/settings/constraints-on-settings">Ограничения на изменение настроек</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/settings/settings-users">Настройки пользователей</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/ru/operations/settings/merge-tree-settings">Настройки MergeTree таблиц</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/ru/operations/utilities/">Утилиты</a><button aria-label="Toggle the collapsible sidebar category &#x27;Утилиты&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/tips">Usage Recommendations</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/opentelemetry">Поддержка OpenTelemetry</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/caches">Кеши</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/clickhouse-keeper">ClickHouse Keeper</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/storing-data">Хранение данных на внешних дисках</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/named-collections">Именованные соединения</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/инструкция-для-разработчиков">Инструкция для разработчиков</a><button aria-label="Toggle the collapsible sidebar category &#x27;Инструкция для разработчиков&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/ru/commercial/">Коммерческие услуги</a><button aria-label="Toggle the collapsible sidebar category &#x27;Коммерческие услуги&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/ru/faq/">F.A.Q.</a><button aria-label="Toggle the collapsible sidebar category &#x27;F.A.Q.&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/ru/whats-new/">Что нового?</a><button aria-label="Toggle the collapsible sidebar category &#x27;Что нового?&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/ru/about-us/support">about-us</a></div></li></ul></nav></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Xlws" aria-label="breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/docs/">🏠</a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/ru/operations/"><span itemprop="name">Эксплуатация</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/ru/operations/settings/"><span itemprop="name">Settings</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="item name">Настройки MergeTree таблиц</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Настройки MergeTree таблиц</h1><p>Значения настроек всех MergeTree таблиц собраны в таблице <code>system.merge_tree_settings</code>. Их можно переопределить в разделе <code>merge_tree</code> файла <code>config.xml</code> или задать в секции <code>SETTINGS</code> каждой таблицы.</p><p>Пример переопределения в <code>config.xml</code>:</p><div class="codeBlockContainer_I0IT language-text theme-code-block"><div class="codeBlockContent_wNvx" style="color:#000000;background-color:#ffffff"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#000000"><span class="token plain">&lt;merge_tree&gt;</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    &lt;max_suspicious_broken_parts&gt;5&lt;/max_suspicious_broken_parts&gt;</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">&lt;/merge_tree&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>Пример установки <code>SETTINGS</code> для конкретной таблицы:</p><div class="codeBlockContainer_I0IT language-sql theme-code-block"><div class="codeBlockContent_wNvx" style="color:#000000;background-color:#ffffff"><pre tabindex="0" class="prism-code language-sql codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#000000"><span class="token keyword" style="color:rgb(0, 0, 255)">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">TABLE</span><span class="token plain"> foo</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token identifier punctuation" style="color:rgb(4, 81, 165)">`</span><span class="token identifier">A</span><span class="token identifier punctuation" style="color:rgb(4, 81, 165)">`</span><span class="token plain"> Int64</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">ENGINE</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> MergeTree</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">ORDER</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">BY</span><span class="token plain"> tuple</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">SETTINGS max_suspicious_broken_parts </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">500</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>Пример изменения настроек для конкретной таблицы при помощи команды <code>ALTER TABLE ... MODIFY SETTING</code>:</p><div class="codeBlockContainer_I0IT language-sql theme-code-block"><div class="codeBlockContent_wNvx" style="color:#000000;background-color:#ffffff"><pre tabindex="0" class="prism-code language-sql codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#000000"><span class="token keyword" style="color:rgb(0, 0, 255)">ALTER</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">TABLE</span><span class="token plain"> foo</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">MODIFY</span><span class="token plain"> SETTING max_suspicious_broken_parts </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">100</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="parts-to-throw-insert">parts_to_throw_insert<a class="hash-link" href="#parts-to-throw-insert" title="Direct link to heading">​</a></h2><p>Eсли число активных кусков в партиции больше значения <code>parts_to_throw_insert</code>, то INSERT прерывается с исключением: <code>Too many parts (N). Merges are processing significantly slower than inserts</code>.</p><p>Возможные значения:</p><ul><li>Положительное целое число.</li></ul><p>Значение по умолчанию: 300.</p><p>Чтобы производительность запросов <code>SELECT</code> стала максимальной, необходимо минимизировать количество обрабатываемых кусков, см. <a href="/docs/ru/development/architecture#merge-tree">Дизайн MergeTree</a>.</p><p>Можно установить значение больше — 600 (1200) кусков. Тогда ошибка <code>Too many parts</code> будет появляться реже, но при этом могут возникнуть проблемы с фоновыми слияниями и производительностью <code>SELECT</code>-запросов.</p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="parts-to-delay-insert">parts_to_delay_insert<a class="hash-link" href="#parts-to-delay-insert" title="Direct link to heading">​</a></h2><p>Eсли число кусков в партиции больше значения <code>parts_to_delay_insert</code>, то <code>INSERT</code> искусственно замедляется.</p><p>Возможные значения:</p><ul><li>Положительное целое число.</li></ul><p>Значение по умолчанию: 150.</p><p>ClickHouse искусственно выполняет <code>INSERT</code> дольше (добавляет ‘sleep’) так, чтобы куски сливались в фоновом процессе быстрее, чем добавляются.</p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="inactive-parts-to-throw-insert">inactive_parts_to_throw_insert<a class="hash-link" href="#inactive-parts-to-throw-insert" title="Direct link to heading">​</a></h2><p>Если число неактивных кусков в партиции больше значения <code>inactive_parts_to_throw_insert</code>, то <code>INSERT</code> прерывается с исключением <code>Too many inactive parts (N). Parts cleaning are processing significantly slower than inserts</code>.</p><p>Возможные значения:</p><ul><li>Положительное целое число.</li></ul><p>Значение по умолчанию: 0 (без ограничений).</p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="inactive-parts-to-delay-insert">inactive_parts_to_delay_insert<a class="hash-link" href="#inactive-parts-to-delay-insert" title="Direct link to heading">​</a></h2><p>Если число неактивных кусков в партиции больше или равно значению <code>inactive_parts_to_delay_insert</code>, то <code>INSERT</code> искусственно замедляется. Это помогает, когда сервер не может быстро очистить неактивные куски.</p><p>Возможные значения:</p><ul><li>Положительное целое число.</li></ul><p>Значение по умолчанию: 0 (без ограничений).</p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="max-delay-to-insert">max_delay_to_insert<a class="hash-link" href="#max-delay-to-insert" title="Direct link to heading">​</a></h2><p>Величина в секундах, которая используется для расчета задержки <code>INSERT</code> в случаях, когда число кусков в партиции больше значения <a href="#parts-to-delay-insert">parts_to_delay_insert</a>.</p><p>Возможные значения:</p><ul><li>Положительное целое число.</li></ul><p>Значение по умолчанию: 1.</p><p>Величина задержки (в миллисекундах) для <code>INSERT</code> вычисляется по формуле:</p><div class="codeBlockContainer_I0IT language-code theme-code-block"><div class="codeBlockContent_wNvx" style="color:#000000;background-color:#ffffff"><pre tabindex="0" class="prism-code language-code codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#000000"><span class="token plain">max_k = parts_to_throw_insert - parts_to_delay_insert</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">k = 1 + parts_count_in_partition - parts_to_delay_insert</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">delay_milliseconds = pow(max_delay_to_insert * 1000, k / max_k)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>Т.е. если в партиции уже 299 кусков и parts_to_throw_insert = 300, parts_to_delay_insert = 150, а max_delay_to_insert = 1, то <code>INSERT</code> замедлится на <code>pow( 1 * 1000, (1 + 299 - 150) / (300 - 150) ) = 1000</code> миллисекунд.</p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="max-parts-in-total">max_parts_in_total<a class="hash-link" href="#max-parts-in-total" title="Direct link to heading">​</a></h2><p>Eсли суммарное число активных кусков во всех партициях таблицы больше значения <code>max_parts_in_total</code>, то INSERT прерывается с исключением <code>Too many parts (N)</code>.</p><p>Возможные значения:</p><ul><li>Положительное целое число.</li></ul><p>Значение по умолчанию: 100000.</p><p>С большим числом кусков в таблице производительность запросов ClickHouse снижается, а время старта ClickHouse — увеличивается. Чаще всего это следствие неправильного дизайна (ошибки выбора стратегии партиционирования, например, слишком мелкие партиции).</p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="replicated-deduplication-window">replicated_deduplication_window<a class="hash-link" href="#replicated-deduplication-window" title="Direct link to heading">​</a></h2><p>Количество хеш-сумм последних вставленных блоков, которые хранятся в Zookeeper.</p><p>Возможные значения:</p><ul><li>Положительное целое число.</li><li>0 (без ограничений).</li></ul><p>Значение по умолчанию: 100.</p><p>Команда <code>Insert</code> создает один или несколько блоков (кусков). При вставке в Replicated таблицы ClickHouse для <a href="/docs/ru/engines/table-engines/mergetree-family/replication">дедупликации вставок</a> записывает в Zookeeper хеш-суммы созданных кусков. Но хранятся только последние <code>replicated_deduplication_window</code> хеш-сумм. Самые старые хеш-суммы удаляются из Zookeeper.
Большое значение <code>replicated_deduplication_window</code> замедляет <code>Insert</code>, так как приходится сравнивать большее количество хеш-сумм.
Хеш-сумма рассчитывается по названиям и типам полей, а также по данным вставленного куска (потока байт).</p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="non-replicated-deduplication-window">non_replicated_deduplication_window<a class="hash-link" href="#non-replicated-deduplication-window" title="Direct link to heading">​</a></h2><p>Количество последних вставленных блоков в нереплицированной <a href="/docs/ru/engines/table-engines/mergetree-family/mergetree">MergeTree</a> таблице, для которых хранятся хеш-суммы для проверки дубликатов.</p><p>Возможные значения:</p><ul><li>Положительное целое число.</li><li>0 (дедупликация отключена).</li></ul><p>Значение по умолчанию: 0.</p><p>Используется механизм дедупликации, аналогичный реплицированным таблицам (см. описание настройки <a href="#replicated-deduplication-window">replicated_deduplication_window</a>). Хеш-суммы вставленных кусков записываются в локальный файл на диске.</p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="replicated-deduplication-window-seconds">replicated_deduplication_window_seconds<a class="hash-link" href="#replicated-deduplication-window-seconds" title="Direct link to heading">​</a></h2><p>Время хранения (в секундах) хеш-сумм вставленных блоков в Zookeeper. По истечении этого времени хеш-суммы удаляются.</p><p>Возможные значения:</p><ul><li>Положительное целое число.</li></ul><p>Значение по умолчанию: 604800 (1 неделя).</p><p>Аналогично <a href="#replicated-deduplication-window">replicated_deduplication_window</a>, настройка <code>replicated_deduplication_window_seconds</code> задает время хранения хеш-сумм блоков для дедупликции <code>Insert</code>. Хеш-суммы старше значения <code>replicated_deduplication_window_seconds</code> удаляются из Zookeeper, даже если количество оставшихся хеш-сумм станет меньше чем <code>replicated_deduplication_window</code>.</p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="old-parts-lifetime">old_parts_lifetime<a class="hash-link" href="#old-parts-lifetime" title="Direct link to heading">​</a></h2><p>Время (в секундах) хранения неактивных кусков для защиты от потери данных при спонтанной перезагрузке сервера.</p><p>Возможные значения:</p><ul><li>Положительное целое число.</li></ul><p>Значение по умолчанию: 480.</p><p>После объединения нескольких кусков в один новый ClickHouse помечает исходные куски как неактивные и удаляет их по прошествии <code>old_parts_lifetime</code> секунд.
Неактивные куски удаляются, если они не нужны для текущих запросов, т.е. если счетчик ссылок куска <code>refcount</code> имеет нулевое значение.</p><p>При записи нового куска <code>fsync</code> не вызывается, поэтому неактивные куски удаляются позже. Это значит, что некоторое время новый кусок находится только в оперативной памяти сервера (кеш ОС). Если сервер перезагрузится спонтанно, новый слитый кусок может испортиться или потеряться.</p><p>Во время запуска сервер ClickHouse проверяет целостность кусков.
Если новый (слитый) кусок поврежден, ClickHouse возвращает неактивные куски в список активных и позже снова выполняет слияние. В этом случае испорченный кусок получает новое имя (добавляется префикс <code>broken_</code>) и попадает в каталог <code>detached</code>.
Если проверка целостности не выявляет проблем в слитом куске, то исходные неактивные куски переименовываются (добавляется префикс <code>ignored_</code>) и перемещаются в каталог <code>detached</code>.</p><p>Стандартное для Linux значение <code>dirty_expire_centisecs</code> — 30 секунд. Это максимальное время, в течение которого записанные данные хранятся только в оперативной памяти. Если нагрузка на дисковую систему большая, то данные записываются намного позже. Значение 480 секунд подобрали экспериментальным путем — это время, за которое новый кусок гарантированно запишется на диск.</p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="replicated_fetches_http_connection_timeout">replicated_fetches_http_connection_timeout<a class="hash-link" href="#replicated_fetches_http_connection_timeout" title="Direct link to heading">​</a></h2><p>Тайм-аут HTTP-соединения (в секундах) для запросов на скачивание кусков. Наследуется из профиля по умолчанию <a href="/docs/ru/operations/settings/settings#http_connection_timeout">http_connection_timeout</a>, если не задан явно.</p><p>Возможные значения:</p><ul><li>0 - используется значение <code>http_connection_timeout</code>.</li><li>Любое положительное целое число.</li></ul><p>Значение по умолчанию: <code>0</code>.</p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="replicated_fetches_http_send_timeout">replicated_fetches_http_send_timeout<a class="hash-link" href="#replicated_fetches_http_send_timeout" title="Direct link to heading">​</a></h2><p>Тайм-аут (в секундах) для отправки HTTP-запросов на скачивание кусков. Наследуется из профиля по умолчанию <a href="/docs/ru/operations/settings/settings#http_send_timeout">http_send_timeout</a>, если не задан явно.</p><p>Возможные значения:</p><ul><li>0 - используется значение <code>http_send_timeout</code>.</li><li>Любое положительное целое число.</li></ul><p>Значение по умолчанию: <code>0</code>.</p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="replicated_fetches_http_receive_timeout">replicated_fetches_http_receive_timeout<a class="hash-link" href="#replicated_fetches_http_receive_timeout" title="Direct link to heading">​</a></h2><p>Тайм-аут (в секундах) для получения HTTP-запросов на скачивание кусков. Наследуется из профиля по умолчанию <a href="/docs/ru/operations/settings/settings#http_receive_timeout">http_receive_timeout</a>, если не задан явно.</p><p>Возможные значения:</p><ul><li>0 - используется значение <code>http_receive_timeout</code>.</li><li>Любое положительное целое число.</li></ul><p>Значение по умолчанию: <code>0</code>.</p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="max_replicated_fetches_network_bandwidth">max_replicated_fetches_network_bandwidth<a class="hash-link" href="#max_replicated_fetches_network_bandwidth" title="Direct link to heading">​</a></h2><p>Ограничивает максимальную скорость скачивания данных в сети (в байтах в секунду) для синхронизаций между <a href="/docs/ru/engines/table-engines/mergetree-family/replication">репликами</a>. Настройка применяется к конкретной таблице, в отличие от <a href="/docs/ru/operations/settings/settings#max_replicated_fetches_network_bandwidth_for_server">max_replicated_fetches_network_bandwidth_for_server</a>, которая применяется к серверу.</p><p>Можно ограничить скорость обмена данными как для всего сервера, так и для конкретной таблицы, но для этого значение табличной настройки должно быть меньше серверной. Иначе сервер будет учитывать только настройку <code>max_replicated_fetches_network_bandwidth_for_server</code>.</p><p>Настройка соблюдается неточно.</p><p>Возможные значения:</p><ul><li>Любое целое положительное число.</li><li>0 — Скорость не ограничена.</li></ul><p>Значение по умолчанию: <code>0</code>.</p><p><strong>Использование</strong></p><p>Может быть использована для ограничения скорости передачи данных при репликации данных для добавления или замены новых узлов.</p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="max_replicated_sends_network_bandwidth">max_replicated_sends_network_bandwidth<a class="hash-link" href="#max_replicated_sends_network_bandwidth" title="Direct link to heading">​</a></h2><p>Ограничивает максимальную скорость отправки данных по сети (в байтах в секунду) для синхронизации между <a href="/docs/ru/engines/table-engines/mergetree-family/replication">репликами</a>. Настройка применяется к конкретной таблице, в отличие от <a href="/docs/ru/operations/settings/settings#max_replicated_sends_network_bandwidth_for_server">max_replicated_sends_network_bandwidth_for_server</a>, которая применяется к серверу.</p><p>Можно ограничить скорость обмена данными как для всего сервера, так и для конкретной таблицы, но для этого значение табличной настройки должно быть меньше серверной. Иначе сервер будет учитывать только настройку <code>max_replicated_sends_network_bandwidth_for_server</code>.</p><p>Настройка следуется неточно.</p><p>Возможные значения:</p><ul><li>Любое целое положительное число.</li><li>0 — Скорость не ограничена.</li></ul><p>Значение по умолчанию: <code>0</code>.</p><p><strong>Использование</strong></p><p>Может быть использована для ограничения скорости сети при репликации данных для добавления или замены новых узлов.</p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="max-bytes-to-merge-at-max-space-in-pool">max_bytes_to_merge_at_max_space_in_pool<a class="hash-link" href="#max-bytes-to-merge-at-max-space-in-pool" title="Direct link to heading">​</a></h2><p>Максимальный суммарный размер кусков (в байтах) в одном слиянии, если есть свободные ресурсы в фоновом пуле.
<code>max_bytes_to_merge_at_max_space_in_pool</code> примерно соответствует максимально возможному размеру куска, созданного автоматическим фоновым слиянием.</p><p>Возможные значения:</p><ul><li>Положительное целое число.</li></ul><p>Значение по умолчанию: 161061273600 (150ГБ).</p><p>Планировщик слияний периодически анализирует размер и количество кусков в партициях, и если в пуле хватает ресурсов, то начинает фоновое слияние. Слияния выполняются до тех пор, пока суммарный размер входных кусков не достигнет <code>max_bytes_to_merge_at_max_space_in_pool</code>.</p><p>Слияния, начатые по <a href="/docs/ru/sql-reference/statements/optimize">OPTIMIZE FINAL</a>, не учитывают <code>max_bytes_to_merge_at_max_space_in_pool</code> и объединяют куски пока есть доступные ресурсы (свободное дисковое пространство) до тех пор, пока в партиции не останется один кусок.</p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="max-bytes-to-merge-at-min-space-in-pool">max_bytes_to_merge_at_min_space_in_pool<a class="hash-link" href="#max-bytes-to-merge-at-min-space-in-pool" title="Direct link to heading">​</a></h2><p>Максимальный суммарный размер кусков (в байтах) в одном слиянии при минимуме свободных ресурсов в фоновом пуле.</p><p>Возможные значения:</p><ul><li>Положительное целое число.</li></ul><p>Значение по умолчанию: 1048576 (1 МБ).</p><p><code>max_bytes_to_merge_at_min_space_in_pool</code> задает максимальный суммарный размер кусков, которые можно объединить несмотря на нехватку свободных ресурсов (дискового пространства) в фоновом пуле. Это нужно, чтобы уменьшить количество маленьких кусков и снизить вероятность ошибки <code>Too many parts</code>.</p><p>Слияния резервируют дисковое пространство, удваивая суммарный размер кусков в слиянии. Поэтому при малом объеме свободного места на диске может сложиться ситуация, когда свободное место есть, но оно уже зарезервировано текущими слияниями. Из-за этого другие слияния не начинаются, и количество маленьких кусков в партиции растет с каждым запросом <code>INSERT</code>.</p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="merge-max-block-size">merge_max_block_size<a class="hash-link" href="#merge-max-block-size" title="Direct link to heading">​</a></h2><p>Количество строк в блоках, которые читаются из объединяемых кусков.</p><p>Возможные значения:</p><ul><li>Положительное целое число.</li></ul><p>Значение по умолчанию: 8192</p><p>Слияние читает строки из кусков блоками по <code>merge_max_block_size</code> строк, производит слияние и записывает результат в новый кусок. Читаемый блок помещается в оперативную память, т.е. <code>merge_max_block_size</code> влияет на размер оперативной памяти, необходимой для слияния. Таким образом, слияния могут потреблять большое количество оперативной памяти для таблиц, хранящих очень большие строки (если средний размер строки 100кб, то при слиянии 10 кусков будет использовано (100кб <em> 10 </em> 8192) =~ 8ГБ оперативной памяти). Уменьшив <code>merge_max_block_size</code>, можно сократить размер оперативной памяти, необходимой для слияния, но при этом процесс слияния замедлится.</p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="max-part-loading-threads">max_part_loading_threads<a class="hash-link" href="#max-part-loading-threads" title="Direct link to heading">​</a></h2><p>Максимальное количество потоков, которые читают куски при старте ClickHouse.</p><p>Возможные значения:</p><ul><li>Положительное целое число.</li></ul><p>Значение по умолчанию: определяется автоматически (по количеству ядер процессора).</p><p>На старте ClickHouse читает все куски из всех таблиц (читает файлы с метаданными кусков), чтобы построить в оперативной памяти список всех кусков. В некоторых системах с большим количеством кусков этот процесс может занимать длительное время. Это время можно сократить, увеличив <code>max_part_loading_threads</code> (если при этом хватает ресурсов процессора и диска).</p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="max-partitions-to-read">max_partitions_to_read<a class="hash-link" href="#max-partitions-to-read" title="Direct link to heading">​</a></h2><p>Ограничивает максимальное число партиций для чтения в одном запросе.</p><p>Указанное при создании таблицы значение настройки может быть переназначено настройкой на уровне запроса.</p><p>Возможные значения:</p><ul><li>Любое положительное целое число.</li></ul><p>Значение по умолчанию: -1 (неограниченно).</p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="allow_floating_point_partition_key">allow_floating_point_partition_key<a class="hash-link" href="#allow_floating_point_partition_key" title="Direct link to heading">​</a></h2><p>Позволяет использовать число с плавающей запятой в качестве ключа партиционирования.</p><p>Возможные значения:</p><ul><li>0 — Ключ партиционирования с плавающей запятой не разрешен.</li><li>1 — Ключ партиционирования с плавающей запятой разрешен.</li></ul><p>Значение по умолчанию: <code>0</code>.</p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="check_sample_column_is_correct">check_sample_column_is_correct<a class="hash-link" href="#check_sample_column_is_correct" title="Direct link to heading">​</a></h2><p>Разрешает проверку того, что тип данных столбца для сэмплирования или выражения сэмплирования при создании таблицы верный. Тип данных должен соответствовать одному из беззнаковых <a href="/docs/ru/sql-reference/data-types/int-uint">целочисленных типов</a>: <code>UInt8</code>, <code>UInt16</code>, <code>UInt32</code>, <code>UInt64</code>.</p><p>Возможные значения:</p><ul><li>true  — проверка включена.</li><li>false — проверка при создании таблицы не проводится.</li></ul><p>Значение по умолчанию: <code>true</code>.</p><p>По умолчанию сервер ClickHouse при создании таблицы проверяет тип данных столбца для сэмплирования или выражения сэмплирования. Если уже существуют таблицы с некорректным выражением сэмплирования, то чтобы не возникало исключение при запуске сервера, установите <code>check_sample_column_is_correct</code> в значение <code>false</code>.</p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="min-bytes-to-rebalance-partition-over-jbod">min_bytes_to_rebalance_partition_over_jbod<a class="hash-link" href="#min-bytes-to-rebalance-partition-over-jbod" title="Direct link to heading">​</a></h2><p>Устанавливает минимальное количество байтов для обеспечения балансировки при распределении новых больших кусков данных по дискам тома <a href="https://en.wikipedia.org/wiki/Non-RAID_drive_architectures" target="_blank" rel="noopener noreferrer">JBOD</a>.</p><p>Возможные значения:</p><ul><li>Положительное целое число.</li><li>0 — балансировка отключена.</li></ul><p>Значение по умолчанию: <code>0</code>.</p><p><strong>Использование</strong></p><p>Значение настройки <code>min_bytes_to_rebalance_partition_over_jbod</code> должно быть меньше значения настройки <a href="/docs/ru/operations/settings/merge-tree-settings#max-bytes-to-merge-at-max-space-in-pool">max_bytes_to_merge_at_max_space_in_pool</a>. Иначе ClickHouse сгенерирует исключение.</p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="detach_not_byte_identical_parts">detach_not_byte_identical_parts<a class="hash-link" href="#detach_not_byte_identical_parts" title="Direct link to heading">​</a></h2><p>Настраивает отключение куска данных после выполнения слияния или мутации, если на одной реплике его содержимое побайтно не совпадает с кусками на других репликах. Если настройка отключена, то кусок удаляется. Активируйте это поведение, если хотите анализировать такие куски позже.</p><p>Эта настройка применяется к таблицам <code>MergeTree</code> с включенной <a href="/docs/ru/engines/table-engines/mergetree-family/replication">репликацией данных</a>.</p><p>Возможные значения:</p><ul><li>0 — куски данных удаляются.</li><li>1 — куски данных открепляются.</li></ul><p>Значение по умолчанию: <code>0</code>.</p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="setting-merge-tree-clear-old-temporary-directories-interval-seconds">merge_tree_clear_old_temporary_directories_interval_seconds<a class="hash-link" href="#setting-merge-tree-clear-old-temporary-directories-interval-seconds" title="Direct link to heading">​</a></h2><p>Задает интервал в секундах для удаления старых временных каталогов на сервере ClickHouse.</p><p>Возможные значения:</p><ul><li>Положительное целое число.</li></ul><p>Значение по умолчанию: <code>60</code> секунд.</p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="setting-merge-tree-clear-old-parts-interval-seconds">merge_tree_clear_old_parts_interval_seconds<a class="hash-link" href="#setting-merge-tree-clear-old-parts-interval-seconds" title="Direct link to heading">​</a></h2><p>Задает интервал в секундах для удаления старых кусков данных, журналов предзаписи (WAL) и мутаций на сервере ClickHouse.</p><p>Возможные значения:</p><ul><li>Положительное целое число.</li></ul><p>Значение по умолчанию: <code>1</code> секунда.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/ClickHouse/ClickHouse/tree/master/docs/ru/operations/settings/merge-tree-settings.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_dcUD" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_foO9"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/ru/operations/settings/settings-users"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Настройки пользователей</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/ru/operations/utilities/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Утилиты</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#parts-to-throw-insert" class="table-of-contents__link toc-highlight">parts_to_throw_insert</a></li><li><a href="#parts-to-delay-insert" class="table-of-contents__link toc-highlight">parts_to_delay_insert</a></li><li><a href="#inactive-parts-to-throw-insert" class="table-of-contents__link toc-highlight">inactive_parts_to_throw_insert</a></li><li><a href="#inactive-parts-to-delay-insert" class="table-of-contents__link toc-highlight">inactive_parts_to_delay_insert</a></li><li><a href="#max-delay-to-insert" class="table-of-contents__link toc-highlight">max_delay_to_insert</a></li><li><a href="#max-parts-in-total" class="table-of-contents__link toc-highlight">max_parts_in_total</a></li><li><a href="#replicated-deduplication-window" class="table-of-contents__link toc-highlight">replicated_deduplication_window</a></li><li><a href="#non-replicated-deduplication-window" class="table-of-contents__link toc-highlight">non_replicated_deduplication_window</a></li><li><a href="#replicated-deduplication-window-seconds" class="table-of-contents__link toc-highlight">replicated_deduplication_window_seconds</a></li><li><a href="#old-parts-lifetime" class="table-of-contents__link toc-highlight">old_parts_lifetime</a></li><li><a href="#replicated_fetches_http_connection_timeout" class="table-of-contents__link toc-highlight">replicated_fetches_http_connection_timeout</a></li><li><a href="#replicated_fetches_http_send_timeout" class="table-of-contents__link toc-highlight">replicated_fetches_http_send_timeout</a></li><li><a href="#replicated_fetches_http_receive_timeout" class="table-of-contents__link toc-highlight">replicated_fetches_http_receive_timeout</a></li><li><a href="#max_replicated_fetches_network_bandwidth" class="table-of-contents__link toc-highlight">max_replicated_fetches_network_bandwidth</a></li><li><a href="#max_replicated_sends_network_bandwidth" class="table-of-contents__link toc-highlight">max_replicated_sends_network_bandwidth</a></li><li><a href="#max-bytes-to-merge-at-max-space-in-pool" class="table-of-contents__link toc-highlight">max_bytes_to_merge_at_max_space_in_pool</a></li><li><a href="#max-bytes-to-merge-at-min-space-in-pool" class="table-of-contents__link toc-highlight">max_bytes_to_merge_at_min_space_in_pool</a></li><li><a href="#merge-max-block-size" class="table-of-contents__link toc-highlight">merge_max_block_size</a></li><li><a href="#max-part-loading-threads" class="table-of-contents__link toc-highlight">max_part_loading_threads</a></li><li><a href="#max-partitions-to-read" class="table-of-contents__link toc-highlight">max_partitions_to_read</a></li><li><a href="#allow_floating_point_partition_key" class="table-of-contents__link toc-highlight">allow_floating_point_partition_key</a></li><li><a href="#check_sample_column_is_correct" class="table-of-contents__link toc-highlight">check_sample_column_is_correct</a></li><li><a href="#min-bytes-to-rebalance-partition-over-jbod" class="table-of-contents__link toc-highlight">min_bytes_to_rebalance_partition_over_jbod</a></li><li><a href="#detach_not_byte_identical_parts" class="table-of-contents__link toc-highlight">detach_not_byte_identical_parts</a></li><li><a href="#setting-merge-tree-clear-old-temporary-directories-interval-seconds" class="table-of-contents__link toc-highlight">merge_tree_clear_old_temporary_directories_interval_seconds</a></li><li><a href="#setting-merge-tree-clear-old-parts-interval-seconds" class="table-of-contents__link toc-highlight">merge_tree_clear_old_parts_interval_seconds</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">ClickHouse</div><ul class="footer__items"><li class="footer__item"><a href="https://clickhouse.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Company</a></li><li class="footer__item"><a href="https://clickhouse.com/cloud/" target="_blank" rel="noopener noreferrer" class="footer__link-item">ClickHouse as a Service</a></li><li class="footer__item"><a href="https://clickhouse.com/careers/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Careers</a></li><li class="footer__item"><a href="https://clickhouse.com/learn/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Learn ClickHouse</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/ClickHouse/ClickHouse" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://clickhouse.com/blog/en/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.youtube.com/c/ClickHouseDB" target="_blank" rel="noopener noreferrer" class="footer__link-item">YouTube<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/ClickHouseDB" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://join.slack.com/t/clickhousedb/shared_invite/zt-rxm3rdrk-lIUmhLC3V8WTaL0TGxsOmg" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Policies</div><ul class="footer__items"><li class="footer__item"><a href="https://clickhouse.com/legal/trademark-policy/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Trademark Policy</a></li><li class="footer__item"><a href="https://clickhouse.com/legal/privacy-policy/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy Policy</a></li><li class="footer__item"><a href="https://clickhouse.com/legal/cookie-policy/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Cookie Policy</a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><img src="/docs/img/clickhouse.svg" alt="ClickHouse Documentation" class="themedImage_W2Cr themedImage--light_TfLj footer__logo"><img src="/docs/img/clickhouse.svg" alt="ClickHouse Documentation" class="themedImage_W2Cr themedImage--dark_oUvU footer__logo"></div><div class="footer__copyright">Copyright &copy; 2016&ndash;2022 ClickHouse, Inc. ClickHouse Docs provided under the Creative Commons CC BY-NC-SA 4.0 license. ClickHouse&reg; is a registered trademark of ClickHouse, Inc.</div></div></div></footer></div>
<script src="/docs/assets/js/runtime~main.832195c1.js"></script>
<script src="/docs/assets/js/main.0e6c66ce.js"></script>
</body>
</html>